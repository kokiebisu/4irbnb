{"code":"(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[3],{\"2F2M\":function(t,e,n){\"use strict\";n.d(e,\"a\",(function(){return mr})),n.d(e,\"b\",(function(){return lr}));var r=n(\"TMUO\"),i=n(\"NDAs\"),o=n(\"5qNn\"),a=n(\"cVtW\"),s=n(\"ufvu\"),u=n(\"ERkP\"),c=n.n(u),l=function(t){return\"object\"===typeof t&&t.hasOwnProperty(\"current\")},f=function(){function t(){this.subscriptions=new Set}return t.prototype.add=function(t){var e=this;return this.subscriptions.add(t),function(){e.subscriptions.delete(t)}},t.prototype.notify=function(t,e,n){var i,o;if(this.subscriptions.size)try{for(var a=Object(r.f)(this.subscriptions),s=a.next();!s.done;s=a.next()){(0,s.value)(t,e,n)}}catch(u){i={error:u}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}},t.prototype.clear=function(){this.subscriptions.clear()},t}(),d=function(){function t(t){var e,n=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new f,this.renderSubscribers=new f,this.canTrackVelocity=!1,this.updateAndNotify=function(t,e){void 0===e&&(e=!0),n.prev=n.current,n.current=t,n.prev!==n.current&&n.updateSubscribers.notify(n.current),e&&n.renderSubscribers.notify(n.current);var r=Object(i.c)(),o=r.delta,a=r.timestamp;n.lastUpdated!==a&&(n.timeDelta=o,n.lastUpdated=a,i.b.postRender(n.scheduleVelocityCheck))},this.scheduleVelocityCheck=function(){return i.b.postRender(n.velocityCheck)},this.velocityCheck=function(t){t.timestamp!==n.lastUpdated&&(n.prev=n.current)},this.current=t,this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e)))}return t.prototype.onChange=function(t){return this.updateSubscribers.add(t)},t.prototype.clearListeners=function(){this.updateSubscribers.clear()},t.prototype.onRenderRequest=function(t){return t(this.get()),this.renderSubscribers.add(t)},t.prototype.attach=function(t){this.passiveEffect=t},t.prototype.set=function(t,e){void 0===e&&(e=!0),e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)},t.prototype.get=function(){return this.current},t.prototype.getPrevious=function(){return this.prev},t.prototype.getVelocity=function(){return this.canTrackVelocity?Object(o.x)(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},t.prototype.start=function(t){var e=this;return this.stop(),new Promise((function(n){e.stopAnimation=t(n)})).then((function(){return e.clearAnimation()}))},t.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},t.prototype.isAnimating=function(){return!!this.stopAnimation},t.prototype.clearAnimation=function(){this.stopAnimation=null},t.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},t}();function p(t){return new d(t)}var v=function(){function t(t,e){var n=this;this.children=new Set,this.baseTarget={},this.latest={},this.values=new Map,this.valueSubscriptions=new Map,this.config={},this.isMounted=!1,this.update=function(){return n.config.onUpdate(n.latest)},this.triggerRender=function(){return n.render()},this.ref=function(t){t?n.mount(t):n.unmount(),n.externalRef&&(\"function\"===typeof n.externalRef?n.externalRef(t):l(n.externalRef)&&(n.externalRef.current=t))},this.parent=t,this.rootParent=t?t.rootParent:this,this.treePath=t?Object(r.e)(t.treePath,[t]):[],this.depth=t?t.depth+1:0,this.externalRef=e}return t.prototype.getVariantPayload=function(){return this.config.custom},t.prototype.getVariant=function(t){var e;return null===(e=this.config.variants)||void 0===e?void 0:e[t]},t.prototype.addVariantChild=function(t){var e=this;return this.variantChildren||(this.variantChildren=new Set),this.variantChildren.add(t),function(){return e.variantChildren.delete(t)}},t.prototype.addVariantChildOrder=function(t){this.variantChildrenOrder||(this.variantChildrenOrder=new Set),this.variantChildrenOrder.add(t)},t.prototype.onAnimationStart=function(){var t,e;null===(e=(t=this.config).onAnimationStart)||void 0===e||e.call(t)},t.prototype.onAnimationComplete=function(){var t,e;this.isMounted&&(null===(e=(t=this.config).onAnimationComplete)||void 0===e||e.call(t))},t.prototype.getDefaultTransition=function(){return this.config.transition},t.prototype.subscribe=function(t){var e=this;return this.children.add(t),function(){return e.children.delete(t)}},t.prototype.hasValue=function(t){return this.values.has(t)},t.prototype.addValue=function(t,e){this.hasValue(t)&&this.removeValue(t),this.values.set(t,e),this.setSingleStaticValue(t,e.get()),this.subscribeToValue(t,e)},t.prototype.removeValue=function(t){var e;null===(e=this.valueSubscriptions.get(t))||void 0===e||e(),this.valueSubscriptions.delete(t),this.values.delete(t),delete this.latest[t]},t.prototype.getValue=function(t,e){var n=this.values.get(t);return void 0===n&&void 0!==e&&(n=new d(e),this.addValue(t,n)),n},t.prototype.forEachValue=function(t){this.values.forEach(t)},t.prototype.getInstance=function(){return this.element},t.prototype.updateConfig=function(t){void 0===t&&(t={}),this.config=Object(r.a)({},t)},t.prototype.getBaseValue=function(t,e){return this.baseTarget[t]},t.prototype.setSingleStaticValue=function(t,e){this.latest[t]=e},t.prototype.setStaticValues=function(t,e){if(\"string\"===typeof t)this.setSingleStaticValue(t,e);else for(var n in t)this.setSingleStaticValue(n,t[n])},t.prototype.scheduleRender=function(){i.b.render(this.triggerRender,!1,!0)},t.prototype.scheduleUpdateLayoutDelta=function(){i.b.preRender(this.rootParent.updateLayoutDelta,!1,!0)},t.prototype.subscribeToValue=function(t,e){var n=this,r=e.onChange((function(e){n.setSingleStaticValue(t,e),n.element&&n.config.onUpdate&&i.b.update(n.update,!1,!0)})),o=e.onRenderRequest((function(){n.element&&n.scheduleRender()}));this.valueSubscriptions.set(t,(function(){r(),o()}))},t.prototype.mount=function(t){Object(a.a)(!!t,\"No ref found. Ensure components created with motion.custom forward refs using React.forwardRef\"),this.parent&&(this.removeFromParent=this.parent.subscribe(this)),this.element=this.current=t},t.prototype.unmount=function(){var t=this;this.forEachValue((function(e,n){return t.removeValue(n)})),i.a.update(this.update),i.a.render(this.render),this.removeFromParent&&this.removeFromParent()},t}();function h(t){return t}function m(t){var e=t.top;return{x:{min:t.left,max:t.right},y:{min:e,max:t.bottom}}}function g(t){return{x:Object(r.a)({},t.x),y:Object(r.a)({},t.y)}}var y={translate:0,scale:1,origin:0,originPoint:0};function b(){return{x:Object(r.a)({},y),y:Object(r.a)({},y)}}var x=Object(r.a)(Object(r.a)({},s.g),{transform:Math.round}),j={color:s.b,backgroundColor:s.b,outlineColor:s.b,fill:s.b,stroke:s.b,borderColor:s.b,borderTopColor:s.b,borderRightColor:s.b,borderBottomColor:s.b,borderLeftColor:s.b,borderWidth:s.j,borderTopWidth:s.j,borderRightWidth:s.j,borderBottomWidth:s.j,borderLeftWidth:s.j,borderRadius:s.j,radius:s.j,borderTopLeftRadius:s.j,borderTopRightRadius:s.j,borderBottomRightRadius:s.j,borderBottomLeftRadius:s.j,width:s.j,maxWidth:s.j,height:s.j,maxHeight:s.j,size:s.j,top:s.j,right:s.j,bottom:s.j,left:s.j,padding:s.j,paddingTop:s.j,paddingRight:s.j,paddingBottom:s.j,paddingLeft:s.j,margin:s.j,marginTop:s.j,marginRight:s.j,marginBottom:s.j,marginLeft:s.j,rotate:s.d,rotateX:s.d,rotateY:s.d,rotateZ:s.d,scale:s.l,scaleX:s.l,scaleY:s.l,scaleZ:s.l,skew:s.d,skewX:s.d,skewY:s.d,distance:s.j,translateX:s.j,translateY:s.j,translateZ:s.j,x:s.j,y:s.j,z:s.j,perspective:s.j,transformPerspective:s.j,opacity:s.a,originX:s.i,originY:s.i,originZ:s.j,zIndex:x,fillOpacity:s.a,strokeOpacity:s.a,numOctaves:x},O=[s.g,s.j,s.h,s.d,s.n,s.m,{test:function(t){return\"auto\"===t},parse:function(t){return t}}],E=function(t){return function(e){return e.test(t)}},w=function(t){return O.find(E(t))},C=Object(r.e)(O,[s.b,s.c]),P=function(t){return C.find(E(t))},A=function(t){return j[t]},S=function(t,e){return e&&\"number\"===typeof t?e.transform(t):t},V=[\"\",\"X\",\"Y\",\"Z\"],T=[\"transformPerspective\",\"x\",\"y\",\"z\"];function B(t,e){return T.indexOf(t)-T.indexOf(e)}[\"perspective\",\"translate\",\"scale\",\"rotate\",\"skew\"].forEach((function(t){V.forEach((function(e){var n=t+e;T.push(n)}))}));var L=new Set(T);function k(t){return L.has(t)}var R=new Set([\"originX\",\"originY\",\"originZ\"]);function M(t){return R.has(t)}var D={x:\"translateX\",y:\"translateY\",z:\"translateZ\",transformPerspective:\"perspective\"};function F(t,e,n){var r=t.x,i=t.y,o=\"translate3d(\"+r.translate/e.x+\"px, \"+i.translate/e.y+\"px, 0) \";if(n){var a=n.rotate,s=n.rotateX,u=n.rotateY;a&&(o+=\"rotate(\"+a+\") \"),s&&(o+=\"rotateX(\"+s+\") \"),u&&(o+=\"rotateY(\"+u+\") \")}return o+=\"scale(\"+r.scale+\", \"+i.scale+\")\",n||o!==U?o:\"\"}var U=F(b(),{x:1,y:1});function I(t){return t.startsWith(\"--\")}function H(t){return\"string\"===typeof t&&t.startsWith(\"var(--\")}var Y=/var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;function X(t,e,n){void 0===n&&(n=1),Object(a.a)(n<=4,'Max CSS variable fallback depth detected in property \"'+t+'\". This may indicate a circular fallback dependency.');var i=Object(r.c)(function(t){var e=Y.exec(t);if(!e)return[,];var n=Object(r.c)(e,3);return[n[1],n[2]]}(t),2),o=i[0],s=i[1];if(o){var u=window.getComputedStyle(e).getPropertyValue(o);return u?u.trim():H(s)?X(s,e,n+1):s}}function z(t,e){return t/(e.max-e.min)*100}var W=\"_$css\";var N={process:function(t,e){if(\"string\"===typeof t){if(!s.j.test(t))return t;t=parseFloat(t)}return z(t,e.x)+\"% \"+z(t,e.y)+\"%\"}},G={borderRadius:Object(r.a)(Object(r.a)({},N),{applyTo:[\"borderTopLeftRadius\",\"borderTopRightRadius\",\"borderBottomLeftRadius\",\"borderBottomRightRadius\"]}),borderTopLeftRadius:N,borderTopRightRadius:N,borderBottomLeftRadius:N,borderBottomRightRadius:N,boxShadow:{process:function(t,e,n,r){var i=t,a=t.includes(\"var(\"),u=[];a&&(t=t.replace(Y,(function(t){return u.push(t),W})));var c=s.c.parse(t);if(c.length>5)return i;var l=s.c.createTransformer(t),f=\"number\"!==typeof c[0]?1:0,d=n.x.scale*r.x,p=n.y.scale*r.y;c[0+f]/=d,c[1+f]/=p;var v=Object(o.u)(d,p,.5);\"number\"===typeof c[2+f]&&(c[2+f]/=v),\"number\"===typeof c[3+f]&&(c[3+f]/=v);var h=l(c);if(a){var m=0;h=h.replace(W,(function(){var t=u[m];return m++,t}))}return h}}};function Z(t,e,n,r,i,o,a,s,u,c,l,f){var d=a.enableHardwareAcceleration,p=a.transformTemplate,v=a.allowTransformNone;o.length=0;var h=!1,m=!1,g=!0;for(var y in t){var b=t[y],x=A(y),j=S(b,x);if(k(y)){if(h=!0,r[y]=j,o.push(y),!g)continue;b!==(void 0!==x.default?x.default:0)&&(g=!1)}else if(M(y))i[y]=j,m=!0;else if(\"transform\"!==y||\"function\"!==typeof b){var O=I(y)?n:e;if(s&&G[y]){var E=G[y].process(b,f,u,l),w=G[y].applyTo;if(w)for(var C=w.length,P=0;P<C;P++)O[w[P]]=E;else O[y]=E}else O[y]=j}}s?(e.transform=F(c,l,h?r:void 0),p&&(e.transform=p(r,e.transform)),e.transformOrigin=function(t){var e=t.x,n=t.y;return 100*e.origin+\"% \"+100*n.origin+\"% 0\"}(c)):(h&&(e.transform=function(t,e,n,r,i,o){void 0===i&&(i=!0),void 0===o&&(o=!0);var a=\"\";e.sort(B);for(var s=!1,u=e.length,c=0;c<u;c++){var l=e[c];a+=(D[l]||l)+\"(\"+t[l]+\") \",\"z\"===l&&(s=!0)}return!s&&i?a+=\"translateZ(0)\":a=a.trim(),n?a=n(t,r?\"\":a):o&&r&&(a=\"none\"),a}(r,o,p,g,d,v)),m&&(e.transformOrigin=function(t){var e=t.originX,n=void 0===e?\"50%\":e,r=t.originY,i=void 0===r?\"50%\":r,o=t.originZ;return n+\" \"+i+\" \"+(void 0===o?0:o)}(i)))}function K(t,e){t.min=e.min,t.max=e.max}function _(t,e,n){return n+e*(t-n)}function $(t,e,n,r,i){return void 0!==i&&(t=_(t,i,r)),_(t,n,r)+e}function q(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),t.min=$(t.min,e,n,r,i),t.max=$(t.max,e,n,r,i)}function J(t,e){var n=e.x,r=e.y;q(t.x,n.translate,n.scale,n.originPoint),q(t.y,r.translate,r.scale,r.originPoint)}function Q(t,e,n,i){var a=Object(r.c)(i,3),s=a[0],u=a[1],c=a[2];t.min=e.min,t.max=e.max;var l=void 0!==n[c]?n[c]:.5,f=Object(o.u)(e.min,e.max,l);q(t,n[s],n[u],f,n.scale)}var tt=[\"x\",\"scaleX\",\"originX\"],et=[\"y\",\"scaleY\",\"originY\"];function nt(t,e,n,r,i){return t=_(t-=e,1/n,r),void 0!==i&&(t=_(t,1/i,r)),t}function rt(t,e,n){var i=Object(r.c)(n,3),a=i[0],s=i[1],u=i[2];!function(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=.5);var a=Object(o.u)(t.min,t.max,r)-e;t.min=nt(t.min,e,n,a,i),t.max=nt(t.max,e,n,a,i)}(t,e[a],e[s],e[u],e.scale)}function it(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=.01),Object(o.n)(t,e)<n}function ot(t){return t.max-t.min}function at(t,e){var n,r=.5,i=ot(t),a=ot(e);return a>i?r=Object(o.w)(e.min,e.max-i,t.min):i>a&&(r=Object(o.w)(t.min,t.max-a,e.min)),n=r,Object(o.l)(0,1,n)}function st(t,e,n,r){t.origin=void 0===r?at(e,n):r,t.originPoint=Object(o.u)(e.min,e.max,t.origin),t.scale=ot(n)/ot(e),it(t.scale,1,1e-4)&&(t.scale=1),t.translate=Object(o.u)(n.min,n.max,t.origin)-t.originPoint,it(t.translate)&&(t.translate=0)}function ut(t,e,n,r){st(t.x,e.x,n.x,r),st(t.y,e.y,n.y,r)}function ct(t){return[t(\"x\"),t(\"y\")]}function lt(t,e){return m(function(t,e){var n=t.top,r=t.left,i=t.bottom,o=t.right;void 0===e&&(e=h);var a=e({x:r,y:n}),s=e({x:o,y:i});return{top:a.y,left:a.x,bottom:s.y,right:s.x}}(t.getBoundingClientRect(),e))}var ft,dt=function(t){return Array.isArray(t)},pt=new Set([\"width\",\"height\",\"top\",\"left\",\"right\",\"bottom\",\"x\",\"y\"]),vt=function(t){return pt.has(t)},ht=function(t,e){t.set(e,!1),t.set(e)},mt=function(t){return t===s.g||t===s.j};!function(t){t.width=\"width\",t.height=\"height\",t.left=\"left\",t.right=\"right\",t.top=\"top\",t.bottom=\"bottom\"}(ft||(ft={}));var gt=function(t,e){return parseFloat(t.split(\", \")[e])},yt=function(t,e){return function(n,r){var i=r.transform;if(\"none\"===i||!i)return 0;var o=i.match(/^matrix3d\\((.+)\\)$/);if(o)return gt(o[1],e);var a=i.match(/^matrix\\((.+)\\)$/);return a?gt(a[1],t):0}},bt=new Set([\"x\",\"y\",\"z\"]),xt=T.filter((function(t){return!bt.has(t)}));var jt={width:function(t){var e=t.x;return e.max-e.min},height:function(t){var e=t.y;return e.max-e.min},top:function(t,e){var n=e.top;return parseFloat(n)},left:function(t,e){var n=e.left;return parseFloat(n)},bottom:function(t,e){var n=t.y,r=e.top;return parseFloat(r)+(n.max-n.min)},right:function(t,e){var n=t.x,r=e.left;return parseFloat(r)+(n.max-n.min)},x:yt(4,13),y:yt(5,14)},Ot=function(t,e,n,i){void 0===n&&(n={}),void 0===i&&(i={}),e=Object(r.a)({},e),i=Object(r.a)({},i);var o=Object.keys(e).filter(vt),u=[],c=!1,l=[];if(o.forEach((function(r){var o=t.getValue(r);if(t.hasValue(r)){var f,d=n[r],p=e[r],v=w(d);if(dt(p))for(var h=p.length,m=null===p[0]?1:0;m<h;m++)f?Object(a.a)(w(p[m])===f,\"All keyframes must be of the same type\"):(f=w(p[m]),Object(a.a)(f===v||mt(v)&&mt(f),\"Keyframes must be of the same dimension as the current value\"));else f=w(p);if(v!==f)if(mt(v)&&mt(f)){var g=o.get();\"string\"===typeof g&&o.set(parseFloat(g)),\"string\"===typeof p?e[r]=parseFloat(p):Array.isArray(p)&&f===s.j&&(e[r]=p.map(parseFloat))}else(null===v||void 0===v?void 0:v.transform)&&(null===f||void 0===f?void 0:f.transform)&&(0===d||0===p)?0===d?o.set(f.transform(d)):e[r]=v.transform(p):(c||(u=function(t){var e=[];return xt.forEach((function(n){var r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith(\"scale\")?1:0))})),e.length&&t.render(),e}(t),c=!0),l.push(r),i[r]=void 0!==i[r]?i[r]:e[r],ht(o,p))}})),l.length){var f=function(t,e,n){var r=e.getBoundingBox(),i=e.getComputedStyle(),o=i.display,a={top:i.top,left:i.left,bottom:i.bottom,right:i.right,transform:i.transform};\"none\"===o&&e.setStaticValues(\"display\",t.display||\"block\"),e.render();var s=e.getBoundingBox();return n.forEach((function(n){var o=e.getValue(n);ht(o,jt[n](r,a)),t[n]=jt[n](s,i)})),t}(e,t,l);return u.length&&u.forEach((function(e){var n=Object(r.c)(e,2),i=n[0],o=n[1];t.getValue(i).set(o)})),t.render(),{target:f,transitionEnd:i}}return{target:e,transitionEnd:i}};function Et(t,e,n,r){return function(t){return Object.keys(t).some(vt)}(e)?Ot(t,e,n,r):{target:e,transitionEnd:r}}var wt=function(t,e,n,i){var o=function(t,e,n){var i,o=Object(r.d)(e,[]),a=t.getInstance();if(!(a instanceof HTMLElement))return{target:o,transitionEnd:n};for(var s in n&&(n=Object(r.a)({},n)),t.forEachValue((function(t){var e=t.get();if(H(e)){var n=X(e,a);n&&t.set(n)}})),o){var u=o[s];if(H(u)){var c=X(u,a);c&&(o[s]=c,n&&(null!==(i=n[s])&&void 0!==i||(n[s]=u)))}}return{target:o,transitionEnd:n}}(t,e,i);return Et(t,e=o.target,n,i=o.transitionEnd)};function Ct(t){return Array.isArray(t)}function Pt(t,e,n){return\"string\"===typeof e&&(e=t.getVariant(e)),\"function\"===typeof e?e(null!==n&&void 0!==n?n:t.getVariantPayload(),function(t){var e={};return t.forEachValue((function(t,n){return e[n]=t.get()})),e}(t),function(t){var e={};return t.forEachValue((function(t,n){return e[n]=t.getVelocity()})),e}(t)):e}function At(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,p(n))}function St(t,e){var n,i=Pt(t,e),o=i?t.makeTargetAnimatable(i,!1):{},a=o.transitionEnd,s=void 0===a?{}:a,u=(o.transition,Object(r.d)(o,[\"transitionEnd\",\"transition\"]));for(var c in u=Object(r.a)(Object(r.a)({},u),s)){At(t,c,(n=u[c],dt(n)?n[n.length-1]||0:n))}}function Vt(t,e){Object(r.e)(e).reverse().forEach((function(n){var r;St(t,t.getVariant(n)),null===(r=t.variantChildren)||void 0===r||r.forEach((function(t){Vt(t,e)}))}))}function Tt(t,e){return Array.isArray(e)?Vt(t,e):\"string\"===typeof e?Vt(t,[e]):void St(t,e)}function Bt(t,e,n){var r,i,o,u=Object.keys(e).filter((function(e){return!t.hasValue(e)})),c=u.length;if(c)for(var l=0;l<c;l++){var f=u[l],d=e[f],v=null;if(Array.isArray(d)&&(v=d[0]),null===v){var h=null!==(r=n[f])&&void 0!==r?r:t.readNativeValue(f);v=void 0!==h?h:e[f],Object(a.a)(null!==v,'No initial value for \"'+f+'\" can be inferred. Ensure an initial value for \"'+f+'\" is defined on the component.')}\"string\"===typeof v&&/^\\-?\\d*\\.?\\d+$/.test(v)?v=parseFloat(v):!P(v)&&s.c.test(d)&&(v=s.c.getAnimatableNone(d)),t.addValue(f,p(v)),null!==(i=(o=n)[f])&&void 0!==i||(o[f]=v),t.baseTarget[f]=v}}function Lt(t,e){if(e)return(e[t]||e.default||e).from}function kt(t,e,n){var r,i,o={};for(var a in t)o[a]=null!==(r=Lt(a,e))&&void 0!==r?r:null===(i=n.getValue(a))||void 0===i?void 0:i.get();return o}var Rt=function(t){return t instanceof d},Mt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultConfig={enableHardwareAcceleration:!0,allowTransformNone:!0},e.style={},e.reactStyle={},e.vars={},e.transform={},e.transformOrigin={},e.transformKeys=[],e.config=e.defaultConfig,e.isLayoutProjectionEnabled=!1,e.layoutUpdateListeners=new f,e.layoutMeasureListeners=new f,e.viewportBoxUpdateListeners=new f,e.hasViewportBoxUpdated=!1,e.targetBoxFinal={x:{min:0,max:1},y:{min:0,max:1}},e.treeScale={x:1,y:1},e.delta=b(),e.deltaFinal=b(),e.deltaTransform=U,e.stopLayoutAxisAnimation={x:function(){},y:function(){}},e.isTargetBoxLocked=!1,e.updateLayoutDelta=function(){e.isLayoutProjectionEnabled&&e.box&&e.updateLayoutDeltas(),e.children.forEach(Dt)},e}return Object(r.b)(e,t),e.prototype.removeValue=function(e){t.prototype.removeValue.call(this,e),delete this.vars[e],delete this.style[e]},e.prototype.clean=function(){this.style={},this.vars={},this.transform={}},e.prototype.updateConfig=function(t){void 0===t&&(t={}),this.config=Object(r.a)(Object(r.a)({},this.defaultConfig),t)},e.prototype.read=function(t){var e=this.getComputedStyle();return(I(t)?e.getPropertyValue(t):e[t])||0},e.prototype.addValue=function(e,n){t.prototype.addValue.call(this,e,n),e.startsWith(\"rotate\")&&(this.layoutOrigin=.5)},e.prototype.readNativeValue=function(t){if(k(t)){var e=A(t);return e&&e.default||0}return this.read(t)},e.prototype.getBaseValue=function(e,n){var r,i=null===(r=n.style)||void 0===r?void 0:r[e];return void 0===i||Rt(i)?t.prototype.getBaseValue.call(this,e,n):i},e.prototype.makeTargetAnimatable=function(t,e){void 0===e&&(e=!0);var n=t.transition,i=t.transitionEnd,o=Object(r.d)(t,[\"transition\",\"transitionEnd\"]),a=this.config.transformValues,s=kt(o,n||{},this);if(a&&(i&&(i=a(i)),o&&(o=a(o)),s&&(s=a(s))),e){Bt(this,o,s);var u=wt(this,o,s,i);i=u.transitionEnd,o=u.target}return Object(r.a)({transition:n,transitionEnd:i},o)},e.prototype.enableLayoutProjection=function(){this.isLayoutProjectionEnabled=!0},e.prototype.hide=function(){!1!==this.isVisible&&(this.isVisible=!1,this.scheduleRender())},e.prototype.show=function(){!0!==this.isVisible&&(this.isVisible=!0,this.scheduleRender())},e.prototype.onLayoutUpdate=function(t){return this.layoutUpdateListeners.add(t)},e.prototype.onLayoutMeasure=function(t){return this.layoutMeasureListeners.add(t)},e.prototype.onViewportBoxUpdate=function(t){return this.viewportBoxUpdateListeners.add(t)},e.prototype.layoutReady=function(t){this.layoutUpdateListeners.notify(this.box,this.prevViewportBox||this.box,t)},e.prototype.getBoundingBox=function(){var t=this.config.transformPagePoint;return lt(this.element,t)},e.prototype.getBoundingBoxWithoutTransforms=function(){var t,e,n=this.getBoundingBox();return t=n,e=this.latest,rt(t.x,e,tt),rt(t.y,e,et),n},e.prototype.getComputedStyle=function(){return window.getComputedStyle(this.element)},e.prototype.snapshotBoundingBox=function(){this.prevViewportBox=this.getBoundingBoxWithoutTransforms(),this.rebaseTargetBox(!1,this.prevViewportBox)},e.prototype.rebaseTargetBox=function(t,e){var n=this;void 0===t&&(t=!1),void 0===e&&(e=this.box);var r=this.getAxisProgress(),i=r.x,o=r.y,a=this.box&&!this.isTargetBoxLocked&&!i.isAnimating()&&!o.isAnimating();(t||a)&&ct((function(t){var r=e[t],i=r.min,o=r.max;n.setAxisTarget(t,i,o)}))},e.prototype.measureLayout=function(){var t=this;this.box=this.getBoundingBox(),this.boxCorrected=g(this.box),this.targetBox||(this.targetBox=g(this.box)),this.layoutMeasureListeners.notify(this.box,this.prevViewportBox||this.box),i.b.update((function(){return t.rebaseTargetBox()}))},e.prototype.lockTargetBox=function(){this.isTargetBoxLocked=!0},e.prototype.unlockTargetBox=function(){this.stopLayoutAnimation(),this.isTargetBoxLocked=!1},e.prototype.resetTransform=function(){var t=this.config.transformTemplate;this.element.style.transform=t?t({},\"\"):\"none\",this.scheduleRender()},e.prototype.setAxisTarget=function(t,e,n){var r=this.targetBox[t];r.min=e,r.max=n,this.hasViewportBoxUpdated=!0,this.rootParent.scheduleUpdateLayoutDelta()},e.prototype.getAxisProgress=function(){return this.axisProgress||(this.axisProgress={x:p(0),y:p(0)}),this.axisProgress},e.prototype.startLayoutAxisAnimation=function(t,e){var n,r=this,i=this.getAxisProgress()[t],o=this.targetBox[t],a=o.min,s=o.max-a;return i.clearListeners(),i.set(a),i.set(a),i.onChange((function(e){return r.setAxisTarget(t,e,e+s)})),null===(n=this.animateMotionValue)||void 0===n?void 0:n.call(this,t,i,0,e)},e.prototype.stopLayoutAnimation=function(){var t=this;ct((function(e){return t.getAxisProgress()[e].stop()}))},e.prototype.withoutTransform=function(t){this.isLayoutProjectionEnabled&&this.resetTransform(),this.parent?this.parent.withoutTransform(t):t(),this.isLayoutProjectionEnabled&&(this.element.style.transform=this.style.transform)},e.prototype.updateLayoutDeltas=function(){var t,e;t=this.boxCorrected,e=this.box,K(t.x,e.x),K(t.y,e.y);var n=this.treeScale.x,r=this.treeScale.y;!function(t,e,n){var r=n.length;if(r){e.x=e.y=1;for(var i=0;i<r;i++){var o=n[i].delta;e.x*=o.x.scale,e.y*=o.y.scale,J(t,o)}}}(this.boxCorrected,this.treeScale,this.treePath),ut(this.delta,this.boxCorrected,this.targetBox,this.layoutOrigin),this.hasViewportBoxUpdated&&this.viewportBoxUpdateListeners.notify(this.targetBox,this.delta),this.hasViewportBoxUpdated=!1;var i=F(this.delta,this.treeScale);i===this.deltaTransform&&n===this.treeScale.x&&r===this.treeScale.y||this.scheduleRender(),this.deltaTransform=i},e.prototype.updateTransformDeltas=function(){var t,e,n;this.isLayoutProjectionEnabled&&this.box&&(t=this.targetBoxFinal,e=this.targetBox,n=this.latest,Q(t.x,e.x,n,tt),Q(t.y,e.y,n,et),ut(this.deltaFinal,this.boxCorrected,this.targetBoxFinal,this.layoutOrigin))},e.prototype.build=function(){this.updateTransformDeltas(),void 0!==this.isVisible&&(this.style.visibility=this.isVisible?\"visible\":\"hidden\"),Z(this.latest,this.style,this.vars,this.transform,this.transformOrigin,this.transformKeys,this.config,this.isLayoutProjectionEnabled&&!!this.box,this.delta,this.deltaFinal,this.treeScale,this.targetBoxFinal)},e.prototype.render=function(){for(var t in this.build(),Object.assign(this.element.style,this.style),this.vars)this.element.style.setProperty(t,this.vars[t])},e}(v),Dt=function(t){return t.updateLayoutDelta()};function Ft(t){var e=Object(u.useRef)(null);return null===e.current&&(e.current=t()),e.current}function Ut(t,e,n){return\"string\"===typeof t?t:s.j.transform(e+n*t)}var It=function(t,e){return s.j.transform(t*e)},Ht={offset:\"stroke-dashoffset\",array:\"stroke-dasharray\"},Yt={offset:\"strokeDashoffset\",array:\"strokeDasharray\"};var Xt={x:0,y:0,width:0,height:0};function zt(t,e,n,i,o,a,s,u,c,l,f,d,p,v,h){var m=t.attrX,g=t.attrY,y=t.originX,b=t.originY,x=t.pathLength,j=t.pathSpacing,O=void 0===j?1:j,E=t.pathOffset,w=void 0===E?0:E;return Z(Object(r.d)(t,[\"attrX\",\"attrY\",\"originX\",\"originY\",\"pathLength\",\"pathSpacing\",\"pathOffset\"]),i,n,o,a,s,u,f,d,p,v,h),i.transform&&(e.transform=i.transform,delete i.transform),(void 0!==y||void 0!==b||e.transform)&&(e.transformOrigin=function(t,e,n){return Ut(e,t.x,t.width)+\" \"+Ut(n,t.y,t.height)}(c||Xt,void 0!==y?y:.5,void 0!==b?b:.5)),void 0!==m&&(i.x=m),void 0!==g&&(i.y=g),void 0!==l&&void 0!==x&&function(t,e,n,r,i,o){void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=!0);var a=o?Ht:Yt;t[a.offset]=It(-i,e);var s=It(n,e),u=It(r,e);t[a.array]=s+\" \"+u}(i,l,x,O,w,!1),i}var Wt=new Set([\"baseFrequency\",\"diffuseConstant\",\"kernelMatrix\",\"kernelUnitLength\",\"keySplines\",\"keyTimes\",\"limitingConeAngle\",\"markerHeight\",\"markerWidth\",\"numOctaves\",\"targetX\",\"targetY\",\"surfaceScale\",\"specularConstant\",\"specularExponent\",\"stdDeviation\",\"tableValues\",\"viewBox\"]),Nt=/([a-z])([A-Z])/g,Gt=function(t){return t.replace(Nt,\"$1-$2\").toLowerCase()},Zt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.attrs={},e.defaultConfig={enableHardwareAcceleration:!1},e.config=e.defaultConfig,e}return Object(r.b)(e,t),e.prototype.mount=function(e){t.prototype.mount.call(this,e),this.measure()},e.prototype.measure=function(){var t=this;try{this.dimensions=\"function\"===typeof this.element.getBBox?this.element.getBBox():this.element.getBoundingClientRect()}catch(e){this.dimensions={x:0,y:0,width:0,height:0}}\"path\"===this.element.tagName&&(this.totalPathLength=this.element.getTotalLength()),i.b.render((function(){return t.render()}))},e.prototype.getBaseValue=function(e,n){var r=n[e];return void 0===r||Rt(r)?t.prototype.getBaseValue.call(this,e,n):r},e.prototype.clean=function(){t.prototype.clean.call(this),this.attrs={}},e.prototype.read=function(t){return t=Wt.has(t)?t:Gt(t),this.element.getAttribute(t)},e.prototype.build=function(){this.updateTransformDeltas(),zt(this.latest,this.style,this.vars,this.attrs,this.transform,this.transformOrigin,this.transformKeys,this.config,this.dimensions,this.totalPathLength,this.isLayoutProjectionEnabled&&!!this.box,this.delta,this.deltaFinal,this.treeScale,this.targetBoxFinal)},e.prototype.render=function(){for(var e in t.prototype.render.call(this),this.attrs)this.element.setAttribute(Wt.has(e)?e:Gt(e),this.attrs[e])},e}(Mt);var Kt=new Set([\"animate\",\"circle\",\"clipPath\",\"defs\",\"desc\",\"ellipse\",\"feBlend\",\"feColorMatrix\",\"feComponentTransfer\",\"feComposite\",\"feConvolveMatrix\",\"feDiffuseLighting\",\"feDisplacementMap\",\"feDistantLight\",\"feDropShadow\",\"feFlood\",\"feFuncA\",\"feFuncB\",\"feFuncG\",\"feFuncR\",\"feGaussianBlur\",\"feImage\",\"feMerge\",\"feMergeNode\",\"feMorphology\",\"feOffset\",\"fePointLight\",\"feSpecularLighting\",\"feSpotLight\",\"feTile\",\"feTurbulence\",\"filter\",\"foreignObject\",\"g\",\"image\",\"line\",\"linearGradient\",\"marker\",\"mask\",\"metadata\",\"path\",\"pattern\",\"polygon\",\"polyline\",\"radialGradient\",\"rect\",\"stop\",\"svg\",\"switch\",\"symbol\",\"text\",\"textPath\",\"tspan\",\"use\",\"view\"]);function _t(t){return\"string\"===typeof t&&Kt.has(t)}var $t=Object(u.createContext)(null),qt=Object(u.createContext)({variantContext:{}});function Jt(){return Object(u.useContext)(qt).variantContext}function Qt(){return Object(u.useContext)(qt).visualElement}var te=Object(u.createContext)(null),ee=Object(u.createContext)({transformPagePoint:function(t){return t},features:[],isStatic:!1});function ne(t){return Object(u.useEffect)((function(){return function(){return t()}}),[])}function re(t,e,n,r){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}function ie(t,e,n,r){Object(u.useEffect)((function(){var i=t.current;if(n&&i)return re(i,e,n,r)}),[t,e,n,r])}function oe(t){return\"undefined\"!==typeof PointerEvent&&t instanceof PointerEvent?!(\"mouse\"!==t.pointerType):t instanceof MouseEvent}function ae(t){return!!t.touches}var se={pageX:0,pageY:0};function ue(t,e){void 0===e&&(e=\"page\");var n=t.touches[0]||t.changedTouches[0]||se;return{x:n[e+\"X\"],y:n[e+\"Y\"]}}function ce(t,e){return void 0===e&&(e=\"page\"),{x:t[e+\"X\"],y:t[e+\"Y\"]}}function le(t,e){return void 0===e&&(e=\"page\"),{point:ae(t)?ue(t,e):ce(t,e)}}function fe(t){return le(t,\"client\")}var de=function(t,e){void 0===e&&(e=!1);var n,r=function(e){return t(e,le(e))};return e?(n=r,function(t){var e=t instanceof MouseEvent;(!e||e&&0===t.button)&&n(t)}):r},pe=\"undefined\"!==typeof window,ve={pointerdown:\"mousedown\",pointermove:\"mousemove\",pointerup:\"mouseup\",pointercancel:\"mousecancel\",pointerover:\"mouseover\",pointerout:\"mouseout\",pointerenter:\"mouseenter\",pointerleave:\"mouseleave\"},he={pointerdown:\"touchstart\",pointermove:\"touchmove\",pointerup:\"touchend\",pointercancel:\"touchcancel\"};function me(t){return pe&&null===window.onpointerdown?t:pe&&null===window.ontouchstart?he[t]:pe&&null===window.onmousedown?ve[t]:t}function ge(t,e,n,r){return re(t,me(e),de(n,\"pointerdown\"===e),r)}function ye(t,e,n,r){return ie(t,me(e),n&&de(n,\"pointerdown\"===e),r)}var be=function(t){return 1e3*t},xe=function(){function t(t,e,n){var a=this,s=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(a.lastMoveEvent&&a.lastMoveEventInfo){var t=Ee(a.lastMoveEventInfo,a.history),e=null!==a.startEvent,n=Object(o.n)(t.offset,{x:0,y:0})>=3;if(e||n){var s=t.point,u=Object(i.c)().timestamp;a.history.push(Object(r.a)(Object(r.a)({},s),{timestamp:u}));var c=a.handlers,l=c.onStart,f=c.onMove;e||(l&&l(a.lastMoveEvent,t),a.startEvent=a.lastMoveEvent),f&&f(a.lastMoveEvent,t)}}},this.handlePointerMove=function(t,e){a.lastMoveEvent=t,a.lastMoveEventInfo=je(e,a.transformPagePoint),oe(t)&&0===t.buttons?a.handlePointerUp(t,e):i.b.update(a.updatePoint,!0)},this.handlePointerUp=function(t,e){a.end();var n=a.handlers.onEnd;if(n){var r=Ee(je(e,a.transformPagePoint),a.history);n&&n(t,r)}},!(ae(t)&&t.touches.length>1)){this.handlers=e,this.transformPagePoint=s;var u=je(le(t),this.transformPagePoint),c=u.point,l=Object(i.c)().timestamp;this.history=[Object(r.a)(Object(r.a)({},c),{timestamp:l})];var f=e.onSessionStart;f&&f(t,Ee(u,this.history)),this.removeListeners=Object(o.v)(ge(window,\"pointermove\",this.handlePointerMove),ge(window,\"pointerup\",this.handlePointerUp),ge(window,\"pointercancel\",this.handlePointerUp))}}return t.prototype.updateHandlers=function(t){this.handlers=t},t.prototype.end=function(){this.removeListeners&&this.removeListeners(),i.a.update(this.updatePoint)},t}();function je(t,e){return e?{point:e(t.point)}:t}function Oe(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ee(t,e){var n=t.point;return{point:n,delta:Oe(n,Ce(e)),offset:Oe(n,we(e)),velocity:Pe(e,.1)}}function we(t){return t[0]}function Ce(t){return t[t.length-1]}function Pe(t,e){if(t.length<2)return{x:0,y:0};for(var n=t.length-1,r=null,i=Ce(t);n>=0&&(r=t[n],!(i.timestamp-r.timestamp>be(e)));)n--;if(!r)return{x:0,y:0};var o=(i.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};var a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}var Ae=function(t,e){return!!e&&(t===e||Ae(t,e.parentElement))};function Se(t){var e=null;return function(){return null===e&&(e=t,function(){e=null})}}var Ve=Se(\"dragHorizontal\"),Te=Se(\"dragVertical\");function Be(t){var e=!1;if(\"y\"===t)e=Te();else if(\"x\"===t)e=Ve();else{var n=Ve(),r=Te();n&&r?e=function(){n(),r()}:(n&&n(),r&&r())}return e}var Le={linear:o.t,easeIn:o.o,easeInOut:o.p,easeOut:o.q,circIn:o.i,circInOut:o.j,circOut:o.k,backIn:o.c,backInOut:o.d,backOut:o.e,anticipate:o.b,bounceIn:o.f,bounceInOut:o.g,bounceOut:o.h},ke=function(t){if(Array.isArray(t)){Object(a.a)(4===t.length,\"Cubic bezier arrays must contain four numerical values.\");var e=Object(r.c)(t,4),n=e[0],i=e[1],s=e[2],u=e[3];return Object(o.m)(n,i,s,u)}return\"string\"===typeof t?(Object(a.a)(void 0!==Le[t],\"Invalid easing type '\"+t+\"'\"),Le[t]):t},Re=function(t,e){return\"zIndex\"!==t&&(!(\"number\"!==typeof e&&!Array.isArray(e))||!(\"string\"!==typeof e||!s.c.test(e)||e.startsWith(\"url(\")))},Me=function(){return{type:\"spring\",stiffness:500,damping:25,restDelta:.5,restSpeed:10}},De=function(t){return{type:\"spring\",stiffness:550,damping:0===t?100:30,restDelta:.01,restSpeed:10}},Fe=function(){return{type:\"keyframes\",ease:\"linear\",duration:.3}},Ue=function(t){return{type:\"keyframes\",duration:.8,values:t}},Ie={x:Me,y:Me,z:Me,rotate:Me,rotateX:Me,rotateY:Me,rotateZ:Me,scaleX:De,scaleY:De,scale:De,opacity:Fe,backgroundColor:Fe,color:Fe,default:De};var He=!1;function Ye(t){var e=t.ease,n=t.times,i=t.yoyo,o=t.flip,s=t.loop,u=Object(r.d)(t,[\"ease\",\"times\",\"yoyo\",\"flip\",\"loop\"]),c=Object(r.a)({},u);return n&&(c.offset=n),u.duration&&(c.duration=be(u.duration)),u.repeatDelay&&(c.repeatDelay=be(u.repeatDelay)),e&&(c.ease=function(t){return Array.isArray(t)&&\"number\"!==typeof t[0]}(e)?e.map(ke):ke(e)),\"tween\"===u.type&&(c.type=\"keyframes\"),(i||s||o)&&(Object(a.b)(!He,\"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\"),He=!0,i?c.repeatType=\"reverse\":s?c.repeatType=\"loop\":o&&(c.repeatType=\"mirror\"),c.repeat=s||i||o||u.repeat),\"spring\"!==u.type&&(c.type=\"keyframes\"),c}function Xe(t,e,n){var i;return Array.isArray(e.to)&&(null!==(i=t.duration)&&void 0!==i||(t.duration=.8)),function(t){Array.isArray(t.to)&&null===t.to[0]&&(t.to=Object(r.e)(t.to),t.to[0]=t.from)}(e),function(t){t.when,t.delay,t.delayChildren,t.staggerChildren,t.staggerDirection,t.repeat,t.repeatType,t.repeatDelay,t.from;var e=Object(r.d)(t,[\"when\",\"delay\",\"delayChildren\",\"staggerChildren\",\"staggerDirection\",\"repeat\",\"repeatType\",\"repeatDelay\",\"from\"]);return!!Object.keys(e).length}(t)||(t=Object(r.a)(Object(r.a)({},t),function(t,e){var n;return n=dt(e)?Ue:Ie[t]||Ie.default,Object(r.a)({to:e},n(e))}(n,e.to))),Object(r.a)(Object(r.a)({},e),Ye(t))}function ze(t,e,n,i){return void 0===i&&(i={}),e.start((function(u){var c,l,f=function(t,e,n,i,u){var c,l=function(t,e){return t[e]||t.default||t}(i,t),f=null!==(c=l.from)&&void 0!==c?c:e.get(),d=Re(t,n);\"none\"===f&&d&&\"string\"===typeof n&&(f=s.c.getAnimatableNone(n));var p=Re(t,f);return Object(a.b)(p===d,\"You are trying to animate \"+t+' from \"'+f+'\" to \"'+n+'\". '+f+\" is not an animatable value - to enable this animation set \"+f+\" to a value animatable to \"+n+\" via the `style` property.\"),p&&d&&!1!==l.type?function(){var i={from:f,to:n,velocity:e.getVelocity(),onComplete:u,onUpdate:function(t){return e.set(t)}};return\"inertia\"===l.type||\"decay\"===l.type?Object(o.r)(Object(r.a)(Object(r.a)({},i),l)):Object(o.a)(Object(r.a)(Object(r.a)({},Xe(l,i,t)),{onUpdate:function(t){var e;i.onUpdate(t),null===(e=l.onUpdate)||void 0===e||e.call(l,t)},onComplete:function(){var t;i.onComplete(),null===(t=l.onComplete)||void 0===t||t.call(l)}}))}:function(){var t;return e.set(n),u(),null===(t=null===l||void 0===l?void 0:l.onComplete)||void 0===t||t.call(l),{stop:function(){}}}}(t,e,n,i,u),d=function(t,e){var n,r,i,o,a;return null!==(a=null!==(o=null!==(r=null===(n=t[e])||void 0===n?void 0:n.delay)&&void 0!==r?r:null===(i=t.default)||void 0===i?void 0:i.delay)&&void 0!==o?o:t.delay)&&void 0!==a?a:0}(i,t),p=function(){return l=f()};return d?c=setTimeout(p,be(d)):p(),function(){clearTimeout(c),null===l||void 0===l||l.stop()}}))}function We(t,e,n){var r;if(t.onAnimationStart(),Array.isArray(e)){var i=e.map((function(e){return Ne(t,e,n)}));r=Promise.all(i)}else r=\"string\"===typeof e?Ne(t,e,n):Ge(t,e,n);return r.then((function(){return t.onAnimationComplete()}))}function Ne(t,e,n){var i;void 0===n&&(n={});var o=Pt(t,e,n.custom),a=(o||{}).transition,s=void 0===a?t.getDefaultTransition()||{}:a;n.transitionOverride&&(s=n.transitionOverride);var u=o?function(){return Ge(t,o,n)}:function(){return Promise.resolve()},c=(null===(i=t.variantChildrenOrder)||void 0===i?void 0:i.size)?function(i){void 0===i&&(i=0);var o=s.delayChildren,a=void 0===o?0:o,u=s.staggerChildren,c=s.staggerDirection;return function(t,e,n,i,o,a){void 0===n&&(n=0);void 0===i&&(i=0);void 0===o&&(o=1);var s=[],u=(t.variantChildrenOrder.size-1)*i,c=1===o?function(t){return void 0===t&&(t=0),t*i}:function(t){return void 0===t&&(t=0),u-t*i};return Array.from(t.variantChildrenOrder).forEach((function(t,i){var o=Ne(t,e,Object(r.a)(Object(r.a)({},a),{delay:n+c(i)}));s.push(o)})),Promise.all(s)}(t,e,a+i,u,c,n)}:function(){return Promise.resolve()},l=s.when;if(l){var f=Object(r.c)(\"beforeChildren\"===l?[u,c]:[c,u],2),d=f[0],p=f[1];return d().then(p)}return Promise.all([u(),c(n.delay)])}function Ge(t,e,n){var i,o=void 0===n?{}:n,a=o.delay,s=void 0===a?0:a,u=o.transitionOverride,c=o.type,l=t.makeTargetAnimatable(e),f=l.transition,d=void 0===f?t.getDefaultTransition():f,p=l.transitionEnd,v=Object(r.d)(l,[\"transition\",\"transitionEnd\"]);u&&(d=u);var h=[],m=c&&(null===(i=t.animationState)||void 0===i?void 0:i.getProtectedKeys(c));for(var g in v){var y=t.getValue(g),b=v[g];if(y&&void 0!==b&&void 0===(null===m||void 0===m?void 0:m[g])){var x=ze(g,y,b,Object(r.a)({delay:s},d));h.push(x)}}return Promise.all(h).then((function(){p&&St(t,p)}))}var Ze,Ke=function(){function t(){this.hasMounted=!1,this.pendingAnimations=[],this.subscribers=new Set}return t.prototype.subscribe=function(t){var e=this;return this.subscribers.add(t),function(){return e.subscribers.delete(t)}},t.prototype.start=function(t,e){var n=this;if(this.hasMounted){var r=[];return this.subscribers.forEach((function(n){r.push(We(n,t,{transitionOverride:e}))})),Promise.all(r)}return new Promise((function(r){n.pendingAnimations.push({animation:[t,e],resolve:r})}))},t.prototype.set=function(t){return Object(a.a)(this.hasMounted,\"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook.\"),this.subscribers.forEach((function(e){Tt(e,t)}))},t.prototype.stop=function(){this.subscribers.forEach((function(t){!function(t){t.forEachValue((function(t){return t.stop()}))}(t)}))},t.prototype.mount=function(){var t=this;this.hasMounted=!0,this.pendingAnimations.forEach((function(e){var n=e.animation,i=e.resolve;t.start.apply(t,Object(r.e)(n)).then(i)}))},t.prototype.unmount=function(){this.hasMounted=!1,this.stop()},t}();!function(t){t.Animate=\"animate\",t.Hover=\"whileHover\",t.Tap=\"whileTap\",t.Drag=\"whileDrag\",t.Focus=\"whileFocus\",t.Exit=\"exit\"}(Ze||(Ze={}));var _e=[Ze.Animate,Ze.Hover,Ze.Tap,Ze.Drag,Ze.Focus,Ze.Exit],$e=Object(r.e)(_e).reverse(),qe=_e.length;function Je(t){var e,n,i=function(t){return function(e){return Promise.all(e.map((function(e){var n=e.animation,r=e.options;return We(t,n,r)})))}}(t),o=function(){var t;return(t={})[Ze.Animate]=Qe(!0),t[Ze.Hover]=Qe(),t[Ze.Tap]=Qe(),t[Ze.Drag]=Qe(),t[Ze.Focus]=Qe(),t[Ze.Exit]=Qe(),t}(),a=!0,s=function(e,n){var i=Pt(t,n);if(i){i.transition;var o=i.transitionEnd,a=Object(r.d)(i,[\"transition\",\"transitionEnd\"]);e=Object(r.a)(Object(r.a)(Object(r.a)({},e),a),o)}return e};function u(u,c,l,f){void 0===c&&(c={}),e=u,n=c;var d=[],p=new Set,v={};u.variants&&t.updateConfig(Object(r.a)(Object(r.a)({},t.config),{variants:u.variants}));for(var h=1/0,m=function(e){var n,i=$e[e],m=o[i],g=null!==(w=u[i])&&void 0!==w?w:c[i],y=\"string\"===typeof(n=g)||Ct(n),b=i===f?m.isActive:null;!1===b&&(h=e);var x=g===c[i]&&y;if(x&&a&&t.manuallyAnimateOnMount&&(x=!1),a&&i===Ze.Animate&&t.prevSnapshot&&(a=!1,m.prevResolvedValues=t.prevSnapshot),m.protectedKeys=Object(r.a)({},v),!m.isActive&&null===b||!g&&!m.prevProp||g instanceof Ke||\"boolean\"===typeof g)return\"continue\";var j=function(t,e){if(\"string\"===typeof e)return e!==t;if(Ct(e))return!function(t,e){if(!Array.isArray(e))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}(e,t);return!1}(m.prevProp,g)||i===f&&m.isActive&&!x&&y||e>h&&y,O=Array.isArray(g)?g:[g],E=O.reduce(s,{});!1===b&&(E={});var w=m.prevResolvedValues,C=void 0===w?{}:w,P=Object(r.a)(Object(r.a)({},C),E);for(var A in P){var S=E[A],V=C[A];v.hasOwnProperty(A)||(S!==V?void 0!==S?(j=!0,p.delete(A)):p.add(A):void 0!==S&&p.has(A)?(j=!0,p.delete(A)):m.protectedKeys[A]=!0)}m.prevProp=g,m.prevResolvedValues=E,m.isActive&&(v=Object(r.a)(Object(r.a)({},v),E)),j&&!x&&d.push.apply(d,Object(r.e)(O.map((function(t){return{animation:t,options:Object(r.a)({type:i},l)}}))))},g=0;g<qe;g++)m(g);if(p.size){var y={};p.forEach((function(e){var n=t.getBaseValue(e,u);void 0!==n&&(y[e]=n)})),d.push({animation:y})}var b=Boolean(d.length);return a&&!1===u.initial&&!t.manuallyAnimateOnMount&&(b=!1),a=!1,b?i(d):Promise.resolve()}return{getProtectedKeys:function(t){return o[t].protectedKeys},setProps:u,setActive:function(r,i,a){var s;return o[r].isActive===i?Promise.resolve():(null===(s=t.variantChildrenOrder)||void 0===s||s.forEach((function(t){var e;return null===(e=t.animationState)||void 0===e?void 0:e.setActive(r,i)})),o[r].isActive=i,u(e,n,a,r))},setAnimateFunction:function(e){i=e(t)}}}function Qe(t){return void 0===t&&(t=!1),{isActive:t,protectedKeys:{},prevResolvedValues:{}}}var tn=function(t){return function(e,n){oe(e)&&t(e,n)}};function en(t,e){!function(t,e){var n=t.onPan,r=t.onPanStart,i=t.onPanEnd,o=t.onPanSessionStart,a=n||r||i||o,s=Object(u.useRef)(null),c=Object(u.useContext)(ee).transformPagePoint,l={onSessionStart:o,onStart:r,onMove:n,onEnd:function(t,e){s.current=null,i&&i(t,e)}};Object(u.useEffect)((function(){null!==s.current&&s.current.updateHandlers(l)})),ye(e,\"pointerdown\",a&&function(t){s.current=new xe(t,l,{transformPagePoint:c})}),ne((function(){return s.current&&s.current.end()}))}(t,e),function(t,e){var n=t.onTap,r=t.onTapStart,i=t.onTapCancel,a=t.whileTap,s=n||r||i||a,c=Object(u.useRef)(!1),l=Object(u.useRef)(null);function f(){var t;null===(t=l.current)||void 0===t||t.call(l),l.current=null}var d=Object(u.useRef)(null);d.current=function(t,r){var o,a=e.getInstance();if(f(),c.current&&a){c.current=!1,null===(o=e.animationState)||void 0===o||o.setActive(Ze.Tap,!1);var s=Be(!0);s&&(s(),Ae(a,t.target)?null===n||void 0===n||n(t,r):null===i||void 0===i||i(t,r))}},ye(e,\"pointerdown\",s?function(t,n){var i;f(),l.current=Object(o.v)(ge(window,\"pointerup\",(function(t,e){var n;return null===(n=d.current)||void 0===n?void 0:n.call(d,t,e)})),ge(window,\"pointercancel\",(function(t,e){var n;return null===(n=d.current)||void 0===n?void 0:n.call(d,t,e)}))),e.getInstance()&&!c.current&&(c.current=!0,null===r||void 0===r||r(t,n),null===(i=e.animationState)||void 0===i||i.setActive(Ze.Tap,!0))}:void 0),ne(f)}(t,e),function(t,e){var n=t.onHoverStart,r=t.onHoverEnd,i=t.whileHover,o=tn((function(t,r){var i;null===n||void 0===n||n(t,r),null===(i=e.animationState)||void 0===i||i.setActive(Ze.Hover,!0)})),a=tn((function(t,n){var i;null===r||void 0===r||r(t,n),null===(i=e.animationState)||void 0===i||i.setActive(Ze.Hover,!1)}));ye(e,\"pointerenter\",n||i?o:void 0),ye(e,\"pointerleave\",r||i?a:void 0)}(t,e),function(t,e){var n=t.whileFocus;ie(e,\"focus\",n?function(){var t;null===(t=e.animationState)||void 0===t||t.setActive(Ze.Focus,!0)}:void 0),ie(e,\"blur\",n?function(){var t;null===(t=e.animationState)||void 0===t||t.setActive(Ze.Focus,!1)}:void 0)}(t,e)}var nn=function(t){return function(e){return t(e),null}},rn=[\"onPan\",\"onPanStart\",\"onPanEnd\",\"onPanSessionStart\",\"onTap\",\"onTapStart\",\"onTapCancel\",\"onHoverStart\",\"onHoverEnd\",\"whileFocus\",\"whileTap\",\"whileHover\"],on=nn((function(t){var e=t.visualElement;en(Object(r.d)(t,[\"visualElement\"]),e)})),an={key:\"gestures\",shouldRender:function(t){return rn.some((function(e){return t.hasOwnProperty(e)}))},getComponent:function(){return on}},sn=new Set(Object(r.e)([\"initial\",\"animate\",\"exit\",\"style\",\"variants\",\"transition\",\"transformTemplate\",\"transformValues\",\"custom\",\"inherit\",\"layout\",\"layoutId\",\"onLayoutAnimationComplete\",\"onViewportBoxUpdate\",\"onAnimationStart\",\"onAnimationComplete\",\"onUpdate\",\"onDragStart\",\"onDrag\",\"onDragEnd\",\"onMeasureDragConstraints\",\"onDirectionLock\",\"onDragTransitionEnd\",\"drag\",\"dragControls\",\"dragListener\",\"dragConstraints\",\"dragDirectionLock\",\"_dragX\",\"_dragY\",\"dragElastic\",\"dragMomentum\",\"dragPropagation\",\"dragTransition\",\"whileDrag\"],rn));function un(t){return sn.has(t)}var cn=function(t){return!un(t)};try{var ln=n(\"DY47\").default;cn=function(t){return t.startsWith(\"on\")?!un(t):ln(t)}}catch(xr){}function fn(t,e){var n=e.layout,r=e.layoutId;return k(t)||M(t)||(n||void 0!==r)&&!!G[t]}function dn(t,e,n,r,i){for(var o in void 0===r&&(r=!1),r&&(t.reactStyle={}),n){var a=n[o],s=!1;if(Rt(a))hn.has(o)||(t.addValue(o,a),s=!0);else if(fn(o,i)){if(t.hasValue(o)){if(a!==e[o]){if(Rt(e[o]))t.addValue(o,p(a));else t.getValue(o).set(a)}}else t.addValue(o,p(a));s=!0}else r&&(t.reactStyle[o]=a);s&&(e[o]=a)}}var pn,vn,hn=new Set([]),mn=function(){return{}};!function(t){t[t.Entering=0]=\"Entering\",t[t.Present=1]=\"Present\",t[t.Exiting=2]=\"Exiting\"}(pn||(pn={})),function(t){t[t.Hide=0]=\"Hide\",t[t.Show=1]=\"Show\"}(vn||(vn={}));var gn={measureLayout:function(t){return t.measureLayout()},layoutReady:function(t){return t.layoutReady()}},yn=function(t,e){return t.depth-e.depth};function bn(){var t=new Set;return{add:function(e){return t.add(e)},flush:function(e){var n=void 0===e?gn:e,r=n.measureLayout,i=n.layoutReady,o=n.parent,a=Array.from(t).sort(yn),s=function(){a.forEach((function(t){return t.resetTransform()})),a.forEach(r)};o?o.withoutTransform(s):s(),a.forEach(i),a.forEach((function(t){t.isPresent&&(t.presence=pn.Present)})),t.clear()}}}function xn(t){return!!t.forceUpdate}var jn=Object(u.createContext)(bn()),On=Object(u.createContext)(bn()),En=\"undefined\"!==typeof window?u.useLayoutEffect:u.useEffect;function wn(){var t=Object(u.useContext)($t);if(null===t)return[!0,null];var e=t.isPresent,n=t.onExitComplete,r=t.register,i=Sn();Object(u.useEffect)((function(){return r(i)}),[]);return!e&&n?[!1,function(){return null===n||void 0===n?void 0:n(i)}]:[!0]}function Cn(t){return null===t||t.isPresent}var Pn=0,An=function(){return Pn++},Sn=function(){return Ft(An)};function Vn(t,e){void 0===e&&(e=!1);var n=Object(u.useRef)(!0);(!e||e&&n.current)&&t(),n.current=!1}function Tn(t){var e=t.animate,n=t.variants,r=t.inherit;return null!==r&&void 0!==r?r:!!n&&!e}function Bn(t,e,n){var r,i,o,a=Jt(),s=Object(u.useContext)($t),c=Tn(e),l=[],f={},d=!1;(function(t){var e;return\"function\"===typeof(null===(e=t.animate)||void 0===e?void 0:e.start)||Rn(t.animate)||Rn(t.whileHover)||Rn(t.whileDrag)||Rn(t.whileTap)||Rn(t.whileFocus)||Rn(t.exit)})(e)&&(d=!0,a={});for(var p=d||e.variants,v=0;v<kn;v++){var h=Ln[v],m=e[h],g=a[h];Rn(m)||!1===m?(f[h]=m,l.push(m)):((Rn(g)||!1===g)&&(f[h]=g),l.push(null)),l.push(Rn(g)?g:null)}var y=null!==(r=e.animate)&&void 0!==r?r:f.animate,b=e.initial;void 0!==b||!Rn(y)&&!1===f.initial||(b=f.initial),!1===(null===s||void 0===s?void 0:s.initial)&&(b=f.initial=!1),f.parent=p?t:a.parent,Vn((function(){var e,n=!1===b?y:b;n&&\"boolean\"!==typeof n&&(\"object\"!==typeof(e=n)||\"function\"!==typeof e.start)&&Tt(t,n)}),!n),Vn((function(){t.forEachValue((function(e,n){t.baseTarget[n]=e.get()}))}),!0);var x,j=Object(u.useMemo)((function(){return f}),l);return p&&c&&!d&&(x=null===(i=a.parent)||void 0===i?void 0:i.addVariantChild(t),t.inheritsVariants=!0),!d&&c&&(null===(o=t.parent)||void 0===o?void 0:o.isMounted)&&!1!==b&&y&&(t.manuallyAnimateOnMount=!0),Object(u.useEffect)((function(){return t.isMounted=!0,function(){t.isMounted=!1,null===x||void 0===x||x()}}),[]),En((function(){var e;Cn(s)&&(null===(e=t.variantChildrenOrder)||void 0===e||e.clear())})),Object(u.useEffect)((function(){var e;p&&(null===(e=a.parent)||void 0===e||e.addVariantChildOrder(t))})),j}var Ln=Object(r.e)([\"initial\"],_e),kn=Ln.length;function Rn(t){return\"string\"===typeof t||Array.isArray(t)}function Mn(t,e){var n=e.defaultFeatures,i=e.useVisualElement,o=e.useRender;return Object(u.forwardRef)((function(e,a){var s=Object(u.useContext)(ee).isStatic,c=i(t,e,s,a);!function(t,e){var n=Ft(mn);for(var r in n){var i=fn(r,e),o=void 0!==e[r],a=e.style&&void 0!==e.style[r],s=o&&Rt(e[r]),u=a&&Rt(e.style[r]);(i&&!o&&!a||!i&&!s&&!u)&&(t.removeValue(r),delete n[r])}dn(t,n,e,!1,e),e.style&&dn(t,n,e.style,!0,e),e.transformValues&&(t.reactStyle=e.transformValues(t.reactStyle))}(c,e);var l=Bn(c,e,s),f=function(t,e,n,i){var o=Object(u.useContext)(ee);if(e||\"undefined\"===typeof window)return null;for(var a=Object(r.e)(t,o.features),s=a.length,c=[],l=0;l<s;l++){var f=a[l],d=f.shouldRender,p=f.key,v=f.getComponent;if(d(i)){var h=v(i);h&&c.push(Object(u.createElement)(h,Object(r.a)({key:p},i,{visualElement:n})))}}return c}(n,s,c,e),d=Object(u.useMemo)((function(){return{visualElement:c,variantContext:l}}),[c,l]),p=o(t,e,c);return function(t){var e=Object(u.useContext)(jn),n=Object(u.useContext)(On);En((function(){return function(){xn(e)&&e.remove(t),xn(n)&&n.remove(t)}}),[])}(c),Object(u.createElement)(u.Fragment,null,Object(u.createElement)(qt.Provider,{value:d},p),f)}))}function Dn(t,e,n){var r=e.min,i=e.max;return void 0!==r&&t<r?t=n?Object(o.u)(r,t,n):Math.max(t,r):void 0!==i&&t>i&&(t=n?Object(o.u)(i,t,n):Math.min(t,i)),t}function Fn(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function Un(t,e){var n,i=e.min-t.min,o=e.max-t.max;return e.max-e.min<t.max-t.min&&(i=(n=Object(r.c)([o,i],2))[0],o=n[1]),{min:t.min+i,max:t.min+o}}var In,Hn=new WeakMap,Yn=function(){function t(t){var e=t.visualElement;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.props={},this.hasMutatedConstraints=!1,this.cursorProgress={x:.5,y:.5},this.originPoint={},this.openGlobalLock=null,this.panSession=null,this.visualElement=e,this.visualElement.enableLayoutProjection(),Hn.set(e,this)}return t.prototype.start=function(t,e){var n=this,r=void 0===e?{}:e,i=r.snapToCursor,a=void 0!==i&&i,s=r.cursorProgress;a&&this.snapToCursor(t);var u=this.props.transformPagePoint;this.panSession=new xe(t,{onSessionStart:function(){n.stopMotion()},onStart:function(t,e){var r,i,a,u=n.props,c=u.drag,l=u.dragPropagation;if(!c||l||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=Be(c),n.openGlobalLock)){n.prepareBoundingBox(),n.visualElement.lockTargetBox(),n.resolveDragConstraints();var f=fe(t).point;ct((function(t){var e=n.visualElement.targetBox[t],r=e.min,i=e.max;n.cursorProgress[t]=s?s[t]:Object(o.w)(r,i,f[t]);var a=n.getAxisMotionValue(t);a&&(n.originPoint[t]=a.get())})),n.isDragging=!0,n.currentDirection=null,null===(i=(r=n.props).onDragStart)||void 0===i||i.call(r,t,e),null===(a=n.visualElement.animationState)||void 0===a||a.setActive(Ze.Drag,!0)}},onMove:function(t,e){var r,i,o,a,s=n.props,u=s.dragPropagation,c=s.dragDirectionLock;if(u||n.openGlobalLock){var l=e.offset;if(c&&null===n.currentDirection)return n.currentDirection=function(t,e){void 0===e&&(e=10);var n=null;Math.abs(t.y)>e?n=\"y\":Math.abs(t.x)>e&&(n=\"x\");return n}(l),void(null!==n.currentDirection&&(null===(i=(r=n.props).onDirectionLock)||void 0===i||i.call(r,n.currentDirection)));n.updateAxis(\"x\",t,l),n.updateAxis(\"y\",t,l),null===(a=(o=n.props).onDrag)||void 0===a||a.call(o,t,e),In=t}},onEnd:function(t,e){return n.stop(t,e)}},{transformPagePoint:u})},t.prototype.prepareBoundingBox=function(){var t=this.visualElement;t.withoutTransform((function(){t.measureLayout()})),t.rebaseTargetBox(!0,t.getBoundingBoxWithoutTransforms())},t.prototype.resolveDragConstraints=function(){var t=this,e=this.props.dragConstraints;this.constraints=!!e&&(l(e)?this.resolveRefConstraints(this.visualElement.box,e):function(t,e){var n=e.top,r=e.left,i=e.bottom,o=e.right;return{x:Fn(t.x,r,o),y:Fn(t.y,n,i)}}(this.visualElement.box,e)),this.constraints&&!this.hasMutatedConstraints&&ct((function(e){t.getAxisMotionValue(e)&&(t.constraints[e]=function(t,e){var n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(t.visualElement.box[e],t.constraints[e]))}))},t.prototype.resolveRefConstraints=function(t,e){var n=this.props,r=n.onMeasureDragConstraints,i=n.transformPagePoint,o=e.current;Object(a.a)(null!==o,\"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\"),this.constraintsBox=lt(o,i);var s=function(t,e){return{x:Un(t.x,e.x),y:Un(t.y,e.y)}}(t,this.constraintsBox);if(r){var u=r(function(t){var e=t.x,n=t.y;return{top:n.min,bottom:n.max,left:e.min,right:e.max}}(s));this.hasMutatedConstraints=!!u,u&&(s=m(u))}return s},t.prototype.cancelDrag=function(){var t;this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(t=this.visualElement.animationState)||void 0===t||t.setActive(Ze.Drag,!1)},t.prototype.stop=function(t,e){var n;this.visualElement.unlockTargetBox(),null===(n=this.panSession)||void 0===n||n.end(),this.panSession=null;var r=this.isDragging;if(this.cancelDrag(),r){var i=this.props,o=i.dragMomentum,a=i.dragElastic,s=i.onDragEnd;if(o||a){var u=e.velocity;this.animateDragEnd(u)}null===s||void 0===s||s(t,e)}},t.prototype.snapToCursor=function(t){var e=this;this.prepareBoundingBox(),ct((function(n){var r=e.getAxisMotionValue(n);if(r){var i=fe(t).point,o=e.visualElement.box,a=o[n].max-o[n].min,s=o[n].min+a/2,u=i[n]-s;e.originPoint[n]=i[n],r.set(u)}else e.cursorProgress[n]=.5,e.updateVisualElementAxis(n,t)}))},t.prototype.updateAxis=function(t,e,n){if(Xn(t,this.props.drag,this.currentDirection))return this.getAxisMotionValue(t)?this.updateAxisMotionValue(t,n):this.updateVisualElementAxis(t,e)},t.prototype.updateAxisMotionValue=function(t,e){var n=this.getAxisMotionValue(t);if(e&&n){var r=this.props.dragElastic,i=this.originPoint[t]+e[t],o=this.constraints?Dn(i,this.constraints[t],r):i;n.set(o)}},t.prototype.updateVisualElementAxis=function(t,e){var n,r=this.props.dragElastic,i=this.visualElement.box[t],o=i.max-i.min,a=this.cursorProgress[t],s=function(t,e,n,r,i){var o=t-e*n;return r?Dn(o,r,i):o}(fe(e).point[t],o,a,null===(n=this.constraints)||void 0===n?void 0:n[t],r);this.visualElement.setAxisTarget(t,s,s+o)},t.prototype.updateProps=function(t){var e=t.drag,n=void 0!==e&&e,i=t.dragDirectionLock,o=void 0!==i&&i,a=t.dragPropagation,s=void 0!==a&&a,u=t.dragConstraints,c=void 0!==u&&u,l=t.dragElastic,f=void 0===l?.35:l,d=t.dragMomentum,p=void 0===d||d,v=Object(r.d)(t,[\"drag\",\"dragDirectionLock\",\"dragPropagation\",\"dragConstraints\",\"dragElastic\",\"dragMomentum\"]);this.props=Object(r.a)({drag:n,dragDirectionLock:o,dragPropagation:s,dragConstraints:c,dragElastic:f,dragMomentum:p},v)},t.prototype.getAxisMotionValue=function(t){var e=this.props,n=e.layout,r=e.layoutId,i=\"_drag\"+t.toUpperCase();return this.props[i]?this.props[i]:n||void 0!==r?void 0:this.visualElement.getValue(t,0)},t.prototype.animateDragEnd=function(t){var e=this,n=this.props,i=n.drag,o=n.dragMomentum,a=n.dragElastic,s=n.dragTransition,u=ct((function(n){if(Xn(n,i,e.currentDirection)){var u=e.constraints?e.constraints[n]:{},c=a?200:1e6,l=a?40:1e7,f=Object(r.a)(Object(r.a)({type:\"inertia\",velocity:o?t[n]:0,bounceStiffness:c,bounceDamping:l,timeConstant:750,restDelta:1,restSpeed:10},s),u);return e.getAxisMotionValue(n)?e.startAxisValueAnimation(n,f):e.visualElement.startLayoutAxisAnimation(n,f)}}));return Promise.all(u).then((function(){var t,n;null===(n=(t=e.props).onDragTransitionEnd)||void 0===n||n.call(t)}))},t.prototype.stopMotion=function(){var t=this;ct((function(e){var n=t.getAxisMotionValue(e);n?n.stop():t.visualElement.stopLayoutAnimation()}))},t.prototype.startAxisValueAnimation=function(t,e){var n=this.getAxisMotionValue(t);if(n){var r=n.get();return n.set(r),n.set(r),ze(t,n,0,e)}},t.prototype.scalePoint=function(){var t=this,e=this.props,n=e.drag,r=e.dragConstraints;if(l(r)&&this.constraintsBox){this.stopMotion();var i={x:0,y:0};ct((function(e){i[e]=at(t.visualElement.targetBox[e],t.constraintsBox[e])})),this.prepareBoundingBox(),this.resolveDragConstraints(),ct((function(e){if(Xn(e,n,null)){var r=function(t,e,n){var r=t.max-t.min,i=Object(o.u)(e.min,e.max-r,n);return{min:i,max:i+r}}(t.visualElement.targetBox[e],t.constraintsBox[e],i[e]),a=r.min,s=r.max;t.visualElement.setAxisTarget(e,a,s)}}))}},t.prototype.mount=function(t){var e=this,n=ge(t.getInstance(),\"pointerdown\",(function(t){var n=e.props,r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&e.start(t)})),r=re(window,\"resize\",(function(){e.scalePoint()})),i=t.onLayoutUpdate((function(){e.isDragging&&e.resolveDragConstraints()})),o=t.prevSnapshot;return(null===o||void 0===o?void 0:o.isDragging)&&this.start(In,{cursorProgress:o.cursorProgress}),function(){null===n||void 0===n||n(),null===r||void 0===r||r(),null===i||void 0===i||i(),e.cancelDrag()}},t}();function Xn(t,e,n){return(!0===e||e===t)&&(null===n||n===t)}var zn=nn((function(t){var e=t.visualElement;return function(t,e){var n=t.dragControls,i=Object(u.useContext)(ee).transformPagePoint,o=Ft((function(){return new Yn({visualElement:e})}));o.updateProps(Object(r.a)(Object(r.a)({},t),{transformPagePoint:i})),Object(u.useEffect)((function(){return n&&n.subscribe(o)}),[o]),Object(u.useEffect)((function(){return o.mount(e)}),[])}(Object(r.d)(t,[\"visualElement\"]),e)})),Wn={key:\"drag\",shouldRender:function(t){return!!t.drag||!!t.dragControls},getComponent:function(){return zn}},Nn=nn((function(t){var e=t.custom,n=t.visualElement,i=Object(r.c)(wn(),2),o=i[0],a=i[1],s=Object(u.useContext)($t);Object(u.useEffect)((function(){var t,r,i=null===(t=n.animationState)||void 0===t?void 0:t.setActive(Ze.Exit,!o,{custom:null!==(r=null===s||void 0===s?void 0:s.custom)&&void 0!==r?r:e});!o&&(null===i||void 0===i||i.then(a))}),[o])})),Gn={key:\"exit\",shouldRender:function(t){return!!t.exit&&!Tn(t)},getComponent:function(){return Nn}};var Zn=nn((function(t){var e=t.visualElement,n=t.animate;e.animationState||(e.animationState=Je(e));var r=Jt();Object(u.useEffect)((function(){e.animationState.setProps(t,e.inheritsVariants?r:void 0)})),n instanceof Ke&&function(t,e){var n=Object(u.useMemo)((function(){return e.subscribe(t)}),[e]);ne((function(){return null===n||void 0===n?void 0:n()}))}(e,n)})),Kn={key:\"animation\",shouldRender:function(){return!0},getComponent:function(t){var e=t.animate,n=t.whileHover,r=t.whileFocus,i=t.whileTap,o=t.whileDrag,a=t.exit,s=t.variants;return e||n||r||i||o||a||s?Zn:void 0}};var _n=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameTarget={x:{min:0,max:0},y:{min:0,max:0}},e.stopAxisAnimation={x:void 0,y:void 0},e.animate=function(t,n,i){void 0===i&&(i={});var o=i.originBox,a=i.targetBox,s=i.visibilityAction,u=i.shouldStackAnimate,c=Object(r.d)(i,[\"originBox\",\"targetBox\",\"visibilityAction\",\"shouldStackAnimate\"]),l=e.props,f=l.visualElement,d=l.layout;if(!1===u)return e.safeToRemove();var p=qn(n=o||n,t=a||t),v=ct((function(r){if(\"position\"===d){var i=t[r].max-t[r].min;n[r].max=n[r].min+i}if(!f.isTargetBoxLocked)return void 0===s?p?e.animateAxis(r,t[r],n[r],c):f.setAxisTarget(r,t[r].min,t[r].max):void(s===vn.Hide?f.hide():f.show())}));return f.render(),Promise.all(v).then((function(){var t,n;null===(n=(t=e.props).onLayoutAnimationComplete)||void 0===n||n.call(t),f.isPresent?f.presence=pn.Present:e.safeToRemove()}))},e}return Object(r.b)(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props.visualElement;e.animateMotionValue=ze,e.enableLayoutProjection(),this.unsubLayoutReady=e.onLayoutUpdate(this.animate),e.updateConfig(Object(r.a)(Object(r.a)({},e.config),{safeToRemove:function(){return t.safeToRemove()}}))},e.prototype.componentWillUnmount=function(){var t=this;this.unsubLayoutReady(),ct((function(e){var n,r;return null===(r=(n=t.stopAxisAnimation)[e])||void 0===r?void 0:r.call(n)}))},e.prototype.animateAxis=function(t,e,n,r){var i,a,s=void 0===r?{}:r,u=s.transition,c=s.crossfadeOpacity;null===(a=(i=this.stopAxisAnimation)[t])||void 0===a||a.call(i);var l,f=this.props.visualElement,d=this.frameTarget[t],p=f.getAxisProgress()[t];p.clearListeners(),p.set(0),p.set(0),c&&(l=this.createCrossfadeAnimation(c),f.show());var v=function(){var r=p.get()/1e3;!function(t,e,n,r){t.min=Object(o.u)(e.min,n.min,r),t.max=Object(o.u)(e.max,n.max,r)}(d,n,e,r),f.setAxisTarget(t,d.min,d.max),null===l||void 0===l||l(r)};v(),f.updateLayoutDelta();var h=p.onChange(v),m=ze(\"x\"===t?\"layoutX\":\"layoutY\",p,1e3,u||this.props.transition||Qn).then(h);return this.stopAxisAnimation[t]=function(){p.stop(),h()},m},e.prototype.createCrossfadeAnimation=function(t){var e=this.props.visualElement.getValue(\"opacity\",0);return function(n){e.set(er(Object(o.u)(0,1,n))),t.set(nr(Object(o.u)(1,0,n)))}},e.prototype.safeToRemove=function(){var t,e;null===(e=(t=this.props).safeToRemove)||void 0===e||e.call(t)},e.prototype.render=function(){return null},e}(u.Component);function $n(t){var e=Object(r.c)(wn(),2)[1];return Object(u.createElement)(_n,Object(r.a)({},t,{safeToRemove:e}))}function qn(t,e){return Jn(t.x,e.x)||Jn(t.y,e.y)}function Jn(t,e){return t.min!==e.min||t.max!==e.max}var Qn={duration:.45,ease:[.4,0,.1,1]};function tr(t,e,n){return function(r){return r<t?0:r>e?1:n(Object(o.w)(t,e,r))}}var er=tr(0,.5,o.k),nr=tr(.5,.95,o.t),rr={key:\"animate-layout\",shouldRender:function(t){return!!t.layout||!!t.layoutId},getComponent:function(){return $n}},ir=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(r.b)(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.syncLayout,n=t.framerSyncLayout,r=t.visualElement;xn(e)&&e.register(r),xn(n)&&n.register(r)},e.prototype.getSnapshotBeforeUpdate=function(){var t=this.props,e=t.syncLayout,n=t.visualElement;return xn(e)?e.syncUpdate():(n.snapshotBoundingBox(),e.add(n)),null},e.prototype.componentDidUpdate=function(){var t=this.props,e=t.syncLayout,n=t.visualElement;xn(e)||e.flush(),n.rebaseTargetBox()},e.prototype.render=function(){return null},e}(c.a.Component);function or(t){var e=Object(u.useContext)(jn),n=Object(u.useContext)(On);return c.a.createElement(ir,Object(r.a)({},t,{syncLayout:e,framerSyncLayout:n}))}var ar={key:\"measure-layout\",shouldRender:function(t){return!!t.drag||!!t.layout||!!t.layoutId},getComponent:function(){return or}},sr=[ar,Kn,Wn,an,Gn,rr],ur={useVisualElement:function(t,e,n,i){var o=Qt(),a=Ft((function(){return new(_t(t)?Zt:Mt)(o,i)}));n&&(a.values.clear(),a.latest={}),a.updateConfig(Object(r.a)(Object(r.a)(Object(r.a)({},a.config),{enableHardwareAcceleration:!n}),e));var s=Object(u.useContext)(te);a.layoutId=s&&e.layoutId?s+\"-\"+e.layoutId:e.layoutId;var c=Object(u.useContext)($t),l=null===c||c.isPresent;a.isPresent=void 0!==e.isPresent?e.isPresent:l;var f=null===c||void 0===c?void 0:c.id;return a.isPresenceRoot=!o||o.presenceId!==f,Object(u.useEffect)((function(){if(e.onViewportBoxUpdate)return a.onViewportBoxUpdate(e.onViewportBoxUpdate)}),[e.onViewportBoxUpdate]),a},useRender:function(t,e,n){var i=\"string\"===typeof t?function(t){var e={};for(var n in t)cn(n)&&(e[n]=t[n]);return e}(e):e;n.clean(),n.build();var o=_t(t)?function(t){return Object(r.a)(Object(r.a)({},t.attrs),{style:Object(r.a)({},t.reactStyle)})}(n):function(t,e){var n=e.drag,i={},o=Object(r.a)(Object(r.a)(Object(r.a)({},t.reactStyle),t.style),t.vars);return n&&(i.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout=\"none\",o.touchAction=!0===n?\"none\":\"pan-\"+(\"x\"===n?\"y\":\"x\")),i.style=o,i}(n,e);return Object(u.createElement)(t,Object(r.a)(Object(r.a)(Object(r.a)({},i),{ref:n.ref}),o))}};function cr(t){var e=Object(r.a)(Object(r.a)({},ur),{defaultFeatures:t});var n=new Map;return new Proxy({custom:function(t){return Mn(t,e)}},{get:function(t,r){return\"custom\"===r?t.custom:(n.has(r)||n.set(r,Mn(r,e)),n.get(r))}})}var lr=cr(sr);var fr=0;function dr(){var t=fr;return fr++,t}var pr=function(t){var e=t.children,n=t.initial,r=t.isPresent,i=t.onExitComplete,o=t.custom,a=t.presenceAffectsLayout,s=Ft(vr),c=Ft(dr),l=Object(u.useMemo)((function(){return{id:c,initial:n,isPresent:r,custom:o,onExitComplete:function(t){s.set(t,!0);var e=!0;s.forEach((function(t){t||(e=!1)})),e&&(null===i||void 0===i||i())},register:function(t){return s.set(t,!1),function(){return s.delete(t)}}}}),a?void 0:[r]);return Object(u.useMemo)((function(){s.forEach((function(t,e){return s.set(e,!1)}))}),[r]),Object(u.createElement)($t.Provider,{value:l},e)};function vr(){return new Map}function hr(t){return t.key||\"\"}var mr=function(t){var e=t.children,n=t.custom,i=t.initial,o=void 0===i||i,a=t.onExitComplete,s=t.exitBeforeEnter,c=t.presenceAffectsLayout,l=void 0===c||c,f=function(){var t=Object(u.useRef)(!1),e=Object(r.c)(Object(u.useState)(0),2),n=e[0],i=e[1];return ne((function(){return t.current=!0})),Object(u.useCallback)((function(){!t.current&&i(n+1)}),[n])}(),d=Object(u.useContext)(jn);xn(d)&&(f=d.forceUpdate);var p=Object(u.useRef)(!0),v=function(t){var e=[];return u.Children.forEach(t,(function(t){Object(u.isValidElement)(t)&&e.push(t)})),e}(e),h=Object(u.useRef)(v),m=Object(u.useRef)(new Map).current,g=Object(u.useRef)(new Set).current;if(function(t,e){t.forEach((function(t){var n=hr(t);e.set(n,t)}))}(v,m),p.current)return p.current=!1,Object(u.createElement)(u.Fragment,null,v.map((function(t){return Object(u.createElement)(pr,{key:hr(t),isPresent:!0,initial:!!o&&void 0,presenceAffectsLayout:l},t)})));for(var y=Object(r.e)(v),b=h.current.map(hr),x=v.map(hr),j=b.length,O=0;O<j;O++){var E=b[O];-1===x.indexOf(E)?g.add(E):g.delete(E)}return s&&g.size&&(y=[]),g.forEach((function(t){if(-1===x.indexOf(t)){var e=m.get(t);if(e){var r=b.indexOf(t);y.splice(r,0,Object(u.createElement)(pr,{key:hr(e),isPresent:!1,onExitComplete:function(){m.delete(t),g.delete(t);var e=h.current.findIndex((function(e){return e.key===t}));h.current.splice(e,1),g.size||(h.current=v,f(),a&&a())},custom:n,presenceAffectsLayout:l},e))}}})),y=y.map((function(t){var e=t.key;return g.has(e)?t:Object(u.createElement)(pr,{key:hr(t),isPresent:!0,presenceAffectsLayout:l},t)})),h.current=y,Object(u.createElement)(u.Fragment,null,g.size?y:y.map((function(t){return Object(u.cloneElement)(t)})))};function gr(t,e){return e&&t!==e.lead?{visibilityAction:vn.Hide}:e&&t.presence!==pn.Entering&&t===e.lead&&e.lead!==e.prevLead?{visibilityAction:vn.Show}:(t.presence===pn.Entering?n=null===e||void 0===e?void 0:e.getFollowOrigin():t.presence===pn.Exiting&&(r=null===e||void 0===e?void 0:e.getFollowTarget()),{originBox:n,targetBox:r});var n,r}function yr(t,e){var n,r,i,o={},a=e&&e.lead,s=null===a||void 0===a?void 0:a.presence;return e&&t===a?t.presence===pn.Entering?o.originBox=e.getFollowOrigin():t.presence===pn.Exiting&&(o.targetBox=e.getFollowTarget()):e&&t===e.follow&&(o.transition=e.getLeadTransition(),s===pn.Entering?o.targetBox=e.getLeadTarget():s===pn.Exiting&&(o.originBox=e.getLeadOrigin())),(null===(n=null===e||void 0===e?void 0:e.follow)||void 0===n?void 0:n.isPresenceRoot)||(null===a||void 0===a?void 0:a.isPresenceRoot)?(e&&t!==a?e&&t===e.follow?a&&s!==pn.Entering&&s===pn.Exiting&&(o.crossfadeOpacity=null===(i=null===e||void 0===e?void 0:e.lead)||void 0===i?void 0:i.getValue(\"opacity\",1)):o.visibilityAction=vn.Hide:t.presence===pn.Entering&&(o.crossfadeOpacity=null===(r=null===e||void 0===e?void 0:e.follow)||void 0===r?void 0:r.getValue(\"opacity\",0)),o):o}var br=function(){function t(){this.order=[],this.hasChildren=!1}return t.prototype.add=function(t){var e;if(this.order.push(t),this.snapshot){t.prevSnapshot=this.snapshot,t.prevViewportBox=this.snapshot.boundingBox;var n=this.snapshot.latestMotionValues;for(var r in n)t.hasValue(r)?null===(e=t.getValue(r))||void 0===e||e.set(n[r]):t.addValue(r,p(n[r]))}this.hasChildren=!0},t.prototype.remove=function(t){var e=this.order.findIndex((function(e){return t===e}));-1!==e&&this.order.splice(e,1)},t.prototype.updateLeadAndFollow=function(){this.prevLead=this.lead,this.prevFollow=this.follow;var t=Object(r.c)(function(t,e){for(var n=Object(r.c)(e,2),i=n[0],o=n[1],a=void 0,s=0,u=void 0,c=t.length,l=!1,f=c-1;f>=0;f--){var d=t[f];if(f===c-1&&(l=d.isPresent),l)a=d;else{var p=t[f-1];p&&p.isPresent&&(a=d)}if(a){s=f;break}}if(a||(a=t[0]),u=t[s-1],a)for(f=s-1;f>=0;f--)if((d=t[f]).isPresent){u=d;break}return a!==i&&!l&&u===o&&t.find((function(t){return t===i}))&&(a=i),[a,u]}(this.order,[this.lead,this.follow]),2),e=t[0],n=t[1];this.lead=e,this.follow=n},t.prototype.updateSnapshot=function(){if(this.lead){var t={boundingBox:this.lead.prevViewportBox,latestMotionValues:{}};this.lead.forEachValue((function(e,n){var r=e.get();k(r)||(t.latestMotionValues[n]=r)}));var e=Hn.get(this.lead);e&&e.isDragging&&(t.isDragging=!0,t.cursorProgress=e.cursorProgress),this.snapshot=t}},t.prototype.isLeadPresent=function(){var t;return this.lead&&(null===(t=this.lead)||void 0===t?void 0:t.presence)!==pn.Exiting},t.prototype.getFollowOrigin=function(){var t;return this.follow?this.follow.prevViewportBox:null===(t=this.snapshot)||void 0===t?void 0:t.boundingBox},t.prototype.getFollowTarget=function(){var t;return null===(t=this.follow)||void 0===t?void 0:t.box},t.prototype.getLeadOrigin=function(){var t;return null===(t=this.lead)||void 0===t?void 0:t.prevViewportBox},t.prototype.getLeadTarget=function(){var t;return null===(t=this.lead)||void 0===t?void 0:t.box},t.prototype.getLeadTransition=function(){var t;return null===(t=this.lead)||void 0===t?void 0:t.config.transition},t}();!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.children=new Set,e.stacks=new Map,e.hasMounted=!1,e.updateScheduled=!1,e.renderScheduled=!1,e.syncContext=Object(r.a)(Object(r.a)({},bn()),{syncUpdate:function(t){return e.scheduleUpdate(t)},forceUpdate:function(){e.syncContext=Object(r.a)({},e.syncContext),e.scheduleUpdate(!0)},register:function(t){return e.addChild(t)},remove:function(t){return e.removeChild(t)}}),e}Object(r.b)(e,t),e.prototype.componentDidMount=function(){this.hasMounted=!0,this.updateStacks()},e.prototype.componentDidUpdate=function(){this.startLayoutAnimation()},e.prototype.shouldComponentUpdate=function(){return this.renderScheduled=!0,!0},e.prototype.startLayoutAnimation=function(){var t=this;this.renderScheduled=this.updateScheduled=!1;var e=this.props.type;this.children.forEach((function(t){t.isPresent?t.presence!==pn.Entering&&(t.presence=t.presence===pn.Exiting?pn.Entering:pn.Present):t.presence=pn.Exiting})),this.updateStacks();var n=\"crossfade\"===e?yr:gr,r={measureLayout:function(t){return t.measureLayout()},layoutReady:function(e){var r=e.layoutId;e.layoutReady(n(e,t.getStack(r)))},parent:this.context.visualElement};this.children.forEach((function(e){return t.syncContext.add(e)})),this.syncContext.flush(r),this.stacks.forEach((function(t){return t.snapshot=void 0}))},e.prototype.updateStacks=function(){this.stacks.forEach((function(t){return t.updateLeadAndFollow()}))},e.prototype.scheduleUpdate=function(t){void 0===t&&(t=!1),!t&&this.updateScheduled||(this.updateScheduled=!0,this.children.forEach((function(t){return function(t){for(var e=!1,n={},r=0;r<V.length;r++){var i=\"rotate\"+V[r];t.hasValue(i)&&0!==t.latest[i]&&(e=!0,n[i]=t.latest[i],t.latest[i]=0)}if(e){for(var i in t.render(),n)t.latest[i]=n[i];t.scheduleRender()}}(t)})),this.children.forEach((function(t){return t.snapshotBoundingBox()})),this.stacks.forEach((function(t){return t.updateSnapshot()})),!t&&this.renderScheduled||(this.renderScheduled=!0,this.forceUpdate()))},e.prototype.addChild=function(t){this.children.add(t),this.addToStack(t),t.presence=this.hasMounted?pn.Entering:pn.Present},e.prototype.removeChild=function(t){this.scheduleUpdate(),this.children.delete(t),this.removeFromStack(t)},e.prototype.addToStack=function(t){var e=this.getStack(t.layoutId);null===e||void 0===e||e.add(t)},e.prototype.removeFromStack=function(t){var e=this.getStack(t.layoutId);null===e||void 0===e||e.remove(t)},e.prototype.getStack=function(t){if(void 0!==t)return!this.stacks.has(t)&&this.stacks.set(t,new br),this.stacks.get(t)},e.prototype.render=function(){return Object(u.createElement)(jn.Provider,{value:this.syncContext},this.props.children)},e.contextType=qt}(u.Component);!function(){function t(){this.componentControls=new Set}t.prototype.subscribe=function(t){var e=this;return this.componentControls.add(t),function(){return e.componentControls.delete(t)}},t.prototype.start=function(t,e){this.componentControls.forEach((function(n){n.start(t.nativeEvent||t,e)}))},t.prototype.updateConstraints=function(){this.componentControls.forEach((function(t){t.prepareBoundingBox(),t.resolveDragConstraints()}))}}();!function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.initialState={},e}Object(r.b)(e,t),e.prototype.updateLayoutDelta=function(){},e.prototype.build=function(){},e.prototype.clean=function(){},e.prototype.makeTargetAnimatable=function(t){var e=t.transition,n=t.transitionEnd,i=Object(r.d)(t,[\"transition\",\"transitionEnd\"]);return Bt(this,i,kt(i,e||{},this)),Object(r.a)({transition:e,transitionEnd:n},i)},e.prototype.getBoundingBox=function(){return{x:{min:0,max:0},y:{min:0,max:0}}},e.prototype.readNativeValue=function(t){return this.initialState[t]||0},e.prototype.render=function(){this.build()}}(v)}}]);","map":{"version":3,"sources":["static/chunks/baedf866.4409b0b616f008bc2c03.js"],"names":["window","push","2F2M","module","__webpack_exports__","__webpack_require__","d","AnimatePresence","motion","tslib__WEBPACK_IMPORTED_MODULE_0__","framesync__WEBPACK_IMPORTED_MODULE_1__","popmotion__WEBPACK_IMPORTED_MODULE_2__","hey_listen__WEBPACK_IMPORTED_MODULE_3__","style_value_types__WEBPACK_IMPORTED_MODULE_4__","react__WEBPACK_IMPORTED_MODULE_5__","react__WEBPACK_IMPORTED_MODULE_5___default","n","isRefObject","ref","hasOwnProperty","SubscriptionManager","this","subscriptions","Set","prototype","add","handler","_this","delete","notify","a","b","c","e_1","_a","size","_b","Object","_c","next","done","value","e_1_1","error","return","call","clear","MotionValue","init","timeDelta","lastUpdated","updateSubscribers","renderSubscribers","canTrackVelocity","updateAndNotify","v","render","prev","current","delta","timestamp","postRender","scheduleVelocityCheck","velocityCheck","isNaN","parseFloat","onChange","subscription","clearListeners","onRenderRequest","get","attach","passiveEffect","set","getPrevious","getVelocity","start","animation","stop","Promise","resolve","stopAnimation","then","clearAnimation","isAnimating","destroy","motionValue","VisualElement","parent","children","baseTarget","latest","values","Map","valueSubscriptions","config","isMounted","update","onUpdate","triggerRender","element","mount","unmount","externalRef","rootParent","treePath","depth","getVariantPayload","custom","getVariant","label","variants","addVariantChild","visualElement","variantChildren","addVariantChildOrder","variantChildrenOrder","onAnimationStart","onAnimationComplete","getDefaultTransition","transition","subscribe","child","hasValue","key","has","addValue","removeValue","setSingleStaticValue","subscribeToValue","getValue","defaultValue","undefined","forEachValue","callback","forEach","getInstance","updateConfig","getBaseValue","_props","setStaticValues","scheduleRender","scheduleUpdateLayoutDelta","preRender","updateLayoutDelta","unsubscribeOnChange","unsubscribeOnRender","removeFromParent","_","noop","any","convertBoundingBoxToAxisBox","top","x","min","left","max","right","y","bottom","copyAxisBox","box","zeroDelta","translate","scale","origin","originPoint","int","transform","Math","round","defaultValueTypes","color","backgroundColor","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","width","maxWidth","height","maxHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skew","skewX","skewY","distance","translateX","translateY","translateZ","z","perspective","transformPerspective","opacity","originX","originY","originZ","zIndex","fillOpacity","strokeOpacity","numOctaves","dimensionValueTypes","test","parse","testValueType","type","findDimensionValueType","find","valueTypes","findValueType","getDefaultValueType","getValueAsType","transformAxes","transformProps","sortTransformProps","indexOf","operationKey","axesKey","transformPropSet","isTransformProp","transformOriginProps","isTransformOriginProp","translateAlias","buildLayoutProjectionTransform","treeScale","latestTransform","identityProjection","isCSSVariable","startsWith","isCSSVariable$1","cssVariableRegex","getVariableValue","match","exec","parseCSSVariable","token","fallback","resolved","getComputedStyle","getPropertyValue","trim","pixelsToPercent","pixels","axis","varToken","borderCorrectionDefinition","process","viewportBox","valueScaleCorrection","applyTo","boxShadow","_viewportBox","original","containsCSSVariables","includes","cssVariables","replace","shadow","length","template","createTransformer","offset","xScale","yScale","averageScale","output","i_1","cssVariable","buildHTMLStyles","style","vars","transformOrigin","transformKeys","isLayoutProjectionEnabled","deltaFinal","targetBox","enableHardwareAcceleration","transformTemplate","allowTransformNone","hasTransform","hasTransformOrigin","transformIsNone","valueType","valueAsType","default","bucket","corrected","num","i","buildLayoutProjectionTransformOrigin","transformIsDefault","transformString","sort","transformHasZ","numTransformKeys","buildTransform","_d","buildTransformOrigin","resetAxis","originAxis","scalePoint","point","applyPointDelta","boxScale","applyAxisDelta","applyBoxDelta","applyAxisTransforms","final","transforms","scaleKey","originKey","axisOrigin","xKeys","yKeys","removePointDelta","removeAxisTransforms","removeAxisDelta","isNear","target","maxDistance","calcLength","calcOrigin","source","sourceLength","targetLength","updateAxisDelta","updateBoxDelta","eachAxis","getBoundingBox","transformPagePoint","transformPoint","topLeft","bottomRight","transformBoundingBox","getBoundingClientRect","BoundingBoxDimension","isKeyframesTarget","Array","isArray","positionalKeys","isPositionalKey","setAndResetVelocity","to","isNumOrPxType","getPosFromMatrix","matrix","pos","split","getTranslateFromMatrix","pos2","pos3","_bbox","matrix3d","nonTranslationalTransformKeys","filter","positionalValues","checkAndConvertChangedValueTypes","transitionEnd","targetPositionalKeys","keys","removedTransformValues","hasAttemptedToRemoveTransformValues","changedValueTypeKeys","toType","from","fromType","numKeyframes","map","removedTransforms","removeNonTranslationalTransform","convertedTarget","changedKeys","originBbox","elementComputedStyle","display","originComputedStyle","targetBbox","convertChangedValueTypes","unitConversion","some","hasPositionalKey","parseDomVariant","HTMLElement","resolveCSSVariables","isVariantLabels","resolveVariant","definition","getCurrent","velocity","setMotionValue","setTarget","makeTargetAnimatable","setVariants","variantLabels","reverse","setValues","checkTargetForNewValues","newValueKeys","numNewValues","targetValue","readValue","readNativeValue","getAnimatableNone","getOriginFromTransition","getOrigin","isMotionValue","HTMLVisualElement","_super","apply","arguments","defaultConfig","reactStyle","layoutUpdateListeners","layoutMeasureListeners","viewportBoxUpdateListeners","hasViewportBoxUpdated","targetBoxFinal","deltaTransform","stopLayoutAxisAnimation","isTargetBoxLocked","updateLayoutDeltas","fireUpdateLayoutDelta","clean","read","computedStyle","layoutOrigin","defaultValueType","props","parseDOMValues","transformValues","parsed","enableLayoutProjection","hide","isVisible","show","onLayoutUpdate","onLayoutMeasure","onViewportBoxUpdate","layoutReady","prevViewportBox","getBoundingBoxWithoutTransforms","bbox","snapshotBoundingBox","rebaseTargetBox","force","getAxisProgress","shouldRebase","setAxisTarget","measureLayout","boxCorrected","lockTargetBox","unlockTargetBox","stopLayoutAnimation","resetTransform","targetAxis","axisProgress","startLayoutAxisAnimation","progress","animateMotionValue","withoutTransform","originBox","prevTreeScaleX","prevTreeScaleY","treeLength","applyTreeDeltas","updateTransformDeltas","finalBox","build","visibility","assign","setProperty","useConstant","calcOrigin$1","progressToPixels","dashKeys","array","camelKeys","unmeasured","buildSVGAttrs","attrs","dimensions","totalPathLength","attrX","attrY","pathLength","pathSpacing","pathOffset","calcSVGTransformOrigin","totalLength","spacing","useDashCase","buildSVGPath","camelCaseAttributes","CAMEL_CASE_PATTERN","camelToDash","str","toLowerCase","SVGVisualElement","measure","getBBox","e","tagName","getTotalLength","prop","getAttribute","setAttribute","svgTagNames","isSVGComponent","Component","PresenceContext","MotionContext","variantContext","useVariantContext","useVisualElementContext","LayoutGroupContext","MotionConfigContext","p","features","isStatic","useUnmountEffect","addDomEvent","eventName","options","addEventListener","removeEventListener","useDomEvent","isMouseEvent","event","PointerEvent","pointerType","MouseEvent","isTouchEvent","touches","defaultPagePoint","pageX","pageY","pointFromTouch","pointType","changedTouches","pointFromMouse","extractEventInfo","getViewportPointFromEvent","wrapHandler","shouldFilterPrimaryPointer","eventHandler","listener","button","isBrowser","mouseEventNames","pointerdown","pointermove","pointerup","pointercancel","pointerover","pointerout","pointerenter","pointerleave","touchEventNames","getPointerEventName","name","onpointerdown","ontouchstart","onmousedown","addPointerEvent","usePointerEvent","secondsToMilliseconds","seconds","PanSession","handlers","startEvent","lastMoveEvent","lastMoveEventInfo","updatePoint","info","getPanInfo","history","isPanStarted","isDistancePastThreshold","onStart","onMove","handlePointerMove","buttons","handlePointerUp","end","onEnd","panInfo","initialInfo","onSessionStart","removeListeners","updateHandlers","subtractPoint","lastDevicePoint","startDevicePoint","getVelocity$1","timestampedPoint","lastPoint","time","currentVelocity","Infinity","isNodeOrChild","parentElement","createLock","lock","globalHorizontalLock","globalVerticalLock","getGlobalLock","drag","openHorizontal_1","openVertical_1","easingLookup","linear","easeIn","easeInOut","easeOut","circIn","circInOut","circOut","backIn","backInOut","backOut","anticipate","bounceIn","bounceInOut","bounceOut","easingDefinitionToFunction","x1","y1","x2","y2","isAnimatable","underDampedSpring","stiffness","damping","restDelta","restSpeed","overDampedSpring","linearTween","ease","duration","keyframes","defaultTransitions","legacyRepeatWarning","convertTransitionToAnimationOptions","times","yoyo","flip","loop","repeatDelay","isEasingArray","repeatType","repeat","getPopmotionAnimationOptions","hydrateKeyframes","when","delay","delayChildren","staggerChildren","staggerDirection","isTransitionDefined","valueKey","transitionFactory","startAnimation","onComplete","delayTimer","controls","valueTransition","getValueTransition","isTargetAnimatable","isOriginAnimatable","getAnimation","_e","getDelayFromTransition","setTimeout","clearTimeout","animateVisualElement","animations","variant","animateVariant","all","animateTarget","transitionOverride","getChildAnimations","forwardDelay","maxStaggerDuration","generateStaggerDuration","animateChildren","first","last","_f","protectedValues","animationState","getProtectedKeys","valueTarget","AnimationType","AnimationControls","hasMounted","pendingAnimations","subscribers","animations_1","variantPriorityOrder","Animate","Hover","Tap","Drag","Focus","Exit","reversePriorityOrder","numAnimationTypes","createAnimationState","currentProps","currentContext","animate","animateList","state","createTypeState","createState","isInitialRender","buildResolvedTypeValues","acc","setProps","context","changedActiveType","removedKeys","encounteredKeys","removedVariantIndex","_loop_1","typeState","propIsVariant","activeDelta","isActive","isInherited","manuallyAnimateOnMount","prevSnapshot","prevResolvedValues","protectedKeys","prevProp","shouldAnimateType","prevLength","shallowCompare","variantsHaveChanged","definitionList","resolvedValues","reduce","allKeys","fallbackAnimation_1","fallbackTarget","shouldAnimate","Boolean","initial","setActive","setAnimateFunction","makeAnimator","filterTouch","useGestures","onPan","onPanStart","onPanEnd","onPanSessionStart","hasPanEvents","panSession","usePanGesture","onTap","onTapStart","onTapCancel","whileTap","hasPressListeners","isPressing","cancelPointerEventListener","removePointerUp","onPointerUp","openGestureLock","useTapGesture","onHoverStart","onHoverEnd","whileHover","onPointerEnter","onPointerLeave","useHoverGesture","whileFocus","useFocusGesture","makeRenderlessComponent","hook","gestureProps","GestureComponent","Gestures","shouldRender","getComponent","validMotionProps","isValidMotionProp","isPropValid","emotionIsPropValid_1","isForcedMotionValue","layout","layoutId","addMotionValues","isStyle","foundMotionValue","reservedNames","Presence","VisibilityAction","empty","defaultHandler","sortByDepth","createBatcher","queue","flush","order","resetAndMeasure","isPresent","presence","Present","isSharedLayout","forceUpdate","SharedLayoutContext","FramerTreeLayoutContext","useIsomorphicLayoutEffect","usePresence","onExitComplete","register","id","useUniqueId","counter","incrementId","useInitialOrEveryRender","isInitialOnly","checkShouldInheritVariant","inherit","useVariants","presenceContext","shouldInheritVariants","contextDependencies","isControllingVariants","isVariantLabel$1","whileDrag","exit","checkIfControllingVariants","isVariantNode","numVariantProps","name_1","variantProps","contextProp","initialToSet","remove","nextContext","inheritsVariants","createMotionComponent","defaultFeatures","useVisualElement","useRender","isForced","existsAsProp","existsAsStyle","propIsMotionValue","styleIsMotionValue","useMotionValues","plugins","allFeatures","numFeatures","useFeatures","component","syncLayout","framerSyncLayout","useSnapshotOnUnmount","Provider","applyConstraints","elastic","calcRelativeAxisConstraints","calcViewportAxisConstraints","layoutAxis","constraintsAxis","lastPointerEvent","elementDragControls","WeakMap","VisualElementDragControls","isDragging","currentDirection","constraints","hasMutatedConstraints","cursorProgress","openGlobalLock","originEvent","snapToCursor","stopMotion","dragPropagation","prepareBoundingBox","resolveDragConstraints","axisValue","getAxisMotionValue","onDragStart","dragDirectionLock","lockThreshold","direction","abs","getCurrentDirection","onDirectionLock","updateAxis","onDrag","dragConstraints","resolveRefConstraints","layoutBox","calcRelativeConstraints","relativeConstraints","rebaseAxisConstraints","onMeasureDragConstraints","constraintsElement","constraintsBox","measuredConstraints","calcViewportConstraints","userConstraints","convertAxisBoxToBoundingBox","cancelDrag","dragMomentum","dragElastic","onDragEnd","animateDragEnd","length_1","center","updateVisualElementAxis","shouldDrag","updateAxisMotionValue","nextValue","axisLayout","axisLength","calcConstrainedMinPoint","updateProps","_g","remainingProps","dragKey","toUpperCase","dragTransition","momentumAnimations","bounceStiffness","bounceDamping","inertia","timeConstant","startAxisValueAnimation","onDragTransitionEnd","currentValue","boxProgress","calcPositionFromProgress","stopPointerListener","dragListener","stopResizeListener","stopLayoutUpdateListener","groupDragControls","dragControls","useDrag","ExitComponent","AnimationState","unsubscribe","useAnimationGroupSubscription","Animation","frameTarget","stopAxisAnimation","visibilityAction","shouldStackAnimate","safeToRemove","boxHasMoved","hasMoved","animateAxis","Hide","onLayoutAnimationComplete","componentDidMount","unsubLayoutReady","componentWillUnmount","crossfadeOpacity","crossfade","layoutProgress","createCrossfadeAnimation","frame","tweenAxis","unsubscribeProgress","defaultTransition","easeCrossfadeIn","easeCrossfadeOut","AnimateLayoutContextProvider","hasAxisMoved","compress","easing","AnimateLayout","Measure","getSnapshotBeforeUpdate","syncUpdate","componentDidUpdate","MeasureContextProvider","createElement","MeasureLayout","allMotionFeatures","domBaseConfig","layoutGroupId","presenceId","isPresenceRoot","forwardedProps","domProps","filterProps","visualProps","buildSVGProps","htmlProps","draggable","userSelect","WebkitUserSelect","WebkitTouchCallout","touchAction","buildHTMLProps","createMotionProxy","componentCache","Proxy","getPresenceId","PresenceChild","presenceAffectsLayout","presenceChildren","newChildrenMap","childId","allComplete","isComplete","getChildKey","exitBeforeEnter","forceRender","unloadingRef","forcedRenderCount","setForcedRenderCount","useForceUpdate","layoutContext","filteredChildren","filtered","onlyElements","presentChildren","allChildren","exiting","updateChildLookup","childrenToRender","presentKeys","targetKeys","numPresent","insertionIndex","splice","removeIndex","findIndex","presentChild","createSwitchAnimation","stack","lead","Entering","prevLead","Show","getFollowOrigin","Exiting","getFollowTarget","stackLead","stackLeadPresence","follow","getLeadTransition","getLeadTarget","getLeadOrigin","LayoutStack","hasChildren","snapshot","boundingBox","latestMotionValues","index","stackChild","updateLeadAndFollow","prevFollow","leadIndex","numInStack","lastIsPresent","findLeadAndFollow","updateSnapshot","isLeadPresent","AnimateSharedLayout","stacks","updateScheduled","renderScheduled","syncContext","scheduleUpdate","addChild","removeChild","updateStacks","startLayoutAnimation","shouldComponentUpdate","createAnimation","getStack","hasRotate","resetValues","resetRotate","addToStack","removeFromStack","contextType","DragControls","componentControls","nativeEvent","updateConstraints","StateVisualElement","initialState"],"mappings":"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"},"name":"static/chunks/baedf866.4409b0b616f008bc2c03.js","input":"(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[3],{\n\n/***/ \"2F2M\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* unused harmony export AnimateLayoutFeature */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return AnimatePresence; });\n/* unused harmony export AnimateSharedLayout */\n/* unused harmony export AnimationControls */\n/* unused harmony export AnimationFeature */\n/* unused harmony export DragControls */\n/* unused harmony export DragFeature */\n/* unused harmony export ExitFeature */\n/* unused harmony export FramerTreeLayoutContext */\n/* unused harmony export GesturesFeature */\n/* unused harmony export HTMLVisualElement */\n/* unused harmony export LayoutGroupContext */\n/* unused harmony export MotionConfig */\n/* unused harmony export MotionConfigContext */\n/* unused harmony export MotionValue */\n/* unused harmony export PresenceContext */\n/* unused harmony export SharedLayoutContext */\n/* unused harmony export VisibilityAction */\n/* unused harmony export addScaleCorrection */\n/* unused harmony export animate */\n/* unused harmony export animateVisualElement */\n/* unused harmony export animationControls */\n/* unused harmony export createBatcher */\n/* unused harmony export createDomMotionComponent */\n/* unused harmony export createMotionComponent */\n/* unused harmony export isValidMotionProp */\n/* unused harmony export m */\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return motion; });\n/* unused harmony export motionValue */\n/* unused harmony export resolveMotionValue */\n/* unused harmony export transform */\n/* unused harmony export useAnimation */\n/* unused harmony export useCycle */\n/* unused harmony export useDeprecatedAnimatedState */\n/* unused harmony export useDeprecatedInvertedScale */\n/* unused harmony export useDomEvent */\n/* unused harmony export useDragControls */\n/* unused harmony export useElementScroll */\n/* unused harmony export useExternalRef */\n/* unused harmony export useGestures */\n/* unused harmony export useIsPresent */\n/* unused harmony export useMotionTemplate */\n/* unused harmony export useMotionValue */\n/* unused harmony export usePanGesture */\n/* unused harmony export usePresence */\n/* unused harmony export useReducedMotion */\n/* unused harmony export useSpring */\n/* unused harmony export useTapGesture */\n/* unused harmony export useTransform */\n/* unused harmony export useViewportScroll */\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"TMUO\");\n/* harmony import */ var framesync__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"NDAs\");\n/* harmony import */ var popmotion__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"5qNn\");\n/* harmony import */ var hey_listen__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"cVtW\");\n/* harmony import */ var style_value_types__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"ufvu\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"ERkP\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);\n\n\n\n\n\n\n\nvar isRefObject = function (ref) {\n    return typeof ref === \"object\" && ref.hasOwnProperty(\"current\");\n};\n\n/**\n * A generic subscription manager.\n */\nvar SubscriptionManager = /** @class */ (function () {\n    function SubscriptionManager() {\n        this.subscriptions = new Set();\n    }\n    SubscriptionManager.prototype.add = function (handler) {\n        var _this = this;\n        this.subscriptions.add(handler);\n        return function () { return void _this.subscriptions.delete(handler); };\n    };\n    SubscriptionManager.prototype.notify = function (\n    /**\n     * Using ...args would be preferable but it's array creation and this\n     * might be fired every frame.\n     */\n    a, b, c) {\n        var e_1, _a;\n        if (!this.subscriptions.size)\n            return;\n        try {\n            for (var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __values */ \"f\"])(this.subscriptions), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var handler = _c.value;\n                handler(a, b, c);\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n    };\n    SubscriptionManager.prototype.clear = function () {\n        this.subscriptions.clear();\n    };\n    return SubscriptionManager;\n}());\n\nvar isFloat = function (value) {\n    return !isNaN(parseFloat(value));\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nvar MotionValue = /** @class */ (function () {\n    /**\n     * @param init - The initiating value\n     * @param config - Optional configuration options\n     *\n     * -  `transformer`: A function to transform incoming values with.\n     *\n     * @internal\n     */\n    function MotionValue(init) {\n        var _this = this;\n        /**\n         * Duration, in milliseconds, since last updating frame.\n         *\n         * @internal\n         */\n        this.timeDelta = 0;\n        /**\n         * Timestamp of the last time this `MotionValue` was updated.\n         *\n         * @internal\n         */\n        this.lastUpdated = 0;\n        /**\n         * Functions to notify when the `MotionValue` updates.\n         *\n         * @internal\n         */\n        this.updateSubscribers = new SubscriptionManager();\n        /**\n         * Functions to notify when the `MotionValue` updates and `render` is set to `true`.\n         *\n         * @internal\n         */\n        this.renderSubscribers = new SubscriptionManager();\n        /**\n         * Tracks whether this value can output a velocity. Currently this is only true\n         * if the value is numerical, but we might be able to widen the scope here and support\n         * other value types.\n         *\n         * @internal\n         */\n        this.canTrackVelocity = false;\n        this.updateAndNotify = function (v, render) {\n            if (render === void 0) { render = true; }\n            _this.prev = _this.current;\n            _this.current = v;\n            if (_this.prev !== _this.current) {\n                _this.updateSubscribers.notify(_this.current);\n            }\n            if (render) {\n                _this.renderSubscribers.notify(_this.current);\n            }\n            // Update timestamp\n            var _a = Object(framesync__WEBPACK_IMPORTED_MODULE_1__[/* getFrameData */ \"c\"])(), delta = _a.delta, timestamp = _a.timestamp;\n            if (_this.lastUpdated !== timestamp) {\n                _this.timeDelta = delta;\n                _this.lastUpdated = timestamp;\n                framesync__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"b\"].postRender(_this.scheduleVelocityCheck);\n            }\n        };\n        /**\n         * Schedule a velocity check for the next frame.\n         *\n         * This is an instanced and bound function to prevent generating a new\n         * function once per frame.\n         *\n         * @internal\n         */\n        this.scheduleVelocityCheck = function () { return framesync__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"b\"].postRender(_this.velocityCheck); };\n        /**\n         * Updates `prev` with `current` if the value hasn't been updated this frame.\n         * This ensures velocity calculations return `0`.\n         *\n         * This is an instanced and bound function to prevent generating a new\n         * function once per frame.\n         *\n         * @internal\n         */\n        this.velocityCheck = function (_a) {\n            var timestamp = _a.timestamp;\n            if (timestamp !== _this.lastUpdated) {\n                _this.prev = _this.current;\n            }\n        };\n        this.current = init;\n        this.canTrackVelocity = isFloat(this.current);\n    }\n    /**\n     * Adds a function that will be notified when the `MotionValue` is updated.\n     *\n     * It returns a function that, when called, will cancel the subscription.\n     *\n     * When calling `onChange` inside a React component, it should be wrapped with the\n     * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n     * from the `useEffect` function to ensure you don't add duplicate subscribers..\n     *\n     * @library\n     *\n     * ```jsx\n     * function MyComponent() {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.onChange(updateOpacity)\n     *     const unsubscribeY = y.onChange(updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <Frame x={x} />\n     * }\n     * ```\n     *\n     * @motion\n     *\n     * ```jsx\n     * export const MyComponent = () => {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.onChange(updateOpacity)\n     *     const unsubscribeY = y.onChange(updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <motion.div style={{ x }} />\n     * }\n     * ```\n     *\n     * @internalremarks\n     *\n     * We could look into a `useOnChange` hook if the above lifecycle management proves confusing.\n     *\n     * ```jsx\n     * useOnChange(x, () => {})\n     * ```\n     *\n     * @param subscriber - A function that receives the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @public\n     */\n    MotionValue.prototype.onChange = function (subscription) {\n        return this.updateSubscribers.add(subscription);\n    };\n    MotionValue.prototype.clearListeners = function () {\n        this.updateSubscribers.clear();\n    };\n    /**\n     * Adds a function that will be notified when the `MotionValue` requests a render.\n     *\n     * @param subscriber - A function that's provided the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @internal\n     */\n    MotionValue.prototype.onRenderRequest = function (subscription) {\n        // Render immediately\n        subscription(this.get());\n        return this.renderSubscribers.add(subscription);\n    };\n    /**\n     * Attaches a passive effect to the `MotionValue`.\n     *\n     * @internal\n     */\n    MotionValue.prototype.attach = function (passiveEffect) {\n        this.passiveEffect = passiveEffect;\n    };\n    /**\n     * Sets the state of the `MotionValue`.\n     *\n     * @remarks\n     *\n     * ```jsx\n     * const x = useMotionValue(0)\n     * x.set(10)\n     * ```\n     *\n     * @param latest - Latest value to set.\n     * @param render - Whether to notify render subscribers. Defaults to `true`\n     *\n     * @public\n     */\n    MotionValue.prototype.set = function (v, render) {\n        if (render === void 0) { render = true; }\n        if (!render || !this.passiveEffect) {\n            this.updateAndNotify(v, render);\n        }\n        else {\n            this.passiveEffect(v, this.updateAndNotify);\n        }\n    };\n    /**\n     * Returns the latest state of `MotionValue`\n     *\n     * @returns - The latest state of `MotionValue`\n     *\n     * @public\n     */\n    MotionValue.prototype.get = function () {\n        return this.current;\n    };\n    /**\n     * @public\n     */\n    MotionValue.prototype.getPrevious = function () {\n        return this.prev;\n    };\n    /**\n     * Returns the latest velocity of `MotionValue`\n     *\n     * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n     *\n     * @public\n     */\n    MotionValue.prototype.getVelocity = function () {\n        // This could be isFloat(this.prev) && isFloat(this.current), but that would be wasteful\n        return this.canTrackVelocity\n            ? // These casts could be avoided if parseFloat would be typed better\n                Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* velocityPerSecond */ \"x\"])(parseFloat(this.current) -\n                    parseFloat(this.prev), this.timeDelta)\n            : 0;\n    };\n    /**\n     * Registers a new animation to control this `MotionValue`. Only one\n     * animation can drive a `MotionValue` at one time.\n     *\n     * ```jsx\n     * value.start()\n     * ```\n     *\n     * @param animation - A function that starts the provided animation\n     *\n     * @internal\n     */\n    MotionValue.prototype.start = function (animation) {\n        var _this = this;\n        this.stop();\n        return new Promise(function (resolve) {\n            _this.stopAnimation = animation(resolve);\n        }).then(function () { return _this.clearAnimation(); });\n    };\n    /**\n     * Stop the currently active animation.\n     *\n     * @public\n     */\n    MotionValue.prototype.stop = function () {\n        if (this.stopAnimation)\n            this.stopAnimation();\n        this.clearAnimation();\n    };\n    /**\n     * Returns `true` if this value is currently animating.\n     *\n     * @public\n     */\n    MotionValue.prototype.isAnimating = function () {\n        return !!this.stopAnimation;\n    };\n    MotionValue.prototype.clearAnimation = function () {\n        this.stopAnimation = null;\n    };\n    /**\n     * Destroy and clean up subscribers to this `MotionValue`.\n     *\n     * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n     * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n     * created a `MotionValue` via the `motionValue` function.\n     *\n     * @public\n     */\n    MotionValue.prototype.destroy = function () {\n        this.updateSubscribers.clear();\n        this.renderSubscribers.clear();\n        this.stop();\n    };\n    return MotionValue;\n}());\n/**\n * @internal\n */\nfunction motionValue(init) {\n    return new MotionValue(init);\n}\n\n/**\n * VisualElement is an abstract class that provides a generic animation-optimised interface to the\n * underlying renderer.\n *\n * Currently many features interact directly with HTMLVisualElement/SVGVisualElement\n * but the idea is we can create, for instance, a ThreeVisualElement that extends\n * VisualElement and we can quickly offer all the same features.\n */\nvar VisualElement = /** @class */ (function () {\n    function VisualElement(parent, ref) {\n        var _this = this;\n        // An iterable list of current children\n        this.children = new Set();\n        /**\n         * A set of values that we animate back to when a value is cleared of all overrides.\n         */\n        this.baseTarget = {};\n        // The latest resolved MotionValues\n        this.latest = {};\n        // A map of MotionValues used to animate this element\n        this.values = new Map();\n        // Unsubscription callbacks for MotionValue subscriptions\n        this.valueSubscriptions = new Map();\n        // A configuration for this VisualElement, each derived class can extend this.\n        this.config = {};\n        this.isMounted = false;\n        // A pre-bound call to the user-provided `onUpdate` callback. This won't\n        // be called more than once per frame.\n        this.update = function () { return _this.config.onUpdate(_this.latest); };\n        // Pre-bound version of render\n        this.triggerRender = function () { return _this.render(); };\n        // This function gets passed to the rendered component's `ref` prop\n        // and is used to mount/unmount the VisualElement\n        this.ref = function (element) {\n            element ? _this.mount(element) : _this.unmount();\n            if (!_this.externalRef)\n                return;\n            if (typeof _this.externalRef === \"function\") {\n                _this.externalRef(element);\n            }\n            else if (isRefObject(_this.externalRef)) {\n                _this.externalRef.current = element;\n            }\n        };\n        // Create a relationship with the provided parent.\n        this.parent = parent;\n        this.rootParent = parent ? parent.rootParent : this;\n        this.treePath = parent ? Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])(parent.treePath, [parent]) : [];\n        // Calculate the depth of this node in the VisualElement graph\n        this.depth = parent ? parent.depth + 1 : 0;\n        // A reference to any externally-defined React ref. This might live better\n        // outside the VisualElement and be handled in a hook.\n        this.externalRef = ref;\n    }\n    VisualElement.prototype.getVariantPayload = function () {\n        return this.config.custom;\n    };\n    VisualElement.prototype.getVariant = function (label) {\n        var _a;\n        return (_a = this.config.variants) === null || _a === void 0 ? void 0 : _a[label];\n    };\n    VisualElement.prototype.addVariantChild = function (visualElement) {\n        var _this = this;\n        if (!this.variantChildren)\n            this.variantChildren = new Set();\n        this.variantChildren.add(visualElement);\n        return function () { return _this.variantChildren.delete(visualElement); };\n    };\n    VisualElement.prototype.addVariantChildOrder = function (visualElement) {\n        if (!this.variantChildrenOrder)\n            this.variantChildrenOrder = new Set();\n        this.variantChildrenOrder.add(visualElement);\n    };\n    VisualElement.prototype.onAnimationStart = function () {\n        var _a, _b;\n        (_b = (_a = this.config).onAnimationStart) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    VisualElement.prototype.onAnimationComplete = function () {\n        var _a, _b;\n        this.isMounted && ((_b = (_a = this.config).onAnimationComplete) === null || _b === void 0 ? void 0 : _b.call(_a));\n    };\n    VisualElement.prototype.getDefaultTransition = function () {\n        return this.config.transition;\n    };\n    VisualElement.prototype.subscribe = function (child) {\n        var _this = this;\n        this.children.add(child);\n        return function () { return _this.children.delete(child); };\n    };\n    // Check whether this element has a MotionValue of the provided key\n    VisualElement.prototype.hasValue = function (key) {\n        return this.values.has(key);\n    };\n    // Add a MotionValue\n    VisualElement.prototype.addValue = function (key, value) {\n        if (this.hasValue(key))\n            this.removeValue(key);\n        this.values.set(key, value);\n        this.setSingleStaticValue(key, value.get());\n        this.subscribeToValue(key, value);\n    };\n    // Remove a MotionValue\n    VisualElement.prototype.removeValue = function (key) {\n        var _a;\n        (_a = this.valueSubscriptions.get(key)) === null || _a === void 0 ? void 0 : _a();\n        this.valueSubscriptions.delete(key);\n        this.values.delete(key);\n        delete this.latest[key];\n    };\n    VisualElement.prototype.getValue = function (key, defaultValue) {\n        var value = this.values.get(key);\n        if (value === undefined && defaultValue !== undefined) {\n            value = new MotionValue(defaultValue);\n            this.addValue(key, value);\n        }\n        return value;\n    };\n    // Iterate over all MotionValues\n    VisualElement.prototype.forEachValue = function (callback) {\n        this.values.forEach(callback);\n    };\n    // Get the underlying rendered instance of this VisualElement. For instance in\n    // HTMLVisualElement this will be a HTMLElement.\n    VisualElement.prototype.getInstance = function () {\n        return this.element;\n    };\n    VisualElement.prototype.updateConfig = function (config) {\n        if (config === void 0) { config = {}; }\n        this.config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, config);\n    };\n    VisualElement.prototype.getBaseValue = function (key, _props) {\n        return this.baseTarget[key];\n    };\n    // Set a single `latest` value\n    VisualElement.prototype.setSingleStaticValue = function (key, value) {\n        this.latest[key] = value;\n    };\n    // Statically set values to `latest` without needing a MotionValue\n    VisualElement.prototype.setStaticValues = function (values, value) {\n        if (typeof values === \"string\") {\n            this.setSingleStaticValue(values, value);\n        }\n        else {\n            for (var key in values) {\n                this.setSingleStaticValue(key, values[key]);\n            }\n        }\n    };\n    VisualElement.prototype.scheduleRender = function () {\n        framesync__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"b\"].render(this.triggerRender, false, true);\n    };\n    VisualElement.prototype.scheduleUpdateLayoutDelta = function () {\n        framesync__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"b\"].preRender(this.rootParent.updateLayoutDelta, false, true);\n    };\n    VisualElement.prototype.subscribeToValue = function (key, value) {\n        var _this = this;\n        var onChange = function (latest) {\n            _this.setSingleStaticValue(key, latest);\n            // Schedule onUpdate if we have an onUpdate listener and the component has mounted\n            _this.element &&\n                _this.config.onUpdate &&\n                framesync__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"b\"].update(_this.update, false, true);\n        };\n        var onRender = function () {\n            _this.element && _this.scheduleRender();\n        };\n        var unsubscribeOnChange = value.onChange(onChange);\n        var unsubscribeOnRender = value.onRenderRequest(onRender);\n        this.valueSubscriptions.set(key, function () {\n            unsubscribeOnChange();\n            unsubscribeOnRender();\n        });\n    };\n    // Mount the VisualElement with the actual DOM element\n    VisualElement.prototype.mount = function (element) {\n        Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* invariant */ \"a\"])(!!element, \"No ref found. Ensure components created with motion.custom forward refs using React.forwardRef\");\n        if (this.parent) {\n            this.removeFromParent = this.parent.subscribe(this);\n        }\n        /**\n         * Save the element to this.element as a semantic API, this.current to the VisualElement\n         * is compatible with existing RefObject APIs.\n         */\n        this.element = this.current = element;\n    };\n    // Unmount the VisualElement and cancel any scheduled updates\n    VisualElement.prototype.unmount = function () {\n        var _this = this;\n        this.forEachValue(function (_, key) { return _this.removeValue(key); });\n        framesync__WEBPACK_IMPORTED_MODULE_1__[/* cancelSync */ \"a\"].update(this.update);\n        framesync__WEBPACK_IMPORTED_MODULE_1__[/* cancelSync */ \"a\"].render(this.render);\n        this.removeFromParent && this.removeFromParent();\n    };\n    return VisualElement;\n}());\n\nfunction noop(any) {\n    return any;\n}\n\n/**\n * Bounding boxes tend to be defined as top, left, right, bottom. For various operations\n * it's easier to consider each axis individually. This function returns a bounding box\n * as a map of single-axis min/max values.\n */\nfunction convertBoundingBoxToAxisBox(_a) {\n    var top = _a.top, left = _a.left, right = _a.right, bottom = _a.bottom;\n    return {\n        x: { min: left, max: right },\n        y: { min: top, max: bottom },\n    };\n}\nfunction convertAxisBoxToBoundingBox(_a) {\n    var x = _a.x, y = _a.y;\n    return {\n        top: y.min,\n        bottom: y.max,\n        left: x.min,\n        right: x.max,\n    };\n}\n/**\n * Applies a TransformPoint function to a bounding box. TransformPoint is usually a function\n * provided by Framer to allow measured points to be corrected for device scaling. This is used\n * when measuring DOM elements and DOM event points.\n */\nfunction transformBoundingBox(_a, transformPoint) {\n    var top = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;\n    if (transformPoint === void 0) { transformPoint = noop; }\n    var topLeft = transformPoint({ x: left, y: top });\n    var bottomRight = transformPoint({ x: right, y: bottom });\n    return {\n        top: topLeft.y,\n        left: topLeft.x,\n        bottom: bottomRight.y,\n        right: bottomRight.x,\n    };\n}\n/**\n * Create an empty axis box of zero size\n */\nfunction axisBox() {\n    return { x: { min: 0, max: 1 }, y: { min: 0, max: 1 } };\n}\nfunction copyAxisBox(box) {\n    return {\n        x: Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, box.x),\n        y: Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, box.y),\n    };\n}\n/**\n * Create an empty box delta\n */\nvar zeroDelta = {\n    translate: 0,\n    scale: 1,\n    origin: 0,\n    originPoint: 0,\n};\nfunction delta() {\n    return {\n        x: Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, zeroDelta),\n        y: Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, zeroDelta),\n    };\n}\n\n/**\n * ValueType for \"auto\"\n */\nvar auto = {\n    test: function (v) { return v === \"auto\"; },\n    parse: function (v) { return v; },\n};\n/**\n * ValueType for ints\n */\nvar int = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* number */ \"g\"]), { transform: Math.round });\n/**\n * A map of default value types for common values\n */\nvar defaultValueTypes = {\n    // Color props\n    color: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* color */ \"b\"],\n    backgroundColor: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* color */ \"b\"],\n    outlineColor: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* color */ \"b\"],\n    fill: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* color */ \"b\"],\n    stroke: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* color */ \"b\"],\n    // Border props\n    borderColor: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* color */ \"b\"],\n    borderTopColor: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* color */ \"b\"],\n    borderRightColor: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* color */ \"b\"],\n    borderBottomColor: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* color */ \"b\"],\n    borderLeftColor: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* color */ \"b\"],\n    borderWidth: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    borderTopWidth: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    borderRightWidth: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    borderBottomWidth: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    borderLeftWidth: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    borderRadius: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    radius: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    borderTopLeftRadius: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    borderTopRightRadius: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    borderBottomRightRadius: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    borderBottomLeftRadius: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    // Positioning props\n    width: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    maxWidth: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    height: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    maxHeight: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    size: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    top: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    right: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    bottom: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    left: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    // Spacing props\n    padding: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    paddingTop: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    paddingRight: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    paddingBottom: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    paddingLeft: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    margin: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    marginTop: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    marginRight: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    marginBottom: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    marginLeft: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    // Transform props\n    rotate: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* degrees */ \"d\"],\n    rotateX: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* degrees */ \"d\"],\n    rotateY: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* degrees */ \"d\"],\n    rotateZ: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* degrees */ \"d\"],\n    scale: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* scale */ \"l\"],\n    scaleX: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* scale */ \"l\"],\n    scaleY: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* scale */ \"l\"],\n    scaleZ: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* scale */ \"l\"],\n    skew: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* degrees */ \"d\"],\n    skewX: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* degrees */ \"d\"],\n    skewY: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* degrees */ \"d\"],\n    distance: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    translateX: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    translateY: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    translateZ: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    x: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    y: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    z: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    perspective: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    transformPerspective: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    opacity: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* alpha */ \"a\"],\n    originX: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* progressPercentage */ \"i\"],\n    originY: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* progressPercentage */ \"i\"],\n    originZ: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"],\n    // Misc\n    zIndex: int,\n    // SVG\n    fillOpacity: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* alpha */ \"a\"],\n    strokeOpacity: style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* alpha */ \"a\"],\n    numOctaves: int,\n};\n/**\n * A list of value types commonly used for dimensions\n */\nvar dimensionValueTypes = [style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* number */ \"g\"], style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"], style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* percent */ \"h\"], style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* degrees */ \"d\"], style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* vw */ \"n\"], style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* vh */ \"m\"], auto];\n/**\n * Tests a provided value against a ValueType\n */\nvar testValueType = function (v) { return function (type) { return type.test(v); }; };\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\nvar findDimensionValueType = function (v) {\n    return dimensionValueTypes.find(testValueType(v));\n};\n/**\n * A list of all ValueTypes\n */\nvar valueTypes = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])(dimensionValueTypes, [style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* color */ \"b\"], style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* complex */ \"c\"]]);\n/**\n * Tests a value against the list of ValueTypes\n */\nvar findValueType = function (v) { return valueTypes.find(testValueType(v)); };\n/**\n * Gets the default ValueType for the provided value key\n */\nvar getDefaultValueType = function (key) { return defaultValueTypes[key]; };\n/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nvar getValueAsType = function (value, type) {\n    return type && typeof value === \"number\"\n        ? type.transform(value)\n        : value;\n};\n\n/**\n * A list of all transformable axes. We'll use this list to generated a version\n * of each axes for each transform.\n */\nvar transformAxes = [\"\", \"X\", \"Y\", \"Z\"];\n/**\n * An ordered array of each transformable value. By default, transform values\n * will be sorted to this order.\n */\nvar order = [\"perspective\", \"translate\", \"scale\", \"rotate\", \"skew\"];\n/**\n * Generate a list of every possible transform key.\n */\nvar transformProps = [\"transformPerspective\", \"x\", \"y\", \"z\"];\norder.forEach(function (operationKey) {\n    transformAxes.forEach(function (axesKey) {\n        var key = operationKey + axesKey;\n        transformProps.push(key);\n    });\n});\n/**\n * A function to use with Array.sort to sort transform keys by their default order.\n */\nfunction sortTransformProps(a, b) {\n    return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\n/**\n * A quick lookup for transform props.\n */\nvar transformPropSet = new Set(transformProps);\nfunction isTransformProp(key) {\n    return transformPropSet.has(key);\n}\n/**\n * A quick lookup for transform origin props\n */\nvar transformOriginProps = new Set([\"originX\", \"originY\", \"originZ\"]);\nfunction isTransformOriginProp(key) {\n    return transformOriginProps.has(key);\n}\n\nvar translateAlias = {\n    x: \"translateX\",\n    y: \"translateY\",\n    z: \"translateZ\",\n    transformPerspective: \"perspective\",\n};\n/**\n * Build a CSS transform style from individual x/y/scale etc properties.\n *\n * This outputs with a default order of transforms/scales/rotations, this can be customised by\n * providing a transformTemplate function.\n */\nfunction buildTransform(transform, transformKeys, transformTemplate, transformIsDefault, enableHardwareAcceleration, allowTransformNone) {\n    if (enableHardwareAcceleration === void 0) { enableHardwareAcceleration = true; }\n    if (allowTransformNone === void 0) { allowTransformNone = true; }\n    // The transform string we're going to build into.\n    var transformString = \"\";\n    // Transform keys into their default order - this will determine the output order.\n    transformKeys.sort(sortTransformProps);\n    // Track whether the defined transform has a defined z so we don't add a\n    // second to enable hardware acceleration\n    var transformHasZ = false;\n    // Loop over each transform and build them into transformString\n    var numTransformKeys = transformKeys.length;\n    for (var i = 0; i < numTransformKeys; i++) {\n        var key = transformKeys[i];\n        transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n        if (key === \"z\")\n            transformHasZ = true;\n    }\n    if (!transformHasZ && enableHardwareAcceleration) {\n        transformString += \"translateZ(0)\";\n    }\n    else {\n        transformString = transformString.trim();\n    }\n    // If we have a custom `transform` template, pass our transform values and\n    // generated transformString to that before returning\n    if (transformTemplate) {\n        transformString = transformTemplate(transform, transformIsDefault ? \"\" : transformString);\n    }\n    else if (allowTransformNone && transformIsDefault) {\n        transformString = \"none\";\n    }\n    return transformString;\n}\n/**\n * Build a transformOrigin style. Uses the same defaults as the browser for\n * undefined origins.\n */\nfunction buildTransformOrigin(_a) {\n    var _b = _a.originX, originX = _b === void 0 ? \"50%\" : _b, _c = _a.originY, originY = _c === void 0 ? \"50%\" : _c, _d = _a.originZ, originZ = _d === void 0 ? 0 : _d;\n    return originX + \" \" + originY + \" \" + originZ;\n}\n/**\n * Build a transform style that takes a calculated delta between the element's current\n * space on screen and projects it into the desired space.\n */\nfunction buildLayoutProjectionTransform(_a, treeScale, latestTransform) {\n    var x = _a.x, y = _a.y;\n    /**\n     * The translations we use to calculate are always relative to the viewport coordinate space.\n     * But when we apply scales, we also scale the coordinate space of an element and its children.\n     * For instance if we have a treeScale (the culmination of all parent scales) of 0.5 and we need\n     * to move an element 100 pixels, we actually need to move it 200 in within that scaled space.\n     */\n    var xTranslate = x.translate / treeScale.x;\n    var yTranslate = y.translate / treeScale.y;\n    var transform = \"translate3d(\" + xTranslate + \"px, \" + yTranslate + \"px, 0) \";\n    if (latestTransform) {\n        var rotate = latestTransform.rotate, rotateX = latestTransform.rotateX, rotateY = latestTransform.rotateY;\n        if (rotate)\n            transform += \"rotate(\" + rotate + \") \";\n        if (rotateX)\n            transform += \"rotateX(\" + rotateX + \") \";\n        if (rotateY)\n            transform += \"rotateY(\" + rotateY + \") \";\n    }\n    transform += \"scale(\" + x.scale + \", \" + y.scale + \")\";\n    return !latestTransform && transform === identityProjection ? \"\" : transform;\n}\nvar identityProjection = buildLayoutProjectionTransform(delta(), {\n    x: 1,\n    y: 1,\n});\n/**\n * Take the calculated delta origin and apply it as a transform string.\n */\nfunction buildLayoutProjectionTransformOrigin(_a) {\n    var x = _a.x, y = _a.y;\n    return x.origin * 100 + \"% \" + y.origin * 100 + \"% 0\";\n}\n\n/**\n * Returns true if the provided key is a CSS variable\n */\nfunction isCSSVariable(key) {\n    return key.startsWith(\"--\");\n}\n\nfunction isCSSVariable$1(value) {\n    return typeof value === \"string\" && value.startsWith(\"var(--\");\n}\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\nvar cssVariableRegex = /var\\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\\)/;\nfunction parseCSSVariable(current) {\n    var match = cssVariableRegex.exec(current);\n    if (!match)\n        return [,];\n    var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(match, 3), token = _a[1], fallback = _a[2];\n    return [token, fallback];\n}\nvar maxDepth = 4;\nfunction getVariableValue(current, element, depth) {\n    if (depth === void 0) { depth = 1; }\n    Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* invariant */ \"a\"])(depth <= maxDepth, \"Max CSS variable fallback depth detected in property \\\"\" + current + \"\\\". This may indicate a circular fallback dependency.\");\n    var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(parseCSSVariable(current), 2), token = _a[0], fallback = _a[1];\n    // No CSS variable detected\n    if (!token)\n        return;\n    // Attempt to read this CSS variable off the element\n    var resolved = window.getComputedStyle(element).getPropertyValue(token);\n    if (resolved) {\n        return resolved.trim();\n    }\n    else if (isCSSVariable$1(fallback)) {\n        // The fallback might itself be a CSS variable, in which case we attempt to resolve it too.\n        return getVariableValue(fallback, element, depth + 1);\n    }\n    else {\n        return fallback;\n    }\n}\n/**\n * Resolve CSS variables from\n *\n * @internal\n */\nfunction resolveCSSVariables(visualElement, _a, transitionEnd) {\n    var _b;\n    var target = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, []);\n    var element = visualElement.getInstance();\n    if (!(element instanceof HTMLElement))\n        return { target: target, transitionEnd: transitionEnd };\n    // If `transitionEnd` isn't `undefined`, clone it. We could clone `target` and `transitionEnd`\n    // only if they change but I think this reads clearer and this isn't a performance-critical path.\n    if (transitionEnd) {\n        transitionEnd = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, transitionEnd);\n    }\n    // Go through existing `MotionValue`s and ensure any existing CSS variables are resolved\n    visualElement.forEachValue(function (value) {\n        var current = value.get();\n        if (!isCSSVariable$1(current))\n            return;\n        var resolved = getVariableValue(current, element);\n        if (resolved)\n            value.set(resolved);\n    });\n    // Cycle through every target property and resolve CSS variables. Currently\n    // we only read single-var properties like `var(--foo)`, not `calc(var(--foo) + 20px)`\n    for (var key in target) {\n        var current = target[key];\n        if (!isCSSVariable$1(current))\n            continue;\n        var resolved = getVariableValue(current, element);\n        if (!resolved)\n            continue;\n        // Clone target if it hasn't already been\n        target[key] = resolved;\n        // If the user hasn't already set this key on `transitionEnd`, set it to the unresolved\n        // CSS variable. This will ensure that after the animation the component will reflect\n        // changes in the value of the CSS variable.\n        if (transitionEnd)\n            (_b = transitionEnd[key]) !== null && _b !== void 0 ? _b : (transitionEnd[key] = current);\n    }\n    return { target: target, transitionEnd: transitionEnd };\n}\n\nfunction pixelsToPercent(pixels, axis) {\n    return (pixels / (axis.max - axis.min)) * 100;\n}\n/**\n * We always correct borderRadius as a percentage rather than pixels to reduce paints.\n * For example, if you are projecting a box that is 100px wide with a 10px borderRadius\n * into a box that is 200px wide with a 20px borderRadius, that is actually a 10%\n * borderRadius in both states. If we animate between the two in pixels that will trigger\n * a paint each time. If we animate between the two in percentage we'll avoid a paint.\n */\nfunction correctBorderRadius(latest, viewportBox) {\n    /**\n     * If latest is a string, if it's a percentage we can return immediately as it's\n     * going to be stretched appropriately. Otherwise, if it's a pixel, convert it to a number.\n     */\n    if (typeof latest === \"string\") {\n        if (style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"].test(latest)) {\n            latest = parseFloat(latest);\n        }\n        else {\n            return latest;\n        }\n    }\n    /**\n     * If latest is a number, it's a pixel value. We use the current viewportBox to calculate that\n     * pixel value as a percentage of each axis\n     */\n    var x = pixelsToPercent(latest, viewportBox.x);\n    var y = pixelsToPercent(latest, viewportBox.y);\n    return x + \"% \" + y + \"%\";\n}\nvar varToken = \"_$css\";\nfunction correctBoxShadow(latest, _viewportBox, delta, treeScale) {\n    var original = latest;\n    /**\n     * We need to first strip and store CSS variables from the string.\n     */\n    var containsCSSVariables = latest.includes(\"var(\");\n    var cssVariables = [];\n    if (containsCSSVariables) {\n        latest = latest.replace(cssVariableRegex, function (match) {\n            cssVariables.push(match);\n            return varToken;\n        });\n    }\n    var shadow = style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* complex */ \"c\"].parse(latest);\n    // TODO: Doesn't support multiple shadows\n    if (shadow.length > 5)\n        return original;\n    var template = style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* complex */ \"c\"].createTransformer(latest);\n    var offset = typeof shadow[0] !== \"number\" ? 1 : 0;\n    // Calculate the overall context scale\n    var xScale = delta.x.scale * treeScale.x;\n    var yScale = delta.y.scale * treeScale.y;\n    shadow[0 + offset] /= xScale;\n    shadow[1 + offset] /= yScale;\n    /**\n     * Ideally we'd correct x and y scales individually, but because blur and\n     * spread apply to both we have to take a scale average and apply that instead.\n     * We could potentially improve the outcome of this by incorporating the ratio between\n     * the two scales.\n     */\n    var averageScale = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(xScale, yScale, 0.5);\n    // Blur\n    if (typeof shadow[2 + offset] === \"number\")\n        shadow[2 + offset] /= averageScale;\n    // Spread\n    if (typeof shadow[3 + offset] === \"number\")\n        shadow[3 + offset] /= averageScale;\n    var output = template(shadow);\n    if (containsCSSVariables) {\n        var i_1 = 0;\n        output = output.replace(varToken, function () {\n            var cssVariable = cssVariables[i_1];\n            i_1++;\n            return cssVariable;\n        });\n    }\n    return output;\n}\nvar borderCorrectionDefinition = {\n    process: correctBorderRadius,\n};\nvar valueScaleCorrection = {\n    borderRadius: Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, borderCorrectionDefinition), { applyTo: [\n            \"borderTopLeftRadius\",\n            \"borderTopRightRadius\",\n            \"borderBottomLeftRadius\",\n            \"borderBottomRightRadius\",\n        ] }),\n    borderTopLeftRadius: borderCorrectionDefinition,\n    borderTopRightRadius: borderCorrectionDefinition,\n    borderBottomLeftRadius: borderCorrectionDefinition,\n    borderBottomRightRadius: borderCorrectionDefinition,\n    boxShadow: {\n        process: correctBoxShadow,\n    },\n};\n/**\n * @internal\n */\nfunction addScaleCorrection(correctors) {\n    for (var key in correctors) {\n        valueScaleCorrection[key] = correctors[key];\n    }\n}\n\n/**\n * Build style and CSS variables\n *\n * This function converts a Motion style prop:\n *\n * { x: 100, width: 100, originX: 0.5 }\n *\n * Into an object with default value types applied and default\n * transform order set:\n *\n * {\n *   transform: 'translateX(100px) translateZ(0)`,\n *   width: '100px',\n *   transformOrigin: '50% 50%'\n * }\n *\n * Styles are saved to `style` and CSS vars to `vars`.\n *\n * This function works with mutative data structures.\n */\nfunction buildHTMLStyles(latest, style, vars, transform, transformOrigin, transformKeys, _a, isLayoutProjectionEnabled, delta, deltaFinal, treeScale, targetBox) {\n    var enableHardwareAcceleration = _a.enableHardwareAcceleration, transformTemplate = _a.transformTemplate, allowTransformNone = _a.allowTransformNone;\n    // Empty the transformKeys array. As we're throwing out refs to its items\n    // this might not be as cheap as suspected. Maybe using the array as a buffer\n    // with a manual incrementation would be better.\n    transformKeys.length = 0;\n    // Track whether we encounter any transform or transformOrigin values.\n    var hasTransform = false;\n    var hasTransformOrigin = false;\n    // Does the calculated transform essentially equal \"none\"?\n    var transformIsNone = true;\n    /**\n     * Loop over all our latest animated values and decide whether to handle them\n     * as a style or CSS variable. Transforms and transform origins are kept seperately\n     * for further processing\n     */\n    for (var key in latest) {\n        var value = latest[key];\n        // Convert the value to its default value type, ie 0 -> \"0px\"\n        var valueType = getDefaultValueType(key);\n        var valueAsType = getValueAsType(value, valueType);\n        if (isTransformProp(key)) {\n            // If this is a transform, flag and enable further transform processing\n            hasTransform = true;\n            transform[key] = valueAsType;\n            transformKeys.push(key);\n            if (!transformIsNone)\n                continue;\n            // If all the transform keys we've so far encountered are their default value\n            // then check to see if this one isn't\n            var defaultValue = valueType.default !== undefined ? valueType.default : 0;\n            if (value !== defaultValue)\n                transformIsNone = false;\n        }\n        else if (isTransformOriginProp(key)) {\n            // If this is a transform origin, flag and enable further transform-origin processing\n            transformOrigin[key] = valueAsType;\n            hasTransformOrigin = true;\n        }\n        else if (key !== \"transform\" || typeof value !== \"function\") {\n            // Handle all remaining values. Decide which map to save to depending\n            // on whether this is a CSS variable\n            var bucket = isCSSVariable(key) ? vars : style;\n            // If we need to perform scale correction, and we have a handler for this\n            // value type (ie borderRadius), perform it\n            if (isLayoutProjectionEnabled && valueScaleCorrection[key]) {\n                var corrected = valueScaleCorrection[key].process(value, targetBox, delta, treeScale);\n                /**\n                 * Scale-correctable values can define a number of other values to break\n                 * down into. For instance borderRadius needs applying to borderBottomLeftRadius etc\n                 */\n                var applyTo = valueScaleCorrection[key].applyTo;\n                if (applyTo) {\n                    var num = applyTo.length;\n                    for (var i = 0; i < num; i++) {\n                        bucket[applyTo[i]] = corrected;\n                    }\n                }\n                else {\n                    bucket[key] = corrected;\n                }\n            }\n            else {\n                bucket[key] = valueAsType;\n            }\n        }\n    }\n    /**\n     * Build transform and transformOrigin. If we're performing layout projection these need\n     * to be based off the deltaFinal data. Any user-set origins will have been pre-baked\n     * into the deltaFinal.\n     */\n    if (isLayoutProjectionEnabled) {\n        style.transform = buildLayoutProjectionTransform(deltaFinal, treeScale, hasTransform ? transform : undefined);\n        if (transformTemplate) {\n            style.transform = transformTemplate(transform, style.transform);\n        }\n        style.transformOrigin = buildLayoutProjectionTransformOrigin(deltaFinal);\n    }\n    else {\n        if (hasTransform) {\n            style.transform = buildTransform(transform, transformKeys, transformTemplate, transformIsNone, enableHardwareAcceleration, allowTransformNone);\n        }\n        if (hasTransformOrigin) {\n            style.transformOrigin = buildTransformOrigin(transformOrigin);\n        }\n    }\n}\n\n/**\n * Reset an axis to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction resetAxis(axis, originAxis) {\n    axis.min = originAxis.min;\n    axis.max = originAxis.max;\n}\n/**\n * Reset a box to the provided origin box.\n *\n * This is a mutative operation.\n */\nfunction resetBox(box, originBox) {\n    resetAxis(box.x, originBox.x);\n    resetAxis(box.y, originBox.y);\n}\n/**\n * Scales a point based on a factor and an originPoint\n */\nfunction scalePoint(point, scale, originPoint) {\n    var distanceFromOrigin = point - originPoint;\n    var scaled = scale * distanceFromOrigin;\n    return originPoint + scaled;\n}\n/**\n * Applies a translate/scale delta to a point\n */\nfunction applyPointDelta(point, translate, scale, originPoint, boxScale) {\n    if (boxScale !== undefined) {\n        point = scalePoint(point, boxScale, originPoint);\n    }\n    return scalePoint(point, scale, originPoint) + translate;\n}\n/**\n * Applies a translate/scale delta to an axis\n */\nfunction applyAxisDelta(axis, translate, scale, originPoint, boxScale) {\n    if (translate === void 0) { translate = 0; }\n    if (scale === void 0) { scale = 1; }\n    axis.min = applyPointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = applyPointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Applies a translate/scale delta to a box\n */\nfunction applyBoxDelta(box, _a) {\n    var x = _a.x, y = _a.y;\n    applyAxisDelta(box.x, x.translate, x.scale, x.originPoint);\n    applyAxisDelta(box.y, y.translate, y.scale, y.originPoint);\n}\n/**\n * Apply a transform to an axis from the latest resolved motion values.\n * This function basically acts as a bridge between a flat motion value map\n * and applyAxisDelta\n */\nfunction applyAxisTransforms(final, axis, transforms, _a) {\n    var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(_a, 3), key = _b[0], scaleKey = _b[1], originKey = _b[2];\n    // Copy the current axis to the final axis before mutation\n    final.min = axis.min;\n    final.max = axis.max;\n    var axisOrigin = transforms[originKey] !== undefined ? transforms[originKey] : 0.5;\n    var originPoint = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(axis.min, axis.max, axisOrigin);\n    // Apply the axis delta to the final axis\n    applyAxisDelta(final, transforms[key], transforms[scaleKey], originPoint, transforms.scale);\n}\n/**\n * The names of the motion values we want to apply as translation, scale and origin.\n */\nvar xKeys = [\"x\", \"scaleX\", \"originX\"];\nvar yKeys = [\"y\", \"scaleY\", \"originY\"];\n/**\n * Apply a transform to a box from the latest resolved motion values.\n */\nfunction applyBoxTransforms(finalBox, box, transforms) {\n    applyAxisTransforms(finalBox.x, box.x, transforms, xKeys);\n    applyAxisTransforms(finalBox.y, box.y, transforms, yKeys);\n}\n/**\n * Remove a delta from a point. This is essentially the steps of applyPointDelta in reverse\n */\nfunction removePointDelta(point, translate, scale, originPoint, boxScale) {\n    point -= translate;\n    point = scalePoint(point, 1 / scale, originPoint);\n    if (boxScale !== undefined) {\n        point = scalePoint(point, 1 / boxScale, originPoint);\n    }\n    return point;\n}\n/**\n * Remove a delta from an axis. This is essentially the steps of applyAxisDelta in reverse\n */\nfunction removeAxisDelta(axis, translate, scale, origin, boxScale) {\n    if (translate === void 0) { translate = 0; }\n    if (scale === void 0) { scale = 1; }\n    if (origin === void 0) { origin = 0.5; }\n    var originPoint = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(axis.min, axis.max, origin) - translate;\n    axis.min = removePointDelta(axis.min, translate, scale, originPoint, boxScale);\n    axis.max = removePointDelta(axis.max, translate, scale, originPoint, boxScale);\n}\n/**\n * Remove a transforms from an axis. This is essentially the steps of applyAxisTransforms in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeAxisTransforms(axis, transforms, _a) {\n    var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(_a, 3), key = _b[0], scaleKey = _b[1], originKey = _b[2];\n    removeAxisDelta(axis, transforms[key], transforms[scaleKey], transforms[originKey], transforms.scale);\n}\n/**\n * Remove a transforms from an box. This is essentially the steps of applyAxisBox in reverse\n * and acts as a bridge between motion values and removeAxisDelta\n */\nfunction removeBoxTransforms(box, transforms) {\n    removeAxisTransforms(box.x, transforms, xKeys);\n    removeAxisTransforms(box.y, transforms, yKeys);\n}\n/**\n * Apply a tree of deltas to a box. We do this to calculate the effect of all the transforms\n * in a tree upon our box before then calculating how to project it into our desired viewport-relative box\n *\n * This is the final nested loop within HTMLVisualElement.updateLayoutDelta\n */\nfunction applyTreeDeltas(box, treeScale, treePath) {\n    var treeLength = treePath.length;\n    if (!treeLength)\n        return;\n    // Reset the treeScale\n    treeScale.x = treeScale.y = 1;\n    for (var i = 0; i < treeLength; i++) {\n        var delta = treePath[i].delta;\n        // Incoporate each ancestor's scale into a culmulative treeScale for this component\n        treeScale.x *= delta.x.scale;\n        treeScale.y *= delta.y.scale;\n        // Apply each ancestor's calculated delta into this component's recorded layout box\n        applyBoxDelta(box, delta);\n    }\n}\n\nvar clampProgress = function (v) { return Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* clamp */ \"l\"])(0, 1, v); };\n/**\n * Returns true if the provided value is within maxDistance of the provided target\n */\nfunction isNear(value, target, maxDistance) {\n    if (target === void 0) { target = 0; }\n    if (maxDistance === void 0) { maxDistance = 0.01; }\n    return Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* distance */ \"n\"])(value, target) < maxDistance;\n}\nfunction calcLength(axis) {\n    return axis.max - axis.min;\n}\n/**\n * Calculate a transform origin relative to the source axis, between 0-1, that results\n * in an asthetically pleasing scale/transform needed to project from source to target.\n */\nfunction calcOrigin(source, target) {\n    var origin = 0.5;\n    var sourceLength = calcLength(source);\n    var targetLength = calcLength(target);\n    if (targetLength > sourceLength) {\n        origin = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* progress */ \"w\"])(target.min, target.max - sourceLength, source.min);\n    }\n    else if (sourceLength > targetLength) {\n        origin = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* progress */ \"w\"])(source.min, source.max - targetLength, target.min);\n    }\n    return clampProgress(origin);\n}\n/**\n * Update the AxisDelta with a transform that projects source into target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\nfunction updateAxisDelta(delta, source, target, origin) {\n    delta.origin = origin === undefined ? calcOrigin(source, target) : origin;\n    delta.originPoint = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(source.min, source.max, delta.origin);\n    delta.scale = calcLength(target) / calcLength(source);\n    if (isNear(delta.scale, 1, 0.0001))\n        delta.scale = 1;\n    delta.translate =\n        Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(target.min, target.max, delta.origin) - delta.originPoint;\n    if (isNear(delta.translate))\n        delta.translate = 0;\n}\n/**\n * Update the BoxDelta with a transform that projects the source into the target.\n *\n * The transform `origin` is optional. If not provided, it'll be automatically\n * calculated based on the relative positions of the two bounding boxes.\n */\nfunction updateBoxDelta(delta, source, target, origin) {\n    updateAxisDelta(delta.x, source.x, target.x, origin);\n    updateAxisDelta(delta.y, source.y, target.y, origin);\n}\n\n// Call a handler once for each axis\nfunction eachAxis(handler) {\n    return [handler(\"x\"), handler(\"y\")];\n}\n\n/**\n * Measure and return the element bounding box.\n *\n * We convert the box into an AxisBox2D to make it easier to work with each axis\n * individually and programmatically.\n *\n * This function optionally accepts a transformPagePoint function which allows us to compensate\n * for, for instance, measuring the element within a scaled plane like a Framer devivce preview component.\n */\nfunction getBoundingBox(element, transformPagePoint) {\n    var box = element.getBoundingClientRect();\n    return convertBoundingBoxToAxisBox(transformBoundingBox(box, transformPagePoint));\n}\n\nvar isKeyframesTarget = function (v) {\n    return Array.isArray(v);\n};\n\nvar positionalKeys = new Set([\n    \"width\",\n    \"height\",\n    \"top\",\n    \"left\",\n    \"right\",\n    \"bottom\",\n    \"x\",\n    \"y\",\n]);\nvar isPositionalKey = function (key) { return positionalKeys.has(key); };\nvar hasPositionalKey = function (target) {\n    return Object.keys(target).some(isPositionalKey);\n};\nvar setAndResetVelocity = function (value, to) {\n    // Looks odd but setting it twice doesn't render, it'll just\n    // set both prev and current to the latest value\n    value.set(to, false);\n    value.set(to);\n};\nvar isNumOrPxType = function (v) {\n    return v === style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* number */ \"g\"] || v === style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"];\n};\nvar BoundingBoxDimension;\n(function (BoundingBoxDimension) {\n    BoundingBoxDimension[\"width\"] = \"width\";\n    BoundingBoxDimension[\"height\"] = \"height\";\n    BoundingBoxDimension[\"left\"] = \"left\";\n    BoundingBoxDimension[\"right\"] = \"right\";\n    BoundingBoxDimension[\"top\"] = \"top\";\n    BoundingBoxDimension[\"bottom\"] = \"bottom\";\n})(BoundingBoxDimension || (BoundingBoxDimension = {}));\nvar getPosFromMatrix = function (matrix, pos) {\n    return parseFloat(matrix.split(\", \")[pos]);\n};\nvar getTranslateFromMatrix = function (pos2, pos3) { return function (_bbox, _a) {\n    var transform = _a.transform;\n    if (transform === \"none\" || !transform)\n        return 0;\n    var matrix3d = transform.match(/^matrix3d\\((.+)\\)$/);\n    if (matrix3d) {\n        return getPosFromMatrix(matrix3d[1], pos3);\n    }\n    else {\n        var matrix = transform.match(/^matrix\\((.+)\\)$/);\n        if (matrix) {\n            return getPosFromMatrix(matrix[1], pos2);\n        }\n        else {\n            return 0;\n        }\n    }\n}; };\nvar transformKeys = new Set([\"x\", \"y\", \"z\"]);\nvar nonTranslationalTransformKeys = transformProps.filter(function (key) { return !transformKeys.has(key); });\nfunction removeNonTranslationalTransform(visualElement) {\n    var removedTransforms = [];\n    nonTranslationalTransformKeys.forEach(function (key) {\n        var value = visualElement.getValue(key);\n        if (value !== undefined) {\n            removedTransforms.push([key, value.get()]);\n            value.set(key.startsWith(\"scale\") ? 1 : 0);\n        }\n    });\n    // Apply changes to element before measurement\n    if (removedTransforms.length)\n        visualElement.render();\n    return removedTransforms;\n}\nvar positionalValues = {\n    // Dimensions\n    width: function (_a) {\n        var x = _a.x;\n        return x.max - x.min;\n    },\n    height: function (_a) {\n        var y = _a.y;\n        return y.max - y.min;\n    },\n    top: function (_bbox, _a) {\n        var top = _a.top;\n        return parseFloat(top);\n    },\n    left: function (_bbox, _a) {\n        var left = _a.left;\n        return parseFloat(left);\n    },\n    bottom: function (_a, _b) {\n        var y = _a.y;\n        var top = _b.top;\n        return parseFloat(top) + (y.max - y.min);\n    },\n    right: function (_a, _b) {\n        var x = _a.x;\n        var left = _b.left;\n        return parseFloat(left) + (x.max - x.min);\n    },\n    // Transform\n    x: getTranslateFromMatrix(4, 13),\n    y: getTranslateFromMatrix(5, 14),\n};\nvar convertChangedValueTypes = function (target, visualElement, changedKeys) {\n    var originBbox = visualElement.getBoundingBox();\n    var elementComputedStyle = visualElement.getComputedStyle();\n    var display = elementComputedStyle.display, top = elementComputedStyle.top, left = elementComputedStyle.left, bottom = elementComputedStyle.bottom, right = elementComputedStyle.right, transform = elementComputedStyle.transform;\n    var originComputedStyle = { top: top, left: left, bottom: bottom, right: right, transform: transform };\n    // If the element is currently set to display: \"none\", make it visible before\n    // measuring the target bounding box\n    if (display === \"none\") {\n        visualElement.setStaticValues(\"display\", target.display || \"block\");\n    }\n    // Apply the latest values (as set in checkAndConvertChangedValueTypes)\n    visualElement.render();\n    var targetBbox = visualElement.getBoundingBox();\n    changedKeys.forEach(function (key) {\n        // Restore styles to their **calculated computed style**, not their actual\n        // originally set style. This allows us to animate between equivalent pixel units.\n        var value = visualElement.getValue(key);\n        setAndResetVelocity(value, positionalValues[key](originBbox, originComputedStyle));\n        target[key] = positionalValues[key](targetBbox, elementComputedStyle);\n    });\n    return target;\n};\nvar checkAndConvertChangedValueTypes = function (visualElement, target, origin, transitionEnd) {\n    if (origin === void 0) { origin = {}; }\n    if (transitionEnd === void 0) { transitionEnd = {}; }\n    target = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, target);\n    transitionEnd = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, transitionEnd);\n    var targetPositionalKeys = Object.keys(target).filter(isPositionalKey);\n    // We want to remove any transform values that could affect the element's bounding box before\n    // it's measured. We'll reapply these later.\n    var removedTransformValues = [];\n    var hasAttemptedToRemoveTransformValues = false;\n    var changedValueTypeKeys = [];\n    targetPositionalKeys.forEach(function (key) {\n        var value = visualElement.getValue(key);\n        if (!visualElement.hasValue(key))\n            return;\n        var from = origin[key];\n        var to = target[key];\n        var fromType = findDimensionValueType(from);\n        var toType;\n        // TODO: The current implementation of this basically throws an error\n        // if you try and do value conversion via keyframes. There's probably\n        // a way of doing this but the performance implications would need greater scrutiny,\n        // as it'd be doing multiple resize-remeasure operations.\n        if (isKeyframesTarget(to)) {\n            var numKeyframes = to.length;\n            for (var i = to[0] === null ? 1 : 0; i < numKeyframes; i++) {\n                if (!toType) {\n                    toType = findDimensionValueType(to[i]);\n                    Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* invariant */ \"a\"])(toType === fromType ||\n                        (isNumOrPxType(fromType) && isNumOrPxType(toType)), \"Keyframes must be of the same dimension as the current value\");\n                }\n                else {\n                    Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* invariant */ \"a\"])(findDimensionValueType(to[i]) === toType, \"All keyframes must be of the same type\");\n                }\n            }\n        }\n        else {\n            toType = findDimensionValueType(to);\n        }\n        if (fromType !== toType) {\n            // If they're both just number or px, convert them both to numbers rather than\n            // relying on resize/remeasure to convert (which is wasteful in this situation)\n            if (isNumOrPxType(fromType) && isNumOrPxType(toType)) {\n                var current = value.get();\n                if (typeof current === \"string\") {\n                    value.set(parseFloat(current));\n                }\n                if (typeof to === \"string\") {\n                    target[key] = parseFloat(to);\n                }\n                else if (Array.isArray(to) && toType === style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"]) {\n                    target[key] = to.map(parseFloat);\n                }\n            }\n            else if ((fromType === null || fromType === void 0 ? void 0 : fromType.transform) && (toType === null || toType === void 0 ? void 0 : toType.transform) &&\n                (from === 0 || to === 0)) {\n                // If one or the other value is 0, it's safe to coerce it to the\n                // type of the other without measurement\n                if (from === 0) {\n                    value.set(toType.transform(from));\n                }\n                else {\n                    target[key] = fromType.transform(to);\n                }\n            }\n            else {\n                // If we're going to do value conversion via DOM measurements, we first\n                // need to remove non-positional transform values that could affect the bbox measurements.\n                if (!hasAttemptedToRemoveTransformValues) {\n                    removedTransformValues = removeNonTranslationalTransform(visualElement);\n                    hasAttemptedToRemoveTransformValues = true;\n                }\n                changedValueTypeKeys.push(key);\n                transitionEnd[key] =\n                    transitionEnd[key] !== undefined\n                        ? transitionEnd[key]\n                        : target[key];\n                setAndResetVelocity(value, to);\n            }\n        }\n    });\n    if (changedValueTypeKeys.length) {\n        var convertedTarget = convertChangedValueTypes(target, visualElement, changedValueTypeKeys);\n        // If we removed transform values, reapply them before the next render\n        if (removedTransformValues.length) {\n            removedTransformValues.forEach(function (_a) {\n                var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(_a, 2), key = _b[0], value = _b[1];\n                visualElement.getValue(key).set(value);\n            });\n        }\n        // Reapply original values\n        visualElement.render();\n        return { target: convertedTarget, transitionEnd: transitionEnd };\n    }\n    else {\n        return { target: target, transitionEnd: transitionEnd };\n    }\n};\n/**\n * Convert value types for x/y/width/height/top/left/bottom/right\n *\n * Allows animation between `'auto'` -> `'100%'` or `0` -> `'calc(50% - 10vw)'`\n *\n * @internal\n */\nfunction unitConversion(visualElement, target, origin, transitionEnd) {\n    return hasPositionalKey(target)\n        ? checkAndConvertChangedValueTypes(visualElement, target, origin, transitionEnd)\n        : { target: target, transitionEnd: transitionEnd };\n}\n\n/**\n * Parse a DOM variant to make it animatable. This involves resolving CSS variables\n * and ensuring animations like \"20%\" => \"calc(50vw)\" are performed in pixels.\n */\nvar parseDomVariant = function (visualElement, target, origin, transitionEnd) {\n    var resolved = resolveCSSVariables(visualElement, target, transitionEnd);\n    target = resolved.target;\n    transitionEnd = resolved.transitionEnd;\n    return unitConversion(visualElement, target, origin, transitionEnd);\n};\n\n/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nvar isNumericalString = function (v) { return /^\\-?\\d*\\.?\\d+$/.test(v); };\n\nvar isCustomValue = function (v) {\n    return Boolean(v && typeof v === \"object\" && v.mix && v.toValue);\n};\nvar resolveFinalValueInKeyframes = function (v) {\n    // TODO maybe throw if v.length - 1 is placeholder token?\n    return isKeyframesTarget(v) ? v[v.length - 1] || 0 : v;\n};\n\n/**\n * Decides if the supplied variable is an array of variant labels\n */\nfunction isVariantLabels(v) {\n    return Array.isArray(v);\n}\n/**\n * Decides if the supplied variable is variant label\n */\nfunction isVariantLabel(v) {\n    return typeof v === \"string\" || isVariantLabels(v);\n}\n/**\n * Creates an object containing the latest state of every MotionValue on a VisualElement\n */\nfunction getCurrent(visualElement) {\n    var current = {};\n    visualElement.forEachValue(function (value, key) { return (current[key] = value.get()); });\n    return current;\n}\n/**\n * Creates an object containing the latest velocity of every MotionValue on a VisualElement\n */\nfunction getVelocity(visualElement) {\n    var velocity = {};\n    visualElement.forEachValue(function (value, key) { return (velocity[key] = value.getVelocity()); });\n    return velocity;\n}\n/**\n * Resovles a variant if it's a variant resolver\n */\nfunction resolveVariant(visualElement, definition, custom) {\n    if (typeof definition === \"string\") {\n        definition = visualElement.getVariant(definition);\n    }\n    return typeof definition === \"function\"\n        ? definition(custom !== null && custom !== void 0 ? custom : visualElement.getVariantPayload(), getCurrent(visualElement), getVelocity(visualElement))\n        : definition;\n}\n\n/**\n * Set VisualElement's MotionValue, creating a new MotionValue for it if\n * it doesn't exist.\n */\nfunction setMotionValue(visualElement, key, value) {\n    if (visualElement.hasValue(key)) {\n        visualElement.getValue(key).set(value);\n    }\n    else {\n        visualElement.addValue(key, motionValue(value));\n    }\n}\nfunction setTarget(visualElement, definition) {\n    var resolved = resolveVariant(visualElement, definition);\n    var _a = resolved\n        ? visualElement.makeTargetAnimatable(resolved, false)\n        : {}, _b = _a.transitionEnd, transitionEnd = _b === void 0 ? {} : _b, _c = _a.transition, target = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, [\"transitionEnd\", \"transition\"]);\n    target = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, target), transitionEnd);\n    for (var key in target) {\n        var value = resolveFinalValueInKeyframes(target[key]);\n        setMotionValue(visualElement, key, value);\n    }\n}\nfunction setVariants(visualElement, variantLabels) {\n    var reversedLabels = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])(variantLabels).reverse();\n    reversedLabels.forEach(function (key) {\n        var _a;\n        setTarget(visualElement, visualElement.getVariant(key));\n        (_a = visualElement.variantChildren) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            setVariants(child, variantLabels);\n        });\n    });\n}\nfunction setValues(visualElement, definition) {\n    if (Array.isArray(definition)) {\n        return setVariants(visualElement, definition);\n    }\n    else if (typeof definition === \"string\") {\n        return setVariants(visualElement, [definition]);\n    }\n    else {\n        setTarget(visualElement, definition);\n    }\n}\nfunction checkTargetForNewValues(visualElement, target, origin) {\n    var _a, _b;\n    var _c;\n    var newValueKeys = Object.keys(target).filter(function (key) { return !visualElement.hasValue(key); });\n    var numNewValues = newValueKeys.length;\n    if (!numNewValues)\n        return;\n    for (var i = 0; i < numNewValues; i++) {\n        var key = newValueKeys[i];\n        var targetValue = target[key];\n        var value = null;\n        // If this is a keyframes value, we can attempt to use the first value in the\n        // array as that's going to be the first value of the animation anyway\n        if (Array.isArray(targetValue)) {\n            value = targetValue[0];\n        }\n        // If it isn't a keyframes or the first keyframes value was set as `null`, read the\n        // value from the DOM. It might be worth investigating whether to check props (for SVG)\n        // or props.style (for HTML) if the value exists there before attempting to read.\n        if (value === null) {\n            var readValue = (_a = origin[key]) !== null && _a !== void 0 ? _a : visualElement.readNativeValue(key);\n            value = readValue !== undefined ? readValue : target[key];\n            Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* invariant */ \"a\"])(value !== null, \"No initial value for \\\"\" + key + \"\\\" can be inferred. Ensure an initial value for \\\"\" + key + \"\\\" is defined on the component.\");\n        }\n        if (typeof value === \"string\" && isNumericalString(value)) {\n            // If this is a number read as a string, ie \"0\" or \"200\", convert it to a number\n            value = parseFloat(value);\n        }\n        else if (!findValueType(value) && style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* complex */ \"c\"].test(targetValue)) {\n            // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n            value = style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* complex */ \"c\"].getAnimatableNone(targetValue);\n        }\n        visualElement.addValue(key, motionValue(value));\n        (_b = (_c = origin)[key]) !== null && _b !== void 0 ? _b : (_c[key] = value);\n        visualElement.baseTarget[key] = value;\n    }\n}\nfunction getOriginFromTransition(key, transition) {\n    if (!transition)\n        return;\n    var valueTransition = transition[key] || transition[\"default\"] || transition;\n    return valueTransition.from;\n}\nfunction getOrigin(target, transition, visualElement) {\n    var _a, _b;\n    var origin = {};\n    for (var key in target) {\n        origin[key] = (_a = getOriginFromTransition(key, transition)) !== null && _a !== void 0 ? _a : (_b = visualElement.getValue(key)) === null || _b === void 0 ? void 0 : _b.get();\n    }\n    return origin;\n}\n\nvar isMotionValue = function (value) {\n    return value instanceof MotionValue;\n};\n\n/**\n * A VisualElement for HTMLElements\n */\nvar HTMLVisualElement = /** @class */ (function (_super) {\n    Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __extends */ \"b\"])(HTMLVisualElement, _super);\n    function HTMLVisualElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         *\n         */\n        _this.defaultConfig = {\n            enableHardwareAcceleration: true,\n            allowTransformNone: true,\n        };\n        /**\n         * A mutable record of styles we want to apply directly to the rendered Element\n         * every frame. We use a mutable data structure to reduce GC during animations.\n         */\n        _this.style = {};\n        /**\n         * A record of styles we only want to apply via React. This gets set in useMotionValues\n         * and applied in the render function. I'd prefer this to live somewhere else to decouple\n         * VisualElement from React but works for now.\n         */\n        _this.reactStyle = {};\n        /**\n         * A mutable record of CSS variables we want to apply directly to the rendered Element\n         * every frame. We use a mutable data structure to reduce GC during animations.\n         */\n        _this.vars = {};\n        /**\n         * A mutable record of transforms we want to apply directly to the rendered Element\n         * every frame. We use a mutable data structure to reduce GC during animations.\n         */\n        _this.transform = {};\n        /**\n         * A mutable record of transform origins we want to apply directly to the rendered Element\n         * every frame. We use a mutable data structure to reduce GC during animations.\n         */\n        _this.transformOrigin = {};\n        /**\n         * A mutable record of transform keys we want to apply to the rendered Element. We order\n         * this to order transforms in the desired order. We use a mutable data structure to reduce GC during animations.\n         */\n        _this.transformKeys = [];\n        _this.config = _this.defaultConfig;\n        /**\n         * ========================================\n         * Layout\n         * ========================================\n         */\n        _this.isLayoutProjectionEnabled = false;\n        /**\n         * A set of layout update event handlers. These are only called once all layouts have been read,\n         * making it safe to perform DOM write operations.\n         */\n        _this.layoutUpdateListeners = new SubscriptionManager();\n        _this.layoutMeasureListeners = new SubscriptionManager();\n        _this.viewportBoxUpdateListeners = new SubscriptionManager();\n        /**\n         * Keep track of whether the viewport box has been updated since the last render.\n         * If it has, we want to fire the onViewportBoxUpdate listener.\n         */\n        _this.hasViewportBoxUpdated = false;\n        /**\n         * The visual target we want to project our component into on a given frame\n         * before applying transforms defined in `animate` or `style`.\n         *\n         * This is considered mutable to avoid object creation on each frame.\n         */\n        _this.targetBoxFinal = axisBox();\n        /**\n         * The overall scale of the local coordinate system as transformed by all parents\n         * of this component. We use this for scale correction on our calculated layouts\n         * and scale-affected values like `boxShadow`.\n         *\n         * This is considered mutable to avoid object creation on each frame.\n         */\n        _this.treeScale = { x: 1, y: 1 };\n        /**\n         * The delta between the boxCorrected and the desired\n         * targetBox (before user-set transforms are applied). The calculated output will be\n         * handed to the renderer and used as part of the style correction calculations, for\n         * instance calculating how to display the desired border-radius correctly.\n         *\n         * This is considered mutable to avoid object creation on each frame.\n         */\n        _this.delta = delta();\n        /**\n         * The delta between the boxCorrected and the desired targetBoxFinal. The calculated\n         * output will be handed to the renderer and used to project the boxCorrected into\n         * the targetBoxFinal.\n         *\n         * This is considered mutable to avoid object creation on each frame.\n         */\n        _this.deltaFinal = delta();\n        /**\n         * The computed transform string to apply deltaFinal to the element. Currently this is only\n         * being used to diff and decide whether to render on the current frame, but a minor optimisation\n         * could be to provide this to the buildHTMLStyle function.\n         */\n        _this.deltaTransform = identityProjection;\n        /**\n         *\n         */\n        _this.stopLayoutAxisAnimation = {\n            x: function () { },\n            y: function () { },\n        };\n        _this.isTargetBoxLocked = false;\n        _this.updateLayoutDelta = function () {\n            _this.isLayoutProjectionEnabled && _this.box && _this.updateLayoutDeltas();\n            /**\n             * Ensure all children layouts are also updated.\n             *\n             * This uses a pre-bound function executor rather than a lamda to avoid creating a new function\n             * multiple times per frame (source of mid-animation GC)\n             */\n            _this.children.forEach(fireUpdateLayoutDelta);\n        };\n        return _this;\n    }\n    /**\n     * When a value is removed, we want to make sure it's removed from all rendered data structures.\n     */\n    HTMLVisualElement.prototype.removeValue = function (key) {\n        _super.prototype.removeValue.call(this, key);\n        delete this.vars[key];\n        delete this.style[key];\n    };\n    /**\n     * Empty the mutable data structures by re-creating them. We can do this every React render\n     * as the comparative workload to the rest of the render is very low and this is also when\n     * we want to reflect values that might have been removed by the render.\n     */\n    HTMLVisualElement.prototype.clean = function () {\n        this.style = {};\n        this.vars = {};\n        this.transform = {};\n    };\n    HTMLVisualElement.prototype.updateConfig = function (config) {\n        if (config === void 0) { config = {}; }\n        this.config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, this.defaultConfig), config);\n    };\n    /**\n     * Read a value directly from the HTMLElement style.\n     */\n    HTMLVisualElement.prototype.read = function (key) {\n        var computedStyle = this.getComputedStyle();\n        return ((isCSSVariable(key)\n            ? computedStyle.getPropertyValue(key)\n            : computedStyle[key]) || 0);\n    };\n    HTMLVisualElement.prototype.addValue = function (key, value) {\n        _super.prototype.addValue.call(this, key, value);\n        // If we have rotate values we want to foce the layoutOrigin used in layout projection\n        // to the center of the element.\n        if (key.startsWith(\"rotate\"))\n            this.layoutOrigin = 0.5;\n    };\n    /**\n     * Read a value directly from the HTMLElement in case it's not defined by a Motion\n     * prop. If it's a transform, we just return a pre-defined default value as reading these\n     * out of a matrix is either error-prone or can incur a big payload for little benefit.\n     */\n    HTMLVisualElement.prototype.readNativeValue = function (key) {\n        if (isTransformProp(key)) {\n            var defaultValueType = getDefaultValueType(key);\n            return defaultValueType ? defaultValueType.default || 0 : 0;\n        }\n        else {\n            return this.read(key);\n        }\n    };\n    HTMLVisualElement.prototype.getBaseValue = function (key, props) {\n        var _a;\n        var style = (_a = props.style) === null || _a === void 0 ? void 0 : _a[key];\n        return style !== undefined && !isMotionValue(style)\n            ? style\n            : _super.prototype.getBaseValue.call(this, key, props);\n    };\n    /**\n     * Ensure that HTML and Framer-specific value types like `px`->`%` and `Color`\n     * can be animated by Motion.\n     */\n    HTMLVisualElement.prototype.makeTargetAnimatable = function (_a, parseDOMValues) {\n        if (parseDOMValues === void 0) { parseDOMValues = true; }\n        var transition = _a.transition, transitionEnd = _a.transitionEnd, target = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, [\"transition\", \"transitionEnd\"]);\n        var transformValues = this.config.transformValues;\n        var origin = getOrigin(target, transition || {}, this);\n        /**\n         * If Framer has provided a function to convert `Color` etc value types, convert them\n         */\n        if (transformValues) {\n            if (transitionEnd)\n                transitionEnd = transformValues(transitionEnd);\n            if (target)\n                target = transformValues(target);\n            if (origin)\n                origin = transformValues(origin);\n        }\n        if (parseDOMValues) {\n            checkTargetForNewValues(this, target, origin);\n            var parsed = parseDomVariant(this, target, origin, transitionEnd);\n            transitionEnd = parsed.transitionEnd;\n            target = parsed.target;\n        }\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({ transition: transition,\n            transitionEnd: transitionEnd }, target);\n    };\n    HTMLVisualElement.prototype.enableLayoutProjection = function () {\n        this.isLayoutProjectionEnabled = true;\n    };\n    HTMLVisualElement.prototype.hide = function () {\n        if (this.isVisible === false)\n            return;\n        this.isVisible = false;\n        this.scheduleRender();\n    };\n    HTMLVisualElement.prototype.show = function () {\n        if (this.isVisible === true)\n            return;\n        this.isVisible = true;\n        this.scheduleRender();\n    };\n    /**\n     * Register an event listener to fire when the layout is updated. We might want to expose support\n     * for this via a `motion` prop.\n     */\n    HTMLVisualElement.prototype.onLayoutUpdate = function (callback) {\n        return this.layoutUpdateListeners.add(callback);\n    };\n    HTMLVisualElement.prototype.onLayoutMeasure = function (callback) {\n        return this.layoutMeasureListeners.add(callback);\n    };\n    HTMLVisualElement.prototype.onViewportBoxUpdate = function (callback) {\n        return this.viewportBoxUpdateListeners.add(callback);\n    };\n    /**\n     * To be called when all layouts are successfully updated. In turn we can notify layoutUpdate\n     * subscribers.\n     */\n    HTMLVisualElement.prototype.layoutReady = function (config) {\n        this.layoutUpdateListeners.notify(this.box, this.prevViewportBox || this.box, config);\n    };\n    /**\n     * Measure and return the Element's bounding box. We convert it to a AxisBox2D\n     * structure to make it easier to work on each individual axis generically.\n     */\n    HTMLVisualElement.prototype.getBoundingBox = function () {\n        var transformPagePoint = this.config.transformPagePoint;\n        return getBoundingBox(this.element, transformPagePoint);\n    };\n    HTMLVisualElement.prototype.getBoundingBoxWithoutTransforms = function () {\n        var bbox = this.getBoundingBox();\n        removeBoxTransforms(bbox, this.latest);\n        return bbox;\n    };\n    /**\n     * Return the computed style after a render.\n     */\n    HTMLVisualElement.prototype.getComputedStyle = function () {\n        return window.getComputedStyle(this.element);\n    };\n    /**\n     * Record the bounding box as it exists before a re-render.\n     */\n    HTMLVisualElement.prototype.snapshotBoundingBox = function () {\n        this.prevViewportBox = this.getBoundingBoxWithoutTransforms();\n        /**\n         * Update targetBox to match the prevViewportBox. This is just to ensure\n         * that targetBox is affected by scroll in the same way as the measured box\n         */\n        this.rebaseTargetBox(false, this.prevViewportBox);\n    };\n    HTMLVisualElement.prototype.rebaseTargetBox = function (force, box) {\n        var _this = this;\n        if (force === void 0) { force = false; }\n        if (box === void 0) { box = this.box; }\n        var _a = this.getAxisProgress(), x = _a.x, y = _a.y;\n        var shouldRebase = this.box &&\n            !this.isTargetBoxLocked &&\n            !x.isAnimating() &&\n            !y.isAnimating();\n        if (force || shouldRebase) {\n            eachAxis(function (axis) {\n                var _a = box[axis], min = _a.min, max = _a.max;\n                _this.setAxisTarget(axis, min, max);\n            });\n        }\n    };\n    HTMLVisualElement.prototype.measureLayout = function () {\n        var _this = this;\n        this.box = this.getBoundingBox();\n        this.boxCorrected = copyAxisBox(this.box);\n        if (!this.targetBox)\n            this.targetBox = copyAxisBox(this.box);\n        this.layoutMeasureListeners.notify(this.box, this.prevViewportBox || this.box);\n        framesync__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"b\"].update(function () { return _this.rebaseTargetBox(); });\n    };\n    HTMLVisualElement.prototype.lockTargetBox = function () {\n        this.isTargetBoxLocked = true;\n    };\n    HTMLVisualElement.prototype.unlockTargetBox = function () {\n        this.stopLayoutAnimation();\n        this.isTargetBoxLocked = false;\n    };\n    /**\n     * Reset the transform on the current Element. This is called as part\n     * of a batched process across the entire layout tree. To remove this write\n     * cycle it'd be interesting to see if it's possible to \"undo\" all the current\n     * layout transforms up the tree in the same way this.getBoundingBoxWithoutTransforms\n     * works\n     */\n    HTMLVisualElement.prototype.resetTransform = function () {\n        var transformTemplate = this.config.transformTemplate;\n        this.element.style.transform = transformTemplate\n            ? transformTemplate({}, \"\")\n            : \"none\";\n        // Ensure that whatever happens next, we restore our transform\n        this.scheduleRender();\n    };\n    /**\n     * Set new min/max boundaries to project an axis into\n     */\n    HTMLVisualElement.prototype.setAxisTarget = function (axis, min, max) {\n        var targetAxis = this.targetBox[axis];\n        targetAxis.min = min;\n        targetAxis.max = max;\n        // Flag that we want to fire the onViewportBoxUpdate event handler\n        this.hasViewportBoxUpdated = true;\n        this.rootParent.scheduleUpdateLayoutDelta();\n    };\n    HTMLVisualElement.prototype.getAxisProgress = function () {\n        if (!this.axisProgress) {\n            this.axisProgress = {\n                x: motionValue(0),\n                y: motionValue(0),\n            };\n        }\n        return this.axisProgress;\n    };\n    /**\n     *\n     */\n    HTMLVisualElement.prototype.startLayoutAxisAnimation = function (axis, transition) {\n        var _this = this;\n        var _a;\n        var progress = this.getAxisProgress()[axis];\n        var _b = this.targetBox[axis], min = _b.min, max = _b.max;\n        var length = max - min;\n        progress.clearListeners();\n        progress.set(min);\n        progress.set(min); // Set twice to hard-reset velocity\n        progress.onChange(function (v) { return _this.setAxisTarget(axis, v, v + length); });\n        return (_a = this.animateMotionValue) === null || _a === void 0 ? void 0 : _a.call(this, axis, progress, 0, transition);\n    };\n    HTMLVisualElement.prototype.stopLayoutAnimation = function () {\n        var _this = this;\n        eachAxis(function (axis) { return _this.getAxisProgress()[axis].stop(); });\n    };\n    HTMLVisualElement.prototype.withoutTransform = function (callback) {\n        if (this.isLayoutProjectionEnabled) {\n            this.resetTransform();\n        }\n        if (this.parent) {\n            this.parent.withoutTransform(callback);\n        }\n        else {\n            callback();\n        }\n        if (this.isLayoutProjectionEnabled) {\n            this.element.style.transform = this.style.transform;\n        }\n    };\n    /**\n     * Update the layout deltas to reflect the relative positions of the layout\n     * and the desired target box\n     */\n    HTMLVisualElement.prototype.updateLayoutDeltas = function () {\n        /**\n         * Reset the corrected box with the latest values from box, as we're then going\n         * to perform mutative operations on it.\n         */\n        resetBox(this.boxCorrected, this.box);\n        var prevTreeScaleX = this.treeScale.x;\n        var prevTreeScaleY = this.treeScale.y;\n        /**\n         * Apply all the parent deltas to this box to produce the corrected box. This\n         * is the layout box, as it will appear on screen as a result of the transforms of its parents.\n         */\n        applyTreeDeltas(this.boxCorrected, this.treeScale, this.treePath);\n        /**\n         * Update the delta between the corrected box and the target box before user-set transforms were applied.\n         * This will allow us to calculate the corrected borderRadius and boxShadow to compensate\n         * for our layout reprojection, but still allow them to be scaled correctly by the user.\n         * It might be that to simplify this we may want to accept that user-set scale is also corrected\n         * and we wouldn't have to keep and calc both deltas, OR we could support a user setting\n         * to allow people to choose whether these styles are corrected based on just the\n         * layout reprojection or the final bounding box.\n         */\n        updateBoxDelta(this.delta, this.boxCorrected, this.targetBox, this.layoutOrigin);\n        /**\n         * If we have a listener for the viewport box, fire it.\n         */\n        this.hasViewportBoxUpdated &&\n            this.viewportBoxUpdateListeners.notify(this.targetBox, this.delta);\n        this.hasViewportBoxUpdated = false;\n        /**\n         * Ensure this element renders on the next frame if the projection transform has changed.\n         */\n        var deltaTransform = buildLayoutProjectionTransform(this.delta, this.treeScale);\n        if (deltaTransform !== this.deltaTransform ||\n            // Also compare calculated treeScale, for values that rely on only this for scale correction.\n            prevTreeScaleX !== this.treeScale.x ||\n            prevTreeScaleY !== this.treeScale.y) {\n            this.scheduleRender();\n        }\n        this.deltaTransform = deltaTransform;\n    };\n    HTMLVisualElement.prototype.updateTransformDeltas = function () {\n        if (!this.isLayoutProjectionEnabled || !this.box)\n            return;\n        /**\n         * Apply the latest user-set transforms to the targetBox to produce the targetBoxFinal.\n         * This is the final box that we will then project into by calculating a transform delta and\n         * applying it to the corrected box.\n         */\n        applyBoxTransforms(this.targetBoxFinal, this.targetBox, this.latest);\n        /**\n         * Update the delta between the corrected box and the final target box, after\n         * user-set transforms are applied to it. This will be used by the renderer to\n         * create a transform style that will reproject the element from its actual layout\n         * into the desired bounding box.\n         */\n        updateBoxDelta(this.deltaFinal, this.boxCorrected, this.targetBoxFinal, this.layoutOrigin);\n    };\n    /**\n     * ========================================\n     * Build & render\n     * ========================================\n     */\n    /**\n     * Build a style prop using the latest resolved MotionValues\n     */\n    HTMLVisualElement.prototype.build = function () {\n        this.updateTransformDeltas();\n        if (this.isVisible !== undefined) {\n            this.style.visibility = this.isVisible ? \"visible\" : \"hidden\";\n        }\n        buildHTMLStyles(this.latest, this.style, this.vars, this.transform, this.transformOrigin, this.transformKeys, this.config, this.isLayoutProjectionEnabled && !!this.box, this.delta, this.deltaFinal, this.treeScale, this.targetBoxFinal);\n    };\n    /**\n     * Render the Element by rebuilding and applying the latest styles and vars.\n     */\n    HTMLVisualElement.prototype.render = function () {\n        // Rebuild the latest animated values into style and vars caches.\n        this.build();\n        // Directly assign style into the Element's style prop. In tests Object.assign is the\n        // fastest way to assign styles.\n        Object.assign(this.element.style, this.style);\n        // Loop over any CSS variables and assign those.\n        for (var key in this.vars) {\n            this.element.style.setProperty(key, this.vars[key]);\n        }\n    };\n    return HTMLVisualElement;\n}(VisualElement));\n/**\n * Pre-bound version of updateLayoutDelta so we're not creating a new function multiple\n * times per frame.\n */\nvar fireUpdateLayoutDelta = function (child) {\n    return child.updateLayoutDelta();\n};\n\n/**\n * Creates a constant value over the lifecycle of a component.\n *\n * Even if `useMemo` is provided an empty array as its final argument, it doesn't offer\n * a guarantee that it won't re-run for performance reasons later on. By using `useConstant`\n * you can ensure that initialisers don't execute twice or more.\n */\nfunction useConstant(init) {\n    var ref = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(null);\n    if (ref.current === null) {\n        ref.current = init();\n    }\n    return ref.current;\n}\n\nfunction calcOrigin$1(origin, offset, size) {\n    return typeof origin === \"string\"\n        ? origin\n        : style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"].transform(offset + size * origin);\n}\n/**\n * The SVG transform origin defaults are different to CSS and is less intuitive,\n * so we use the measured dimensions of the SVG to reconcile these.\n */\nfunction calcSVGTransformOrigin(dimensions, originX, originY) {\n    var pxOriginX = calcOrigin$1(originX, dimensions.x, dimensions.width);\n    var pxOriginY = calcOrigin$1(originY, dimensions.y, dimensions.height);\n    return pxOriginX + \" \" + pxOriginY;\n}\n\n// Convert a progress 0-1 to a pixels value based on the provided length\nvar progressToPixels = function (progress, length) {\n    return style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* px */ \"j\"].transform(progress * length);\n};\nvar dashKeys = {\n    offset: \"stroke-dashoffset\",\n    array: \"stroke-dasharray\",\n};\nvar camelKeys = {\n    offset: \"strokeDashoffset\",\n    array: \"strokeDasharray\",\n};\n/**\n * Build SVG path properties. Uses the path's measured length to convert\n * our custom pathLength, pathSpacing and pathOffset into stroke-dashoffset\n * and stroke-dasharray attributes.\n *\n * This function is mutative to reduce per-frame GC.\n */\nfunction buildSVGPath(attrs, totalLength, length, spacing, offset, useDashCase) {\n    if (spacing === void 0) { spacing = 1; }\n    if (offset === void 0) { offset = 0; }\n    if (useDashCase === void 0) { useDashCase = true; }\n    // We use dash case when setting attributes directly to the DOM node and camel case\n    // when defining props on a React component.\n    var keys = useDashCase ? dashKeys : camelKeys;\n    // Build the dash offset\n    attrs[keys.offset] = progressToPixels(-offset, totalLength);\n    // Build the dash array\n    var pathLength = progressToPixels(length, totalLength);\n    var pathSpacing = progressToPixels(spacing, totalLength);\n    attrs[keys.array] = pathLength + \" \" + pathSpacing;\n}\n\nvar unmeasured = { x: 0, y: 0, width: 0, height: 0 };\n/**\n * Build SVG visual attrbutes, like cx and style.transform\n */\nfunction buildSVGAttrs(_a, style, vars, attrs, transform, transformOrigin, transformKeys, config, dimensions, totalPathLength, isLayoutProjectionEnabled, delta, deltaFinal, treeScale, targetBox) {\n    var attrX = _a.attrX, attrY = _a.attrY, originX = _a.originX, originY = _a.originY, pathLength = _a.pathLength, _b = _a.pathSpacing, pathSpacing = _b === void 0 ? 1 : _b, _c = _a.pathOffset, pathOffset = _c === void 0 ? 0 : _c, \n    // This is object creation, which we try to avoid per-frame.\n    latest = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n    /**\n     * With SVG we treat all animated values as attributes rather than CSS, so we build into attrs\n     */\n    buildHTMLStyles(latest, attrs, vars, transform, transformOrigin, transformKeys, config, isLayoutProjectionEnabled, delta, deltaFinal, treeScale, targetBox);\n    /**\n     * However, we apply transforms as CSS transforms. So if we detect a transform we take it from attrs\n     * and copy it into style.\n     */\n    if (attrs.transform) {\n        style.transform = attrs.transform;\n        delete attrs.transform;\n    }\n    // Parse transformOrigin\n    if (originX !== undefined || originY !== undefined || style.transform) {\n        style.transformOrigin = calcSVGTransformOrigin(dimensions || unmeasured, originX !== undefined ? originX : 0.5, originY !== undefined ? originY : 0.5);\n    }\n    // Treat x/y not as shortcuts but as actual attributes\n    if (attrX !== undefined)\n        attrs.x = attrX;\n    if (attrY !== undefined)\n        attrs.y = attrY;\n    // Build SVG path if one has been measured\n    if (totalPathLength !== undefined && pathLength !== undefined) {\n        buildSVGPath(attrs, totalPathLength, pathLength, pathSpacing, pathOffset, false);\n    }\n    return attrs;\n}\n\n/**\n * A set of attribute names that are always read/written as camel case.\n */\nvar camelCaseAttributes = new Set([\n    \"baseFrequency\",\n    \"diffuseConstant\",\n    \"kernelMatrix\",\n    \"kernelUnitLength\",\n    \"keySplines\",\n    \"keyTimes\",\n    \"limitingConeAngle\",\n    \"markerHeight\",\n    \"markerWidth\",\n    \"numOctaves\",\n    \"targetX\",\n    \"targetY\",\n    \"surfaceScale\",\n    \"specularConstant\",\n    \"specularExponent\",\n    \"stdDeviation\",\n    \"tableValues\",\n    \"viewBox\",\n]);\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = \"$1-$2\";\n/**\n * Convert camelCase to dash-case properties.\n */\nvar camelToDash = function (str) {\n    return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\n/**\n * A VisualElement for SVGElements. Inherits from and extends HTMLVisualElement as the two\n * share data structures.\n */\nvar SVGVisualElement = /** @class */ (function (_super) {\n    Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __extends */ \"b\"])(SVGVisualElement, _super);\n    function SVGVisualElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * A mutable record of attributes we want to apply directly to the rendered Element\n         * every frame. We use a mutable data structure to reduce GC during animations.\n         */\n        _this.attrs = {};\n        /**\n         * We disable hardware acceleration for SVG transforms as they're not currently able to be accelerated.\n         */\n        _this.defaultConfig = {\n            enableHardwareAcceleration: false,\n        };\n        /**\n         * Without duplicating this call from HTMLVisualElement we end up with HTMLVisualElement.defaultConfig\n         * being assigned to config\n         */\n        _this.config = _this.defaultConfig;\n        return _this;\n    }\n    /**\n     * Measure the SVG element on mount. This can affect page rendering so there might be a\n     * better time to perform this - for instance dynamically only if there's a transform-origin dependent\n     * transform being set (like rotate)\n     */\n    SVGVisualElement.prototype.mount = function (element) {\n        _super.prototype.mount.call(this, element);\n        this.measure();\n    };\n    /**\n     * Update the SVG dimensions and path length\n     */\n    SVGVisualElement.prototype.measure = function () {\n        var _this = this;\n        try {\n            this.dimensions =\n                typeof this.element.getBBox ===\n                    \"function\"\n                    ? this.element.getBBox()\n                    : this.element.getBoundingClientRect();\n        }\n        catch (e) {\n            // Most likely trying to measure an unrendered element under Firefox\n            this.dimensions = { x: 0, y: 0, width: 0, height: 0 };\n        }\n        if (isPath(this.element)) {\n            this.totalPathLength = this.element.getTotalLength();\n        }\n        /**\n         * Ensure we render the element as soon as possible to reflect the measured dimensions.\n         * Preferably this would happen synchronously but we put it in rAF to prevent layout thrashing.\n         */\n        framesync__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"b\"].render(function () { return _this.render(); });\n    };\n    SVGVisualElement.prototype.getBaseValue = function (key, props) {\n        var prop = props[key];\n        return prop !== undefined && !isMotionValue(prop)\n            ? prop\n            : _super.prototype.getBaseValue.call(this, key, props);\n    };\n    /**\n     * Empty the mutable data structures in case attrs have been removed between renders.\n     */\n    SVGVisualElement.prototype.clean = function () {\n        _super.prototype.clean.call(this);\n        this.attrs = {};\n    };\n    /**\n     * Read an attribute directly from the SVGElement\n     */\n    SVGVisualElement.prototype.read = function (key) {\n        key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n        return this.element.getAttribute(key);\n    };\n    SVGVisualElement.prototype.build = function () {\n        this.updateTransformDeltas();\n        buildSVGAttrs(this.latest, this.style, this.vars, this.attrs, this.transform, this.transformOrigin, this.transformKeys, this.config, this.dimensions, this.totalPathLength, this.isLayoutProjectionEnabled && !!this.box, this.delta, this.deltaFinal, this.treeScale, this.targetBoxFinal);\n    };\n    SVGVisualElement.prototype.render = function () {\n        // Update HTML styles and CSS variables\n        _super.prototype.render.call(this);\n        // Loop through attributes and apply them to the SVGElement\n        for (var key in this.attrs) {\n            this.element.setAttribute(!camelCaseAttributes.has(key) ? camelToDash(key) : key, this.attrs[key]);\n        }\n    };\n    return SVGVisualElement;\n}(HTMLVisualElement));\nfunction isPath(element) {\n    return element.tagName === \"path\";\n}\n\n/**\n * @internal\n */\n/**\n * @internal\n */\nvar svgElements = [\n    \"animate\",\n    \"circle\",\n    \"clipPath\",\n    \"defs\",\n    \"desc\",\n    \"ellipse\",\n    \"feBlend\",\n    \"feColorMatrix\",\n    \"feComponentTransfer\",\n    \"feComposite\",\n    \"feConvolveMatrix\",\n    \"feDiffuseLighting\",\n    \"feDisplacementMap\",\n    \"feDistantLight\",\n    \"feDropShadow\",\n    \"feFlood\",\n    \"feFuncA\",\n    \"feFuncB\",\n    \"feFuncG\",\n    \"feFuncR\",\n    \"feGaussianBlur\",\n    \"feImage\",\n    \"feMerge\",\n    \"feMergeNode\",\n    \"feMorphology\",\n    \"feOffset\",\n    \"fePointLight\",\n    \"feSpecularLighting\",\n    \"feSpotLight\",\n    \"feTile\",\n    \"feTurbulence\",\n    \"filter\",\n    \"foreignObject\",\n    \"g\",\n    \"image\",\n    \"line\",\n    \"linearGradient\",\n    \"marker\",\n    \"mask\",\n    \"metadata\",\n    \"path\",\n    \"pattern\",\n    \"polygon\",\n    \"polyline\",\n    \"radialGradient\",\n    \"rect\",\n    \"stop\",\n    \"svg\",\n    \"switch\",\n    \"symbol\",\n    \"text\",\n    \"textPath\",\n    \"tspan\",\n    \"use\",\n    \"view\",\n];\n\nvar svgTagNames = new Set(svgElements);\n/**\n * Determine whether this is a HTML or SVG component based on if the provided\n * Component is a string and a recognised SVG tag. A potentially better way to\n * do this would be to offer a `motion.customSVG` function and determine this\n * when we generate the `motion.circle` etc components.\n */\nfunction isSVGComponent(Component) {\n    return typeof Component === \"string\" && svgTagNames.has(Component);\n}\n\n/**\n * @public\n */\nvar PresenceContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createContext\"])(null);\n\nvar MotionContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createContext\"])({\n    variantContext: {},\n});\nfunction useVariantContext() {\n    return Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(MotionContext).variantContext;\n}\nfunction useVisualElementContext() {\n    return Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(MotionContext).visualElement;\n}\n\n/**\n * @internal\n */\nvar LayoutGroupContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createContext\"])(null);\n\n/**\n * DOM-flavoured variation of the useVisualElement hook. Used to create either a HTMLVisualElement\n * or SVGVisualElement for the component.\n *\n */\nvar useDomVisualElement = function (Component, props, isStatic, ref) {\n    var parent = useVisualElementContext();\n    var visualElement = useConstant(function () {\n        var DOMVisualElement = isSVGComponent(Component)\n            ? SVGVisualElement\n            : HTMLVisualElement;\n        return new DOMVisualElement(parent, ref);\n    });\n    /**\n     * If this is a static component, for instance on the Framer canvas, we essentially want to\n     * treat it as a new component every render.\n     * TODO: This shouldn't live in a DOM-specific hook but there'll be a better sense of where this\n     * and much of this hook should live when creating a new type of VisualElement (e.g Three.js).\n     */\n    if (isStatic) {\n        visualElement.values.clear();\n        visualElement.latest = {};\n    }\n    visualElement.updateConfig(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, visualElement.config), { enableHardwareAcceleration: !isStatic }), props));\n    var layoutGroupId = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(LayoutGroupContext);\n    visualElement.layoutId =\n        layoutGroupId && props.layoutId\n            ? layoutGroupId + \"-\" + props.layoutId\n            : props.layoutId;\n    var presenceContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(PresenceContext);\n    /**\n     * Update VisualElement with presence data.\n     */\n    var isPresent = presenceContext === null ? true : presenceContext.isPresent;\n    visualElement.isPresent =\n        props.isPresent !== undefined ? props.isPresent : isPresent;\n    /**\n     *\n     */\n    var presenceId = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.id;\n    visualElement.isPresenceRoot = !parent || parent.presenceId !== presenceId;\n    /**\n     * TODO: Investigate if we need this\n     */\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n        if (props.onViewportBoxUpdate) {\n            return visualElement.onViewportBoxUpdate(props.onViewportBoxUpdate);\n        }\n    }, [props.onViewportBoxUpdate]);\n    return visualElement;\n};\n\n/**\n * @public\n */\nvar MotionConfigContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createContext\"])({\n    transformPagePoint: function (p) { return p; },\n    features: [],\n    isStatic: false,\n});\n/**\n * MotionConfig can be used in combination with the `m` component to cut bundle size\n * and dynamically load only the features you use.\n *\n * ```jsx\n * import {\n *   m as motion,\n *   AnimationFeature,\n *   MotionConfig\n * } from \"framer-motion\"\n *\n * export function App() {\n *   return (\n *     <MotionConfig features={[AnimationFeature]}>\n *       <motion.div animate={{ x: 100 }} />\n *     </MotionConfig>\n *   )\n * }\n * ```\n *\n * @public\n */\nfunction MotionConfig(_a) {\n    var children = _a.children, _b = _a.features, features = _b === void 0 ? [] : _b, props = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, [\"children\", \"features\"]);\n    var pluginContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(MotionConfigContext);\n    var loadedFeatures = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])(pluginContext.features, features);\n    // We do want to rerender children when the number of loaded features changes\n    var value = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useMemo\"])(function () { return ({ features: loadedFeatures }); }, [\n        loadedFeatures.length,\n    ]);\n    // Mutative to prevent triggering rerenders in all listening\n    // components every time this component renders\n    for (var key in props) {\n        value[key] = props[key];\n    }\n    return (Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(MotionConfigContext.Provider, { value: value }, children));\n}\n\nfunction useUnmountEffect(callback) {\n    return Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () { return function () { return callback(); }; }, []);\n}\n\nfunction addDomEvent(target, eventName, handler, options) {\n    target.addEventListener(eventName, handler, options);\n    return function () { return target.removeEventListener(eventName, handler, options); };\n}\n/**\n * Attaches an event listener directly to the provided DOM element.\n *\n * Bypassing React's event system can be desirable, for instance when attaching non-passive\n * event handlers.\n *\n * ```jsx\n * const ref = useRef(null)\n *\n * useDomEvent(ref, 'wheel', onWheel, { passive: false })\n *\n * return <div ref={ref} />\n * ```\n *\n * @param ref - React.RefObject that's been provided to the element you want to bind the listener to.\n * @param eventName - Name of the event you want listen for.\n * @param handler - Function to fire when receiving the event.\n * @param options - Options to pass to `Event.addEventListener`.\n *\n * @public\n */\nfunction useDomEvent(ref, eventName, handler, options) {\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n        var element = ref.current;\n        if (handler && element) {\n            return addDomEvent(element, eventName, handler, options);\n        }\n    }, [ref, eventName, handler, options]);\n}\n\nfunction isMouseEvent(event) {\n    // PointerEvent inherits from MouseEvent so we can't use a straight instanceof check.\n    if (typeof PointerEvent !== \"undefined\" && event instanceof PointerEvent) {\n        return !!(event.pointerType === \"mouse\");\n    }\n    return event instanceof MouseEvent;\n}\nfunction isTouchEvent(event) {\n    var hasTouches = !!event.touches;\n    return hasTouches;\n}\n\n/**\n * Filters out events not attached to the primary pointer (currently left mouse button)\n * @param eventHandler\n */\nfunction filterPrimaryPointer(eventHandler) {\n    return function (event) {\n        var isMouseEvent = event instanceof MouseEvent;\n        var isPrimaryPointer = !isMouseEvent ||\n            (isMouseEvent && event.button === 0);\n        if (isPrimaryPointer) {\n            eventHandler(event);\n        }\n    };\n}\nvar defaultPagePoint = { pageX: 0, pageY: 0 };\nfunction pointFromTouch(e, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    var primaryTouch = e.touches[0] || e.changedTouches[0];\n    var point = primaryTouch || defaultPagePoint;\n    return {\n        x: point[pointType + \"X\"],\n        y: point[pointType + \"Y\"],\n    };\n}\nfunction pointFromMouse(point, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    return {\n        x: point[pointType + \"X\"],\n        y: point[pointType + \"Y\"],\n    };\n}\nfunction extractEventInfo(event, pointType) {\n    if (pointType === void 0) { pointType = \"page\"; }\n    return {\n        point: isTouchEvent(event)\n            ? pointFromTouch(event, pointType)\n            : pointFromMouse(event, pointType),\n    };\n}\nfunction getViewportPointFromEvent(event) {\n    return extractEventInfo(event, \"client\");\n}\nvar wrapHandler = function (handler, shouldFilterPrimaryPointer) {\n    if (shouldFilterPrimaryPointer === void 0) { shouldFilterPrimaryPointer = false; }\n    var listener = function (event) {\n        return handler(event, extractEventInfo(event));\n    };\n    return shouldFilterPrimaryPointer\n        ? filterPrimaryPointer(listener)\n        : listener;\n};\n\nvar isBrowser = typeof window !== \"undefined\";\n// We check for event support via functions in case they've been mocked by a testing suite.\nvar supportsPointerEvents = function () {\n    return isBrowser && window.onpointerdown === null;\n};\nvar supportsTouchEvents = function () {\n    return isBrowser && window.ontouchstart === null;\n};\nvar supportsMouseEvents = function () {\n    return isBrowser && window.onmousedown === null;\n};\n\nvar mouseEventNames = {\n    pointerdown: \"mousedown\",\n    pointermove: \"mousemove\",\n    pointerup: \"mouseup\",\n    pointercancel: \"mousecancel\",\n    pointerover: \"mouseover\",\n    pointerout: \"mouseout\",\n    pointerenter: \"mouseenter\",\n    pointerleave: \"mouseleave\",\n};\nvar touchEventNames = {\n    pointerdown: \"touchstart\",\n    pointermove: \"touchmove\",\n    pointerup: \"touchend\",\n    pointercancel: \"touchcancel\",\n};\nfunction getPointerEventName(name) {\n    if (supportsPointerEvents()) {\n        return name;\n    }\n    else if (supportsTouchEvents()) {\n        return touchEventNames[name];\n    }\n    else if (supportsMouseEvents()) {\n        return mouseEventNames[name];\n    }\n    return name;\n}\nfunction addPointerEvent(target, eventName, handler, options) {\n    return addDomEvent(target, getPointerEventName(eventName), wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\nfunction usePointerEvent(ref, eventName, handler, options) {\n    return useDomEvent(ref, getPointerEventName(eventName), handler && wrapHandler(handler, eventName === \"pointerdown\"), options);\n}\n\n/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\nvar secondsToMilliseconds = function (seconds) { return seconds * 1000; };\n\n/**\n * @internal\n */\nvar PanSession = /** @class */ (function () {\n    function PanSession(event, handlers, _a) {\n        var _this = this;\n        var transformPagePoint = (_a === void 0 ? {} : _a).transformPagePoint;\n        /**\n         * @internal\n         */\n        this.startEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEvent = null;\n        /**\n         * @internal\n         */\n        this.lastMoveEventInfo = null;\n        /**\n         * @internal\n         */\n        this.handlers = {};\n        this.updatePoint = function () {\n            if (!(_this.lastMoveEvent && _this.lastMoveEventInfo))\n                return;\n            var info = getPanInfo(_this.lastMoveEventInfo, _this.history);\n            var isPanStarted = _this.startEvent !== null;\n            // Only start panning if the offset is larger than 3 pixels. If we make it\n            // any larger than this we'll want to reset the pointer history\n            // on the first update to avoid visual snapping to the cursoe.\n            var isDistancePastThreshold = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* distance */ \"n\"])(info.offset, { x: 0, y: 0 }) >= 3;\n            if (!isPanStarted && !isDistancePastThreshold)\n                return;\n            var point = info.point;\n            var timestamp = Object(framesync__WEBPACK_IMPORTED_MODULE_1__[/* getFrameData */ \"c\"])().timestamp;\n            _this.history.push(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, point), { timestamp: timestamp }));\n            var _a = _this.handlers, onStart = _a.onStart, onMove = _a.onMove;\n            if (!isPanStarted) {\n                onStart && onStart(_this.lastMoveEvent, info);\n                _this.startEvent = _this.lastMoveEvent;\n            }\n            onMove && onMove(_this.lastMoveEvent, info);\n        };\n        this.handlePointerMove = function (event, info) {\n            _this.lastMoveEvent = event;\n            _this.lastMoveEventInfo = transformPoint(info, _this.transformPagePoint);\n            // Because Safari doesn't trigger mouseup events when it's above a `<select>`\n            if (isMouseEvent(event) && event.buttons === 0) {\n                _this.handlePointerUp(event, info);\n                return;\n            }\n            // Throttle mouse move event to once per frame\n            framesync__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"b\"].update(_this.updatePoint, true);\n        };\n        this.handlePointerUp = function (event, info) {\n            _this.end();\n            var onEnd = _this.handlers.onEnd;\n            if (!onEnd)\n                return;\n            var panInfo = getPanInfo(transformPoint(info, _this.transformPagePoint), _this.history);\n            onEnd && onEnd(event, panInfo);\n        };\n        // If we have more than one touch, don't start detecting this gesture\n        if (isTouchEvent(event) && event.touches.length > 1)\n            return;\n        this.handlers = handlers;\n        this.transformPagePoint = transformPagePoint;\n        var info = extractEventInfo(event);\n        var initialInfo = transformPoint(info, this.transformPagePoint);\n        var point = initialInfo.point;\n        var timestamp = Object(framesync__WEBPACK_IMPORTED_MODULE_1__[/* getFrameData */ \"c\"])().timestamp;\n        this.history = [Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, point), { timestamp: timestamp })];\n        var onSessionStart = handlers.onSessionStart;\n        onSessionStart &&\n            onSessionStart(event, getPanInfo(initialInfo, this.history));\n        this.removeListeners = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* pipe */ \"v\"])(addPointerEvent(window, \"pointermove\", this.handlePointerMove), addPointerEvent(window, \"pointerup\", this.handlePointerUp), addPointerEvent(window, \"pointercancel\", this.handlePointerUp));\n    }\n    PanSession.prototype.updateHandlers = function (handlers) {\n        this.handlers = handlers;\n    };\n    PanSession.prototype.end = function () {\n        this.removeListeners && this.removeListeners();\n        framesync__WEBPACK_IMPORTED_MODULE_1__[/* cancelSync */ \"a\"].update(this.updatePoint);\n    };\n    return PanSession;\n}());\nfunction transformPoint(info, transformPagePoint) {\n    return transformPagePoint ? { point: transformPagePoint(info.point) } : info;\n}\nfunction subtractPoint(a, b) {\n    return { x: a.x - b.x, y: a.y - b.y };\n}\nfunction getPanInfo(_a, history) {\n    var point = _a.point;\n    return {\n        point: point,\n        delta: subtractPoint(point, lastDevicePoint(history)),\n        offset: subtractPoint(point, startDevicePoint(history)),\n        velocity: getVelocity$1(history, 0.1),\n    };\n}\nfunction startDevicePoint(history) {\n    return history[0];\n}\nfunction lastDevicePoint(history) {\n    return history[history.length - 1];\n}\nfunction getVelocity$1(history, timeDelta) {\n    if (history.length < 2) {\n        return { x: 0, y: 0 };\n    }\n    var i = history.length - 1;\n    var timestampedPoint = null;\n    var lastPoint = lastDevicePoint(history);\n    while (i >= 0) {\n        timestampedPoint = history[i];\n        if (lastPoint.timestamp - timestampedPoint.timestamp >\n            secondsToMilliseconds(timeDelta)) {\n            break;\n        }\n        i--;\n    }\n    if (!timestampedPoint) {\n        return { x: 0, y: 0 };\n    }\n    var time = (lastPoint.timestamp - timestampedPoint.timestamp) / 1000;\n    if (time === 0) {\n        return { x: 0, y: 0 };\n    }\n    var currentVelocity = {\n        x: (lastPoint.x - timestampedPoint.x) / time,\n        y: (lastPoint.y - timestampedPoint.y) / time,\n    };\n    if (currentVelocity.x === Infinity) {\n        currentVelocity.x = 0;\n    }\n    if (currentVelocity.y === Infinity) {\n        currentVelocity.y = 0;\n    }\n    return currentVelocity;\n}\n\n/**\n *\n * @param handlers -\n * @param ref -\n *\n * @internalremarks\n * Currently this sets new pan gesture functions every render. The memo route has been explored\n * in the past but ultimately we're still creating new functions every render. An optimisation\n * to explore is creating the pan gestures and loading them into a `ref`.\n *\n * @internal\n */\nfunction usePanGesture(_a, ref) {\n    var onPan = _a.onPan, onPanStart = _a.onPanStart, onPanEnd = _a.onPanEnd, onPanSessionStart = _a.onPanSessionStart;\n    var hasPanEvents = onPan || onPanStart || onPanEnd || onPanSessionStart;\n    var panSession = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(null);\n    var transformPagePoint = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(MotionConfigContext).transformPagePoint;\n    var handlers = {\n        onSessionStart: onPanSessionStart,\n        onStart: onPanStart,\n        onMove: onPan,\n        onEnd: function (event, info) {\n            panSession.current = null;\n            onPanEnd && onPanEnd(event, info);\n        },\n    };\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n        if (panSession.current !== null) {\n            panSession.current.updateHandlers(handlers);\n        }\n    });\n    function onPointerDown(event) {\n        panSession.current = new PanSession(event, handlers, {\n            transformPagePoint: transformPagePoint,\n        });\n    }\n    usePointerEvent(ref, \"pointerdown\", hasPanEvents && onPointerDown);\n    useUnmountEffect(function () { return panSession.current && panSession.current.end(); });\n}\n\n/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nvar isNodeOrChild = function (parent, child) {\n    if (!child) {\n        return false;\n    }\n    else if (parent === child) {\n        return true;\n    }\n    else {\n        return isNodeOrChild(parent, child.parentElement);\n    }\n};\n\nfunction createLock(name) {\n    var lock = null;\n    return function () {\n        var openLock = function () {\n            lock = null;\n        };\n        if (lock === null) {\n            lock = name;\n            return openLock;\n        }\n        return false;\n    };\n}\nvar globalHorizontalLock = createLock(\"dragHorizontal\");\nvar globalVerticalLock = createLock(\"dragVertical\");\nfunction getGlobalLock(drag) {\n    var lock = false;\n    if (drag === \"y\") {\n        lock = globalVerticalLock();\n    }\n    else if (drag === \"x\") {\n        lock = globalHorizontalLock();\n    }\n    else {\n        var openHorizontal_1 = globalHorizontalLock();\n        var openVertical_1 = globalVerticalLock();\n        if (openHorizontal_1 && openVertical_1) {\n            lock = function () {\n                openHorizontal_1();\n                openVertical_1();\n            };\n        }\n        else {\n            // Release the locks because we don't use them\n            if (openHorizontal_1)\n                openHorizontal_1();\n            if (openVertical_1)\n                openVertical_1();\n        }\n    }\n    return lock;\n}\n\nvar easingLookup = {\n    linear: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* linear */ \"t\"],\n    easeIn: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* easeIn */ \"o\"],\n    easeInOut: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* easeInOut */ \"p\"],\n    easeOut: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* easeOut */ \"q\"],\n    circIn: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* circIn */ \"i\"],\n    circInOut: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* circInOut */ \"j\"],\n    circOut: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* circOut */ \"k\"],\n    backIn: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* backIn */ \"c\"],\n    backInOut: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* backInOut */ \"d\"],\n    backOut: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* backOut */ \"e\"],\n    anticipate: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* anticipate */ \"b\"],\n    bounceIn: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* bounceIn */ \"f\"],\n    bounceInOut: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* bounceInOut */ \"g\"],\n    bounceOut: popmotion__WEBPACK_IMPORTED_MODULE_2__[/* bounceOut */ \"h\"],\n};\nvar easingDefinitionToFunction = function (definition) {\n    if (Array.isArray(definition)) {\n        // If cubic bezier definition, create bezier curve\n        Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* invariant */ \"a\"])(definition.length === 4, \"Cubic bezier arrays must contain four numerical values.\");\n        var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(definition, 4), x1 = _a[0], y1 = _a[1], x2 = _a[2], y2 = _a[3];\n        return Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* cubicBezier */ \"m\"])(x1, y1, x2, y2);\n    }\n    else if (typeof definition === \"string\") {\n        // Else lookup from table\n        Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* invariant */ \"a\"])(easingLookup[definition] !== undefined, \"Invalid easing type '\" + definition + \"'\");\n        return easingLookup[definition];\n    }\n    return definition;\n};\nvar isEasingArray = function (ease) {\n    return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\n/**\n * Check if a value is animatable. Examples:\n *\n * : 100, \"100px\", \"#fff\"\n * : \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\nvar isAnimatable = function (key, value) {\n    // If the list of keys tat might be non-animatable grows, replace with Set\n    if (key === \"zIndex\")\n        return false;\n    // If it's a number or a keyframes array, we can animate it. We might at some point\n    // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n    // but for now lets leave it like this for performance reasons\n    if (typeof value === \"number\" || Array.isArray(value))\n        return true;\n    if (typeof value === \"string\" && // It's animatable if we have a string\n        style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* complex */ \"c\"].test(value) && // And it contains numbers and/or colors\n        !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n    ) {\n        return true;\n    }\n    return false;\n};\n\nvar underDampedSpring = function () { return ({\n    type: \"spring\",\n    stiffness: 500,\n    damping: 25,\n    restDelta: 0.5,\n    restSpeed: 10,\n}); };\nvar overDampedSpring = function (to) { return ({\n    type: \"spring\",\n    stiffness: 550,\n    damping: to === 0 ? 100 : 30,\n    restDelta: 0.01,\n    restSpeed: 10,\n}); };\nvar linearTween = function () { return ({\n    type: \"keyframes\",\n    ease: \"linear\",\n    duration: 0.3,\n}); };\nvar keyframes = function (values) { return ({\n    type: \"keyframes\",\n    duration: 0.8,\n    values: values,\n}); };\nvar defaultTransitions = {\n    x: underDampedSpring,\n    y: underDampedSpring,\n    z: underDampedSpring,\n    rotate: underDampedSpring,\n    rotateX: underDampedSpring,\n    rotateY: underDampedSpring,\n    rotateZ: underDampedSpring,\n    scaleX: overDampedSpring,\n    scaleY: overDampedSpring,\n    scale: overDampedSpring,\n    opacity: linearTween,\n    backgroundColor: linearTween,\n    color: linearTween,\n    default: overDampedSpring,\n};\nvar getDefaultTransition = function (valueKey, to) {\n    var transitionFactory;\n    if (isKeyframesTarget(to)) {\n        transitionFactory = keyframes;\n    }\n    else {\n        transitionFactory =\n            defaultTransitions[valueKey] || defaultTransitions.default;\n    }\n    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({ to: to }, transitionFactory(to));\n};\n\n/**\n * Decide whether a transition is defined on a given Transition.\n * This filters out orchestration options and returns true\n * if any options are left.\n */\nfunction isTransitionDefined(_a) {\n    var when = _a.when, delay = _a.delay, delayChildren = _a.delayChildren, staggerChildren = _a.staggerChildren, staggerDirection = _a.staggerDirection, repeat = _a.repeat, repeatType = _a.repeatType, repeatDelay = _a.repeatDelay, from = _a.from, transition = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, [\"when\", \"delay\", \"delayChildren\", \"staggerChildren\", \"staggerDirection\", \"repeat\", \"repeatType\", \"repeatDelay\", \"from\"]);\n    return !!Object.keys(transition).length;\n}\nvar legacyRepeatWarning = false;\n/**\n * Convert Framer Motion's Transition type into Popmotion-compatible options.\n */\nfunction convertTransitionToAnimationOptions(_a) {\n    var ease = _a.ease, times = _a.times, yoyo = _a.yoyo, flip = _a.flip, loop = _a.loop, transition = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, [\"ease\", \"times\", \"yoyo\", \"flip\", \"loop\"]);\n    var options = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, transition);\n    if (times)\n        options[\"offset\"] = times;\n    /**\n     * Convert any existing durations from seconds to milliseconds\n     */\n    if (transition.duration)\n        options[\"duration\"] = secondsToMilliseconds(transition.duration);\n    if (transition.repeatDelay)\n        options.repeatDelay = secondsToMilliseconds(transition.repeatDelay);\n    /**\n     * Map easing names to Popmotion's easing functions\n     */\n    if (ease) {\n        options[\"ease\"] = isEasingArray(ease)\n            ? ease.map(easingDefinitionToFunction)\n            : easingDefinitionToFunction(ease);\n    }\n    /**\n     * Support legacy transition API\n     */\n    if (transition.type === \"tween\")\n        options.type = \"keyframes\";\n    /**\n     * TODO: These options are officially removed from the API.\n     */\n    if (yoyo || loop || flip) {\n        Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* warning */ \"b\"])(!legacyRepeatWarning, \"yoyo, loop and flip have been removed from the API. Replace with repeat and repeatType options.\");\n        legacyRepeatWarning = true;\n        if (yoyo) {\n            options.repeatType = \"reverse\";\n        }\n        else if (loop) {\n            options.repeatType = \"loop\";\n        }\n        else if (flip) {\n            options.repeatType = \"mirror\";\n        }\n        options.repeat = loop || yoyo || flip || transition.repeat;\n    }\n    /**\n     * TODO: Popmotion 9 has the ability to automatically detect whether to use\n     * a keyframes or spring animation, but does so by detecting velocity and other spring options.\n     * It'd be good to introduce a similar thing here.\n     */\n    if (transition.type !== \"spring\")\n        options.type = \"keyframes\";\n    return options;\n}\n/**\n * Get the delay for a value by checking Transition with decreasing specificity.\n */\nfunction getDelayFromTransition(transition, key) {\n    var _a, _b, _c, _d, _e;\n    return ((_e = (_d = (_b = (_a = transition[key]) === null || _a === void 0 ? void 0 : _a.delay) !== null && _b !== void 0 ? _b : (_c = transition[\"default\"]) === null || _c === void 0 ? void 0 : _c.delay) !== null && _d !== void 0 ? _d : transition.delay) !== null && _e !== void 0 ? _e : 0);\n}\nfunction hydrateKeyframes(options) {\n    if (Array.isArray(options.to) && options.to[0] === null) {\n        options.to = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])(options.to);\n        options.to[0] = options.from;\n    }\n    return options;\n}\nfunction getPopmotionAnimationOptions(transition, options, key) {\n    var _a;\n    if (Array.isArray(options.to)) {\n        (_a = transition.duration) !== null && _a !== void 0 ? _a : (transition.duration = 0.8);\n    }\n    hydrateKeyframes(options);\n    /**\n     * Get a default transition if none is determined to be defined.\n     */\n    if (!isTransitionDefined(transition)) {\n        transition = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, transition), getDefaultTransition(key, options.to));\n    }\n    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, options), convertTransitionToAnimationOptions(transition));\n}\n/**\n *\n */\nfunction getAnimation(key, value, target, transition, onComplete) {\n    var _a;\n    var valueTransition = getValueTransition(transition, key);\n    var origin = (_a = valueTransition.from) !== null && _a !== void 0 ? _a : value.get();\n    var isTargetAnimatable = isAnimatable(key, target);\n    /**\n     * If we're trying to animate from \"none\", try and get an animatable version\n     * of the target. This could be improved to work both ways.\n     */\n    if (origin === \"none\" && isTargetAnimatable && typeof target === \"string\") {\n        origin = style_value_types__WEBPACK_IMPORTED_MODULE_4__[/* complex */ \"c\"].getAnimatableNone(target);\n    }\n    var isOriginAnimatable = isAnimatable(key, origin);\n    Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* warning */ \"b\"])(isOriginAnimatable === isTargetAnimatable, \"You are trying to animate \" + key + \" from \\\"\" + origin + \"\\\" to \\\"\" + target + \"\\\". \" + origin + \" is not an animatable value - to enable this animation set \" + origin + \" to a value animatable to \" + target + \" via the `style` property.\");\n    function start() {\n        var options = {\n            from: origin,\n            to: target,\n            velocity: value.getVelocity(),\n            onComplete: onComplete,\n            onUpdate: function (v) { return value.set(v); },\n        };\n        return valueTransition.type === \"inertia\" ||\n            valueTransition.type === \"decay\"\n            ? Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* inertia */ \"r\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, options), valueTransition))\n            : Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* animate */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, getPopmotionAnimationOptions(valueTransition, options, key)), { onUpdate: function (v) {\n                    var _a;\n                    options.onUpdate(v);\n                    (_a = valueTransition.onUpdate) === null || _a === void 0 ? void 0 : _a.call(valueTransition, v);\n                }, onComplete: function () {\n                    var _a;\n                    options.onComplete();\n                    (_a = valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n                } }));\n    }\n    function set() {\n        var _a;\n        value.set(target);\n        onComplete();\n        (_a = valueTransition === null || valueTransition === void 0 ? void 0 : valueTransition.onComplete) === null || _a === void 0 ? void 0 : _a.call(valueTransition);\n        return { stop: function () { } };\n    }\n    return !isOriginAnimatable ||\n        !isTargetAnimatable ||\n        valueTransition.type === false\n        ? set\n        : start;\n}\nfunction getValueTransition(transition, key) {\n    return transition[key] || transition[\"default\"] || transition;\n}\n/**\n * Start animation on a MotionValue. This function is an interface between\n * Framer Motion and Popmotion\n *\n * @internal\n */\nfunction startAnimation(key, value, target, transition) {\n    if (transition === void 0) { transition = {}; }\n    return value.start(function (onComplete) {\n        var delayTimer;\n        var controls;\n        var animation = getAnimation(key, value, target, transition, onComplete);\n        var delay = getDelayFromTransition(transition, key);\n        var start = function () { return (controls = animation()); };\n        if (delay) {\n            delayTimer = setTimeout(start, secondsToMilliseconds(delay));\n        }\n        else {\n            start();\n        }\n        return function () {\n            clearTimeout(delayTimer);\n            controls === null || controls === void 0 ? void 0 : controls.stop();\n        };\n    });\n}\n\n/**\n * @internal\n */\nfunction animateVisualElement(visualElement, definition, options) {\n    visualElement.onAnimationStart();\n    var animation;\n    if (Array.isArray(definition)) {\n        var animations = definition.map(function (variant) {\n            return animateVariant(visualElement, variant, options);\n        });\n        animation = Promise.all(animations);\n    }\n    else if (typeof definition === \"string\") {\n        animation = animateVariant(visualElement, definition, options);\n    }\n    else {\n        // TODO: Remove any and handle TargetResolver\n        animation = animateTarget(visualElement, definition, options);\n    }\n    return animation.then(function () { return visualElement.onAnimationComplete(); });\n}\nfunction animateVariant(visualElement, variant, options) {\n    var _a;\n    if (options === void 0) { options = {}; }\n    var resolved = resolveVariant(visualElement, variant, options.custom);\n    var _b = (resolved || {}).transition, transition = _b === void 0 ? visualElement.getDefaultTransition() || {} : _b;\n    if (options.transitionOverride) {\n        transition = options.transitionOverride;\n    }\n    /**\n     * If we have a variant, create a callback that runs it as an animation.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    var getAnimation = resolved\n        ? function () { return animateTarget(visualElement, resolved, options); }\n        : function () { return Promise.resolve(); };\n    /**\n     * If we have children, create a callback that runs all their animations.\n     * Otherwise, we resolve a Promise immediately for a composable no-op.\n     */\n    var getChildAnimations = ((_a = visualElement.variantChildrenOrder) === null || _a === void 0 ? void 0 : _a.size) ? function (forwardDelay) {\n        if (forwardDelay === void 0) { forwardDelay = 0; }\n        var _a = transition.delayChildren, delayChildren = _a === void 0 ? 0 : _a, staggerChildren = transition.staggerChildren, staggerDirection = transition.staggerDirection;\n        return animateChildren(visualElement, variant, delayChildren + forwardDelay, staggerChildren, staggerDirection, options);\n    }\n        : function () { return Promise.resolve(); };\n    /**\n     * If the transition explicitly defines a \"when\" option, we need to resolve either\n     * this animation or all children animations before playing the other.\n     */\n    var when = transition.when;\n    if (when) {\n        var _c = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(when === \"beforeChildren\"\n            ? [getAnimation, getChildAnimations]\n            : [getChildAnimations, getAnimation], 2), first = _c[0], last = _c[1];\n        return first().then(last);\n    }\n    else {\n        return Promise.all([getAnimation(), getChildAnimations(options.delay)]);\n    }\n}\n/**\n * @internal\n */\nfunction animateTarget(visualElement, definition, _a) {\n    var _b;\n    var _c = _a === void 0 ? {} : _a, _d = _c.delay, delay = _d === void 0 ? 0 : _d, transitionOverride = _c.transitionOverride, type = _c.type;\n    var _e = visualElement.makeTargetAnimatable(definition), _f = _e.transition, transition = _f === void 0 ? visualElement.getDefaultTransition() : _f, transitionEnd = _e.transitionEnd, target = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_e, [\"transition\", \"transitionEnd\"]);\n    if (transitionOverride)\n        transition = transitionOverride;\n    var animations = [];\n    var protectedValues = type && ((_b = visualElement.animationState) === null || _b === void 0 ? void 0 : _b.getProtectedKeys(type));\n    for (var key in target) {\n        var value = visualElement.getValue(key);\n        var valueTarget = target[key];\n        if (!value ||\n            valueTarget === undefined ||\n            (protectedValues === null || protectedValues === void 0 ? void 0 : protectedValues[key]) !== undefined) {\n            continue;\n        }\n        var animation = startAnimation(key, value, valueTarget, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({ delay: delay }, transition));\n        animations.push(animation);\n    }\n    return Promise.all(animations).then(function () {\n        transitionEnd && setTarget(visualElement, transitionEnd);\n    });\n}\nfunction animateChildren(visualElement, variant, delayChildren, staggerChildren, staggerDirection, options) {\n    if (delayChildren === void 0) { delayChildren = 0; }\n    if (staggerChildren === void 0) { staggerChildren = 0; }\n    if (staggerDirection === void 0) { staggerDirection = 1; }\n    var animations = [];\n    var maxStaggerDuration = (visualElement.variantChildrenOrder.size - 1) * staggerChildren;\n    var generateStaggerDuration = staggerDirection === 1\n        ? function (i) {\n            if (i === void 0) { i = 0; }\n            return i * staggerChildren;\n        }\n        : function (i) {\n            if (i === void 0) { i = 0; }\n            return maxStaggerDuration - i * staggerChildren;\n        };\n    Array.from(visualElement.variantChildrenOrder).forEach(function (child, i) {\n        var animation = animateVariant(child, variant, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, options), { delay: delayChildren + generateStaggerDuration(i) }));\n        animations.push(animation);\n    });\n    return Promise.all(animations);\n}\nfunction stopAnimation(visualElement) {\n    visualElement.forEachValue(function (value) { return value.stop(); });\n}\n\n/**\n * Control animations on one or more components.\n *\n * @public\n */\nvar AnimationControls = /** @class */ (function () {\n    function AnimationControls() {\n        /**\n         * Track whether the host component has mounted.\n         *\n         * @internal\n         */\n        this.hasMounted = false;\n        /**\n         * Pending animations that are started before a component is mounted.\n         *\n         * @internal\n         */\n        this.pendingAnimations = [];\n        /**\n         * A collection of linked component animation controls.\n         *\n         * @internal\n         */\n        this.subscribers = new Set();\n    }\n    /**\n     * Subscribes a component's animation controls to this.\n     *\n     * @param controls - The controls to subscribe\n     * @returns An unsubscribe function.\n     *\n     * @internal\n     */\n    AnimationControls.prototype.subscribe = function (visualElement) {\n        var _this = this;\n        this.subscribers.add(visualElement);\n        return function () { return _this.subscribers.delete(visualElement); };\n    };\n    /**\n     * Starts an animation on all linked components.\n     *\n     * @remarks\n     *\n     * ```jsx\n     * controls.start(\"variantLabel\")\n     * controls.start({\n     *   x: 0,\n     *   transition: { duration: 1 }\n     * })\n     * ```\n     *\n     * @param definition - Properties or variant label to animate to\n     * @param transition - Optional `transtion` to apply to a variant\n     * @returns - A `Promise` that resolves when all animations have completed.\n     *\n     * @public\n     */\n    AnimationControls.prototype.start = function (definition, transitionOverride) {\n        var _this = this;\n        if (this.hasMounted) {\n            var animations_1 = [];\n            this.subscribers.forEach(function (visualElement) {\n                animations_1.push(animateVisualElement(visualElement, definition, {\n                    transitionOverride: transitionOverride,\n                }));\n            });\n            return Promise.all(animations_1);\n        }\n        else {\n            return new Promise(function (resolve) {\n                _this.pendingAnimations.push({\n                    animation: [definition, transitionOverride],\n                    resolve: resolve,\n                });\n            });\n        }\n    };\n    /**\n     * Instantly set to a set of properties or a variant.\n     *\n     * ```jsx\n     * // With properties\n     * controls.set({ opacity: 0 })\n     *\n     * // With variants\n     * controls.set(\"hidden\")\n     * ```\n     *\n     * @internalremarks\n     * We could perform a similar trick to `.start` where this can be called before mount\n     * and we maintain a list of of pending actions that get applied on mount. But the\n     * expectation of `set` is that it happens synchronously and this would be difficult\n     * to do before any children have even attached themselves. It's also poor practise\n     * and we should discourage render-synchronous `.start` calls rather than lean into this.\n     *\n     * @public\n     */\n    AnimationControls.prototype.set = function (definition) {\n        Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* invariant */ \"a\"])(this.hasMounted, \"controls.set() should only be called after a component has mounted. Consider calling within a useEffect hook.\");\n        return this.subscribers.forEach(function (visualElement) {\n            setValues(visualElement, definition);\n        });\n    };\n    /**\n     * Stops animations on all linked components.\n     *\n     * ```jsx\n     * controls.stop()\n     * ```\n     *\n     * @public\n     */\n    AnimationControls.prototype.stop = function () {\n        this.subscribers.forEach(function (visualElement) {\n            stopAnimation(visualElement);\n        });\n    };\n    /**\n     * Initialises the animation controls.\n     *\n     * @internal\n     */\n    AnimationControls.prototype.mount = function () {\n        var _this = this;\n        this.hasMounted = true;\n        this.pendingAnimations.forEach(function (_a) {\n            var animation = _a.animation, resolve = _a.resolve;\n            _this.start.apply(_this, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])(animation)).then(resolve);\n        });\n    };\n    /**\n     * Stops all child animations when the host component unmounts.\n     *\n     * @internal\n     */\n    AnimationControls.prototype.unmount = function () {\n        this.hasMounted = false;\n        this.stop();\n    };\n    return AnimationControls;\n}());\n/**\n * @internal\n */\nvar animationControls = function () { return new AnimationControls(); };\n\nfunction shallowCompare(next, prev) {\n    if (!Array.isArray(prev))\n        return false;\n    var prevLength = prev.length;\n    if (prevLength !== next.length)\n        return false;\n    for (var i = 0; i < prevLength; i++) {\n        if (prev[i] !== next[i])\n            return false;\n    }\n    return true;\n}\n\nvar AnimationType;\n(function (AnimationType) {\n    AnimationType[\"Animate\"] = \"animate\";\n    AnimationType[\"Hover\"] = \"whileHover\";\n    AnimationType[\"Tap\"] = \"whileTap\";\n    AnimationType[\"Drag\"] = \"whileDrag\";\n    AnimationType[\"Focus\"] = \"whileFocus\";\n    AnimationType[\"Exit\"] = \"exit\";\n})(AnimationType || (AnimationType = {}));\nvar variantPriorityOrder = [\n    AnimationType.Animate,\n    AnimationType.Hover,\n    AnimationType.Tap,\n    AnimationType.Drag,\n    AnimationType.Focus,\n    AnimationType.Exit,\n];\nvar reversePriorityOrder = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])(variantPriorityOrder).reverse();\nvar numAnimationTypes = variantPriorityOrder.length;\nfunction animateList(visualElement) {\n    return function (animations) {\n        return Promise.all(animations.map(function (_a) {\n            var animation = _a.animation, options = _a.options;\n            return animateVisualElement(visualElement, animation, options);\n        }));\n    };\n}\nfunction createAnimationState(visualElement) {\n    var animate = animateList(visualElement);\n    var state = createState();\n    var isInitialRender = true;\n    /**\n     * This function will be used to reduce the animation definitions for\n     * each active animation type into an object of resolved values for it.\n     */\n    var buildResolvedTypeValues = function (acc, definition) {\n        var resolved = resolveVariant(visualElement, definition);\n        if (resolved) {\n            var transition = resolved.transition, transitionEnd = resolved.transitionEnd, target = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(resolved, [\"transition\", \"transitionEnd\"]);\n            acc = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, acc), target), transitionEnd);\n        }\n        return acc;\n    };\n    function getProtectedKeys(type) {\n        return state[type].protectedKeys;\n    }\n    /**\n     * This just allows us to inject mocked animation functions\n     * @internal\n     */\n    function setAnimateFunction(makeAnimator) {\n        animate = makeAnimator(visualElement);\n    }\n    var currentProps;\n    var currentContext;\n    /**\n     * When we receive new props, we need to:\n     * 1. Create a list of protected keys for each type. This is a directory of\n     *    value keys that are currently being \"handled\" by types of a higher priority\n     *    so that whenever an animation is played of a given type, these values are\n     *    protected from being animated.\n     * 2. Determine if an animation type needs animating.\n     * 3. Determine if any values have been removed from a type and figure out\n     *    what to animate those to.\n     */\n    function setProps(props, context, options, changedActiveType) {\n        if (context === void 0) { context = {}; }\n        /**\n         * Keep track of the most recent props and contexts. setActive can pass these\n         * straight through rather than requiring external callers to have access to these.\n         */\n        currentProps = props;\n        currentContext = context;\n        /**\n         * A list of animations that we'll build into as we iterate through the animation\n         * types. This will get executed at the end of the function.\n         */\n        var animations = [];\n        /**\n         * Keep track of which values have been removed. Then, as we hit lower priority\n         * animation types, we can check if they contain removed values and animate to that.\n         */\n        var removedKeys = new Set();\n        /**\n         * A dictionary of all encountered keys. This is an object to let us build into and\n         * copy it without iteration. Each time we hit an animation type we set its protected\n         * keys - the keys its not allowed to animate - to the latest version of this object.\n         */\n        var encounteredKeys = {};\n        // TODO Reconcile with other update config\n        if (props.variants) {\n            visualElement.updateConfig(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, visualElement.config), { variants: props.variants }));\n        }\n        /**\n         * If a variant has been removed at a given index, and this component is controlling\n         * variant animations, we want to ensure lower-priority variants are forced to animate.\n         */\n        var removedVariantIndex = Infinity;\n        var _loop_1 = function (i) {\n            var type = reversePriorityOrder[i];\n            var typeState = state[type];\n            var prop = (_a = props[type]) !== null && _a !== void 0 ? _a : context[type];\n            var propIsVariant = isVariantLabel(prop);\n            /**\n             * If this type has *just* changed isActive status, set activeDelta\n             * to that status. Otherwise set to null.\n             */\n            var activeDelta = type === changedActiveType ? typeState.isActive : null;\n            if (activeDelta === false)\n                removedVariantIndex = i;\n            /**\n             * If this prop is an inherited variant, rather than been set directly on the\n             * component itself, we want to make sure we allow the parent to trigger animations.\n             */\n            var isInherited = prop === context[type] && propIsVariant;\n            /**\n             *\n             */\n            if (isInherited &&\n                isInitialRender &&\n                visualElement.manuallyAnimateOnMount) {\n                isInherited = false;\n            }\n            /**\n             * Resume from previous snapshot if it's the first render\n             */\n            if (isInitialRender &&\n                type === AnimationType.Animate &&\n                visualElement.prevSnapshot) {\n                isInitialRender = false;\n                typeState.prevResolvedValues = visualElement.prevSnapshot;\n            }\n            /**\n             * Set all encountered keys so far as the protected keys for this type. This will\n             * be any key that has been animated or otherwise handled by active, higher-priortiy types.\n             */\n            typeState.protectedKeys = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, encounteredKeys);\n            // Check if we can skip analysing this prop early\n            if (\n            // If it isn't active and hasn't *just* been set as inactive\n            (!typeState.isActive && activeDelta === null) ||\n                // If we didn't and don't have any defined prop for this animation type\n                (!prop && !typeState.prevProp) ||\n                // Or if the prop doesn't define an animation\n                prop instanceof AnimationControls ||\n                typeof prop === \"boolean\") {\n                return \"continue\";\n            }\n            /**\n             * As we go look through the values defined on this type, if we detect\n             * a changed value or a value that was removed in a higher priority, we set\n             * this to true and add this prop to the animation list.\n             */\n            var shouldAnimateType = variantsHaveChanged(typeState.prevProp, prop) ||\n                // If we're making this variant active, we want to always make it active\n                (type === changedActiveType &&\n                    typeState.isActive &&\n                    !isInherited &&\n                    propIsVariant) ||\n                // If we removed a higher-priority variant (i is in reverse order)\n                (i > removedVariantIndex && propIsVariant);\n            /**\n             * As animations can be set as variant lists, variants or target objects, we\n             * coerce everything to an array if it isn't one already\n             */\n            var definitionList = Array.isArray(prop) ? prop : [prop];\n            /**\n             * Build an object of all the resolved values. We'll use this in the subsequent\n             * setProps calls to determine whether a value has changed.\n             */\n            var resolvedValues = definitionList.reduce(buildResolvedTypeValues, {});\n            if (activeDelta === false)\n                resolvedValues = {};\n            /**\n             * Now we need to loop through all the keys in the prev prop and this prop,\n             * and decide:\n             * 1. If the value has changed, and needs animating\n             * 2. If it has been removed, and needs adding to the removedKeys set\n             * 3. If it has been removed in a higher priority type and needs animating\n             * 4. If it hasn't been removed in a higher priority but hasn't changed, and\n             *    needs adding to the type's protectedKeys list.\n             */\n            var _a = typeState.prevResolvedValues, prevResolvedValues = _a === void 0 ? {} : _a;\n            var allKeys = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, prevResolvedValues), resolvedValues);\n            for (var key in allKeys) {\n                var next = resolvedValues[key];\n                var prev = prevResolvedValues[key];\n                // If we've already handled this we can just skip ahead\n                if (encounteredKeys.hasOwnProperty(key))\n                    continue;\n                if (next !== prev) {\n                    if (next !== undefined) {\n                        // If next is defined and doesn't equal prev, it needs animating\n                        shouldAnimateType = true;\n                        removedKeys.delete(key);\n                    }\n                    else {\n                        // If it's undefined, it's been removed.\n                        removedKeys.add(key);\n                    }\n                }\n                else if (next !== undefined && removedKeys.has(key)) {\n                    /**\n                     * If next hasn't changed and it isn't undefined, we want to check if it's\n                     * been removed by a higher priority\n                     */\n                    shouldAnimateType = true;\n                    removedKeys.delete(key);\n                }\n                else {\n                    typeState.protectedKeys[key] = true;\n                }\n            }\n            /**\n             * Update the typeState so next time setProps is called we can compare the\n             * latest prop and resolvedValues to these.\n             */\n            typeState.prevProp = prop;\n            typeState.prevResolvedValues = resolvedValues;\n            /**\n             *\n             */\n            if (typeState.isActive) {\n                encounteredKeys = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, encounteredKeys), resolvedValues);\n            }\n            /**\n             * If this is an inherited prop we want to hard-block animations\n             * TODO: Test as this should probably still handle animations triggered\n             * by removed values?\n             */\n            if (shouldAnimateType && !isInherited) {\n                animations.push.apply(animations, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])(definitionList.map(function (animation) { return ({\n                    animation: animation,\n                    options: Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({ type: type }, options),\n                }); })));\n            }\n        };\n        /**\n         * Iterate through all animation types in reverse priority order. For each, we want to\n         * detect which values it's handling and whether or not they've changed (and therefore\n         * need to be animated). If any values have been removed, we want to detect those in\n         * lower priority props and flag for animation.\n         */\n        for (var i = 0; i < numAnimationTypes; i++) {\n            _loop_1(i);\n        }\n        /**\n         * If there are some removed value that haven't been dealt with,\n         * we need to create a new animation that falls back either to the value\n         * defined in the style prop, or the last read value.\n         */\n        if (removedKeys.size) {\n            var fallbackAnimation_1 = {};\n            removedKeys.forEach(function (key) {\n                var fallbackTarget = visualElement.getBaseValue(key, props);\n                if (fallbackTarget !== undefined) {\n                    fallbackAnimation_1[key] = fallbackTarget;\n                }\n            });\n            animations.push({ animation: fallbackAnimation_1 });\n        }\n        var shouldAnimate = Boolean(animations.length);\n        if (isInitialRender &&\n            props.initial === false &&\n            !visualElement.manuallyAnimateOnMount) {\n            shouldAnimate = false;\n        }\n        isInitialRender = false;\n        return shouldAnimate ? animate(animations) : Promise.resolve();\n    }\n    /**\n     * Change whether a certain animation type is active.\n     */\n    function setActive(type, isActive, options) {\n        var _a;\n        // If the active state hasn't changed, we can safely do nothing here\n        if (state[type].isActive === isActive)\n            return Promise.resolve();\n        // Propagate active change to children\n        (_a = visualElement.variantChildrenOrder) === null || _a === void 0 ? void 0 : _a.forEach(function (child) { var _a; return (_a = child.animationState) === null || _a === void 0 ? void 0 : _a.setActive(type, isActive); });\n        state[type].isActive = isActive;\n        return setProps(currentProps, currentContext, options, type);\n    }\n    return { getProtectedKeys: getProtectedKeys, setProps: setProps, setActive: setActive, setAnimateFunction: setAnimateFunction };\n}\nfunction variantsHaveChanged(prev, next) {\n    if (typeof next === \"string\") {\n        return next !== prev;\n    }\n    else if (isVariantLabels(next)) {\n        return !shallowCompare(next, prev);\n    }\n    return false;\n}\nfunction createTypeState(isActive) {\n    if (isActive === void 0) { isActive = false; }\n    return {\n        isActive: isActive,\n        protectedKeys: {},\n        prevResolvedValues: {},\n    };\n}\nfunction createState() {\n    var _a;\n    return _a = {},\n        _a[AnimationType.Animate] = createTypeState(true),\n        _a[AnimationType.Hover] = createTypeState(),\n        _a[AnimationType.Tap] = createTypeState(),\n        _a[AnimationType.Drag] = createTypeState(),\n        _a[AnimationType.Focus] = createTypeState(),\n        _a[AnimationType.Exit] = createTypeState(),\n        _a;\n}\n\n/**\n * @param handlers -\n * @internal\n */\nfunction useTapGesture(_a, visualElement) {\n    var onTap = _a.onTap, onTapStart = _a.onTapStart, onTapCancel = _a.onTapCancel, whileTap = _a.whileTap;\n    var hasPressListeners = onTap || onTapStart || onTapCancel || whileTap;\n    var isPressing = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(false);\n    var cancelPointerEventListener = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(null);\n    function removePointerUp() {\n        var _a;\n        (_a = cancelPointerEventListener.current) === null || _a === void 0 ? void 0 : _a.call(cancelPointerEventListener);\n        cancelPointerEventListener.current = null;\n    }\n    // We load this event handler into a ref so we can later refer to\n    // onPointerUp.current which will always have reference to the latest props\n    var onPointerUp = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(null);\n    onPointerUp.current = function (event, info) {\n        var _a;\n        var element = visualElement.getInstance();\n        removePointerUp();\n        if (!isPressing.current || !element)\n            return;\n        isPressing.current = false;\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, false);\n        // Check the gesture lock - if we get it, it means no drag gesture is active\n        // and we can safely fire the tap gesture.\n        var openGestureLock = getGlobalLock(true);\n        if (!openGestureLock)\n            return;\n        openGestureLock();\n        if (!isNodeOrChild(element, event.target)) {\n            onTapCancel === null || onTapCancel === void 0 ? void 0 : onTapCancel(event, info);\n        }\n        else {\n            onTap === null || onTap === void 0 ? void 0 : onTap(event, info);\n        }\n    };\n    function onPointerDown(event, info) {\n        var _a;\n        removePointerUp();\n        cancelPointerEventListener.current = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* pipe */ \"v\"])(addPointerEvent(window, \"pointerup\", function (event, info) { var _a; return (_a = onPointerUp.current) === null || _a === void 0 ? void 0 : _a.call(onPointerUp, event, info); }), addPointerEvent(window, \"pointercancel\", function (event, info) { var _a; return (_a = onPointerUp.current) === null || _a === void 0 ? void 0 : _a.call(onPointerUp, event, info); }));\n        var element = visualElement.getInstance();\n        if (!element || isPressing.current)\n            return;\n        isPressing.current = true;\n        onTapStart === null || onTapStart === void 0 ? void 0 : onTapStart(event, info);\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Tap, true);\n    }\n    usePointerEvent(visualElement, \"pointerdown\", hasPressListeners ? onPointerDown : undefined);\n    useUnmountEffect(removePointerUp);\n}\n\nvar filterTouch = function (listener) { return function (event, info) {\n    if (isMouseEvent(event))\n        listener(event, info);\n}; };\n/**\n *\n * @param props\n * @param ref\n * @internal\n */\nfunction useHoverGesture(_a, visualElement) {\n    var onHoverStart = _a.onHoverStart, onHoverEnd = _a.onHoverEnd, whileHover = _a.whileHover;\n    var onPointerEnter = filterTouch(function (event, info) {\n        var _a;\n        onHoverStart === null || onHoverStart === void 0 ? void 0 : onHoverStart(event, info);\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Hover, true);\n    });\n    var onPointerLeave = filterTouch(function (event, info) {\n        var _a;\n        onHoverEnd === null || onHoverEnd === void 0 ? void 0 : onHoverEnd(event, info);\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Hover, false);\n    });\n    usePointerEvent(visualElement, \"pointerenter\", onHoverStart || whileHover ? onPointerEnter : undefined);\n    usePointerEvent(visualElement, \"pointerleave\", onHoverEnd || whileHover ? onPointerLeave : undefined);\n}\n\n/**\n *\n * @param props\n * @param ref\n * @internal\n */\nfunction useFocusGesture(_a, visualElement) {\n    var whileFocus = _a.whileFocus;\n    var onFocus = function () {\n        var _a;\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, true);\n    };\n    var onBlur = function () {\n        var _a;\n        (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Focus, false);\n    };\n    useDomEvent(visualElement, \"focus\", whileFocus ? onFocus : undefined);\n    useDomEvent(visualElement, \"blur\", whileFocus ? onBlur : undefined);\n}\n\n/**\n * Add pan and tap gesture recognition to an element.\n *\n * @param props - Gesture event handlers\n * @param ref - React `ref` containing a DOM `Element`\n * @public\n */\nfunction useGestures(props, visualElement) {\n    usePanGesture(props, visualElement);\n    useTapGesture(props, visualElement);\n    useHoverGesture(props, visualElement);\n    useFocusGesture(props, visualElement);\n}\n\nvar makeRenderlessComponent = function (hook) { return function (props) {\n    hook(props);\n    return null;\n}; };\n\nvar gestureProps = [\n    \"onPan\",\n    \"onPanStart\",\n    \"onPanEnd\",\n    \"onPanSessionStart\",\n    \"onTap\",\n    \"onTapStart\",\n    \"onTapCancel\",\n    \"onHoverStart\",\n    \"onHoverEnd\",\n    \"whileFocus\",\n    \"whileTap\",\n    \"whileHover\",\n];\nvar GestureComponent = makeRenderlessComponent(function (_a) {\n    var visualElement = _a.visualElement, props = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, [\"visualElement\"]);\n    useGestures(props, visualElement);\n});\n/**\n * @public\n */\nvar Gestures = {\n    key: \"gestures\",\n    shouldRender: function (props) {\n        return gestureProps.some(function (key) { return props.hasOwnProperty(key); });\n    },\n    getComponent: function () { return GestureComponent; },\n};\n\n/**\n * A list of all valid MotionProps.\n *\n * @internalremarks\n * This doesn't throw if a `MotionProp` name is missing - it should.\n */\nvar validMotionProps = new Set(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])([\n    \"initial\",\n    \"animate\",\n    \"exit\",\n    \"style\",\n    \"variants\",\n    \"transition\",\n    \"transformTemplate\",\n    \"transformValues\",\n    \"custom\",\n    \"inherit\",\n    \"layout\",\n    \"layoutId\",\n    \"onLayoutAnimationComplete\",\n    \"onViewportBoxUpdate\",\n    \"onAnimationStart\",\n    \"onAnimationComplete\",\n    \"onUpdate\",\n    \"onDragStart\",\n    \"onDrag\",\n    \"onDragEnd\",\n    \"onMeasureDragConstraints\",\n    \"onDirectionLock\",\n    \"onDragTransitionEnd\",\n    \"drag\",\n    \"dragControls\",\n    \"dragListener\",\n    \"dragConstraints\",\n    \"dragDirectionLock\",\n    \"_dragX\",\n    \"_dragY\",\n    \"dragElastic\",\n    \"dragMomentum\",\n    \"dragPropagation\",\n    \"dragTransition\",\n    \"whileDrag\"\n], gestureProps));\n/**\n * Check whether a prop name is a valid `MotionProp` key.\n *\n * @param key - Name of the property to check\n * @returns `true` is key is a valid `MotionProp`.\n *\n * @public\n */\nfunction isValidMotionProp(key) {\n    return validMotionProps.has(key);\n}\n\nvar isPropValid = function (key) { return !isValidMotionProp(key); };\n/**\n * Emotion and Styled Components both allow users to pass through arbitrary props to their components\n * to dynamically generate CSS. They both use the `@emotion/is-prop-valid` package to determine which\n * of these should be passed to the underlying DOM node.\n *\n * However, when styling a Motion component `styled(motion.div)`, both packages pass through *all* props\n * as it's seen as an arbitrary component rather than a DOM node. Motion only allows arbitrary props\n * passed through the `custom` prop so it doesn't *need* the payload or computational overhead of\n * `@emotion/is-prop-valid`, however to fix this problem we need to use it.\n *\n * By making it an optionalDependency we can offer this functionality only in the situations where it's\n * actually required.\n */\ntry {\n    var emotionIsPropValid_1 = __webpack_require__(\"DY47\").default;\n    isPropValid = function (key) {\n        // Handle events explicitly as Emotion validates them all as true\n        if (key.startsWith(\"on\")) {\n            return !isValidMotionProp(key);\n        }\n        else {\n            return emotionIsPropValid_1(key);\n        }\n    };\n}\ncatch (_a) {\n    // We don't need to actually do anything here - the fallback is the existing `isPropValid`.\n}\nfunction filterProps(props) {\n    var domProps = {};\n    for (var key in props) {\n        if (isPropValid(key))\n            domProps[key] = props[key];\n    }\n    return domProps;\n}\n\nfunction buildHTMLProps(visualElement, _a) {\n    var drag = _a.drag;\n    // The `any` isn't ideal but it is the type of createElement props argument\n    var htmlProps = {};\n    var style = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, visualElement.reactStyle), visualElement.style), visualElement.vars);\n    if (!!drag) {\n        // Disable the ghost element when a user drags\n        htmlProps.draggable = false;\n        // Disable text selection\n        style.userSelect = style.WebkitUserSelect = style.WebkitTouchCallout =\n            \"none\";\n        // Disable scrolling on the draggable direction\n        style.touchAction =\n            drag === true ? \"none\" : \"pan-\" + (drag === \"x\" ? \"y\" : \"x\");\n    }\n    htmlProps.style = style;\n    return htmlProps;\n}\n\n/**\n * Build React props for SVG elements\n */\nfunction buildSVGProps(visualElement) {\n    return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, visualElement.attrs), { style: Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, visualElement.reactStyle) });\n}\n\nfunction useRender(Component, props, visualElement) {\n    // Only filter props from components we control, ie `motion.div`. If this\n    // is a custom component pass along everything provided to it.\n    var forwardedProps = typeof Component === \"string\" ? filterProps(props) : props;\n    /**\n     * Every render, empty and rebuild the animated values to be applied to our Element.\n     * During animation these data structures are used in a mutable fashion to reduce\n     * garbage collection, but between renders we can flush them to remove values\n     * that might have been taken out of the provided props.\n     */\n    visualElement.clean();\n    visualElement.build();\n    // Generate props to visually render this component\n    var visualProps = isSVGComponent(Component)\n        ? buildSVGProps(visualElement)\n        : buildHTMLProps(visualElement, props);\n    return Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(Component, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, forwardedProps), { ref: visualElement.ref }), visualProps));\n}\n\nfunction isForcedMotionValue(key, _a) {\n    var layout = _a.layout, layoutId = _a.layoutId;\n    return (isTransformProp(key) ||\n        isTransformOriginProp(key) ||\n        ((layout || layoutId !== undefined) && !!valueScaleCorrection[key]));\n}\n/**\n * Scrape props for MotionValues and add/remove them to this component's\n * VisualElement\n */\nfunction useMotionValues(visualElement, props) {\n    var prev = useConstant(empty);\n    /**\n     * Remove MotionValues that are no longer present\n     */\n    for (var key in prev) {\n        var isForced = isForcedMotionValue(key, props);\n        var existsAsProp = props[key] !== undefined;\n        var existsAsStyle = props.style && props.style[key] !== undefined;\n        var propIsMotionValue = existsAsProp && isMotionValue(props[key]);\n        var styleIsMotionValue = existsAsStyle && isMotionValue(props.style[key]);\n        var transformRemoved = isForced && !existsAsProp && !existsAsStyle;\n        var motionValueRemoved = !isForced && !propIsMotionValue && !styleIsMotionValue;\n        if (transformRemoved || motionValueRemoved) {\n            visualElement.removeValue(key);\n            delete prev[key];\n        }\n    }\n    /**\n     * Add incoming MotionValues\n     */\n    addMotionValues(visualElement, prev, props, false, props);\n    if (props.style)\n        addMotionValues(visualElement, prev, props.style, true, props);\n    /**\n     * Transform custom values if provided a handler, ie size -> width/height\n     * Ideally we'd ditch this by removing support for size and other custom values from Framer.\n     */\n    if (props.transformValues) {\n        visualElement.reactStyle = props.transformValues(visualElement.reactStyle);\n    }\n}\n/**\n * Add incoming MotionValues\n *\n * TODO: Type the VisualElements properly\n */\nfunction addMotionValues(visualElement, prev, source, isStyle, props) {\n    if (isStyle === void 0) { isStyle = false; }\n    if (isStyle)\n        visualElement.reactStyle = {};\n    for (var key in source) {\n        var value = source[key];\n        var foundMotionValue = false;\n        if (isMotionValue(value)) {\n            // If this is a MotionValue, add it if it isn't a reserved key\n            if (!reservedNames.has(key)) {\n                visualElement.addValue(key, value);\n                foundMotionValue = true;\n            }\n        }\n        else if (isForcedMotionValue(key, props)) {\n            // If this is a transform prop, always create a MotionValue\n            // to ensure we can reconcile them all together.\n            if (!visualElement.hasValue(key)) {\n                visualElement.addValue(key, motionValue(value));\n            }\n            else if (value !== prev[key]) {\n                if (isMotionValue(prev[key])) {\n                    /**\n                     * If the previous value was a MotionValue, and this value isn't,\n                     * we want to create a new MotionValue rather than update one that's been removed.\n                     */\n                    visualElement.addValue(key, motionValue(value));\n                }\n                else {\n                    /**\n                     * Otherwise, we just want to ensure the MotionValue is of the latest value.\n                     */\n                    var motion = visualElement.getValue(key);\n                    motion.set(value);\n                }\n            }\n            foundMotionValue = true;\n        }\n        else if (isStyle) {\n            visualElement.reactStyle[key] = value;\n        }\n        if (foundMotionValue)\n            prev[key] = value;\n    }\n}\n/**\n * These are props we accept as MotionValues but don't want to add\n * to the VisualElement\n */\nvar reservedNames = new Set([]);\nvar empty = function () { return ({}); };\n\n/**\n * Load features via renderless components based on the provided MotionProps\n */\nfunction useFeatures(defaultFeatures, isStatic, visualElement, props) {\n    var plugins = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(MotionConfigContext);\n    // If this is a static component, or we're rendering on the server, we don't load\n    // any feature components\n    if (isStatic || typeof window === \"undefined\")\n        return null;\n    var allFeatures = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])(defaultFeatures, plugins.features);\n    var numFeatures = allFeatures.length;\n    var features = [];\n    // Decide which features we should render and add them to the returned array\n    for (var i = 0; i < numFeatures; i++) {\n        var _a = allFeatures[i], shouldRender = _a.shouldRender, key = _a.key, getComponent = _a.getComponent;\n        if (shouldRender(props)) {\n            var Component = getComponent(props);\n            Component &&\n                features.push(Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(Component, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({ key: key }, props, { visualElement: visualElement })));\n        }\n    }\n    return features;\n}\n\nvar Presence;\n(function (Presence) {\n    Presence[Presence[\"Entering\"] = 0] = \"Entering\";\n    Presence[Presence[\"Present\"] = 1] = \"Present\";\n    Presence[Presence[\"Exiting\"] = 2] = \"Exiting\";\n})(Presence || (Presence = {}));\nvar VisibilityAction;\n(function (VisibilityAction) {\n    VisibilityAction[VisibilityAction[\"Hide\"] = 0] = \"Hide\";\n    VisibilityAction[VisibilityAction[\"Show\"] = 1] = \"Show\";\n})(VisibilityAction || (VisibilityAction = {}));\n\n/**\n * Default handlers for batching VisualElements\n */\nvar defaultHandler = {\n    measureLayout: function (child) { return child.measureLayout(); },\n    layoutReady: function (child) { return child.layoutReady(); },\n};\n/**\n * Sort VisualElements by tree depth, so we process the highest elements first.\n */\nvar sortByDepth = function (a, b) {\n    return a.depth - b.depth;\n};\n/**\n * Create a batcher to process VisualElements\n */\nfunction createBatcher() {\n    var queue = new Set();\n    var add = function (child) { return queue.add(child); };\n    var flush = function (_a) {\n        var _b = _a === void 0 ? defaultHandler : _a, measureLayout = _b.measureLayout, layoutReady = _b.layoutReady, parent = _b.parent;\n        var order = Array.from(queue).sort(sortByDepth);\n        var resetAndMeasure = function () {\n            /**\n             * Write: Reset any transforms on children elements so we can read their actual layout\n             */\n            order.forEach(function (child) { return child.resetTransform(); });\n            /**\n             * Read: Measure the actual layout\n             */\n            order.forEach(measureLayout);\n        };\n        parent ? parent.withoutTransform(resetAndMeasure) : resetAndMeasure();\n        /**\n         * Write: Notify the VisualElements they're ready for further write operations.\n         */\n        order.forEach(layoutReady);\n        /**\n         * After all children have started animating, ensure any Entering components are set to Present.\n         * If we add deferred animations (set up all animations and then start them in two loops) this\n         * could be moved to the start loop. But it needs to happen after all the animations configs\n         * are generated in AnimateSharedLayout as this relies on presence data\n         */\n        order.forEach(function (child) {\n            if (child.isPresent)\n                child.presence = Presence.Present;\n        });\n        queue.clear();\n    };\n    return { add: add, flush: flush };\n}\nfunction isSharedLayout(context) {\n    return !!context.forceUpdate;\n}\nvar SharedLayoutContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createContext\"])(createBatcher());\n/**\n * @internal\n */\nvar FramerTreeLayoutContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createContext\"])(createBatcher());\n\nvar isBrowser$1 = typeof window !== \"undefined\";\nvar useIsomorphicLayoutEffect = isBrowser$1 ? react__WEBPACK_IMPORTED_MODULE_5__[\"useLayoutEffect\"] : react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"];\n\nfunction useSnapshotOnUnmount(visualElement) {\n    var syncLayout = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(SharedLayoutContext);\n    var framerSyncLayout = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(FramerTreeLayoutContext);\n    useIsomorphicLayoutEffect(function () { return function () {\n        if (isSharedLayout(syncLayout)) {\n            syncLayout.remove(visualElement);\n        }\n        if (isSharedLayout(framerSyncLayout)) {\n            framerSyncLayout.remove(visualElement);\n        }\n    }; }, []);\n}\n\n/**\n * When a component is the child of `AnimatePresence`, it can use `usePresence`\n * to access information about whether it's still present in the React tree.\n *\n * ```jsx\n * import { usePresence } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const [isPresent, safeToRemove] = usePresence()\n *\n *   useEffect(() => {\n *     !isPresent && setTimeout(safeToRemove, 1000)\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * If `isPresent` is `false`, it means that a component has been removed the tree, but\n * `AnimatePresence` won't really remove it until `safeToRemove` has been called.\n *\n * @public\n */\nfunction usePresence() {\n    var context = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(PresenceContext);\n    if (context === null)\n        return [true, null];\n    var isPresent = context.isPresent, onExitComplete = context.onExitComplete, register = context.register;\n    // It's safe to call the following hooks conditionally (after an early return) because the context will always\n    // either be null or non-null for the lifespan of the component.\n    // Replace with useOpaqueId when released in React\n    var id = useUniqueId();\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () { return register(id); }, []);\n    var safeToRemove = function () { return onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete(id); };\n    return !isPresent && onExitComplete ? [false, safeToRemove] : [true];\n}\n/**\n * Similar to `usePresence`, except `useIsPresent` simply returns whether or not the component is present.\n * There is no `safeToRemove` function.\n *\n * ```jsx\n * import { useIsPresent } from \"framer-motion\"\n *\n * export const Component = () => {\n *   const isPresent = useIsPresent()\n *\n *   useEffect(() => {\n *     !isPresent && console.log(\"I've been removed!\")\n *   }, [isPresent])\n *\n *   return <div />\n * }\n * ```\n *\n * @public\n */\nfunction useIsPresent() {\n    return isPresent(Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(PresenceContext));\n}\nfunction isPresent(context) {\n    return context === null ? true : context.isPresent;\n}\nvar counter = 0;\nvar incrementId = function () { return counter++; };\nvar useUniqueId = function () { return useConstant(incrementId); };\n\n/**\n * Use callback either only on the initial render or on all renders. In concurrent mode\n * the \"initial\" render might run multiple times\n *\n * @param callback - Callback to run\n * @param isInitialOnly - Set to `true` to only run on initial render, or `false` for all renders. Defaults to `false`.\n *\n * @public\n */\nfunction useInitialOrEveryRender(callback, isInitialOnly) {\n    if (isInitialOnly === void 0) { isInitialOnly = false; }\n    var isInitialRender = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(true);\n    if (!isInitialOnly || (isInitialOnly && isInitialRender.current)) {\n        callback();\n    }\n    isInitialRender.current = false;\n}\n\nfunction checkShouldInheritVariant(_a) {\n    var animate = _a.animate, variants = _a.variants, inherit = _a.inherit;\n    return inherit !== null && inherit !== void 0 ? inherit : (!!variants && !animate);\n}\n\n/**\n * This hook is resonsible for creating the variant-propagation tree\n * relationship between VisualElements.\n */\nfunction useVariants(visualElement, props, isStatic) {\n    var _a, _b, _c;\n    var variantContext = useVariantContext();\n    var presenceContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(PresenceContext);\n    /**\n     * We only add this VisualElement to the variant tree *if* we're:\n     * 1. Being provided a variants prop\n     * 2. Or being used to control variants (ie animate, whileHover etc)\n     * 3. Or being passed AnimationControls, which we have to assume may control variants.\n     * Otherwise this component should be \"invisible\" to variant propagation.\n     */\n    var shouldInheritVariants = checkShouldInheritVariant(props);\n    var contextDependencies = [];\n    var context = {};\n    var isControllingVariants = false;\n    if (checkIfControllingVariants(props)) {\n        isControllingVariants = true;\n        variantContext = {};\n    }\n    var isVariantNode = isControllingVariants || props.variants;\n    /**\n     * Loop through each animation prop. Create context dependencies.\n     */\n    for (var i = 0; i < numVariantProps; i++) {\n        var name_1 = variantProps[i];\n        var prop = props[name_1];\n        var contextProp = variantContext[name_1];\n        if (isVariantLabel$1(prop) || prop === false) {\n            context[name_1] = prop;\n            contextDependencies.push(prop);\n        }\n        else {\n            if (isVariantLabel$1(contextProp) || contextProp === false) {\n                context[name_1] = contextProp;\n            }\n            contextDependencies.push(null);\n        }\n        contextDependencies.push(isVariantLabel$1(contextProp) ? contextProp : null);\n    }\n    var animate = (_a = props.animate) !== null && _a !== void 0 ? _a : context.animate;\n    var initial = props.initial;\n    if (initial === undefined &&\n        (isVariantLabel$1(animate) || context.initial !== false)) {\n        initial = context.initial;\n    }\n    if ((presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.initial) === false) {\n        initial = context.initial = false;\n    }\n    context.parent = isVariantNode ? visualElement : variantContext.parent;\n    useInitialOrEveryRender(function () {\n        var initialToSet = initial === false ? animate : initial;\n        if (initialToSet &&\n            typeof initialToSet !== \"boolean\" &&\n            !isAnimationControls(initialToSet)) {\n            setValues(visualElement, initialToSet);\n        }\n    }, !isStatic);\n    /**\n     * We want to update the \"base\" (or fallback) value on the initial render.\n     */\n    useInitialOrEveryRender(function () {\n        visualElement.forEachValue(function (value, key) {\n            visualElement.baseTarget[key] = value.get();\n        });\n    }, true);\n    var nextContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useMemo\"])(function () { return context; }, contextDependencies);\n    /**\n     * Subscribe to the parent visualElement if this is a participant in the variant tree\n     */\n    var remove;\n    if (isVariantNode && shouldInheritVariants && !isControllingVariants) {\n        remove = (_b = variantContext.parent) === null || _b === void 0 ? void 0 : _b.addVariantChild(visualElement);\n        visualElement.inheritsVariants = true;\n    }\n    /**\n     *\n     */\n    if (!isControllingVariants &&\n        shouldInheritVariants && ((_c = visualElement.parent) === null || _c === void 0 ? void 0 : _c.isMounted) &&\n        initial !== false &&\n        animate) {\n        visualElement.manuallyAnimateOnMount = true;\n    }\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n        visualElement.isMounted = true;\n        return function () {\n            visualElement.isMounted = false;\n            remove === null || remove === void 0 ? void 0 : remove();\n        };\n    }, []);\n    /**\n     * What we want here is to clear the order of variant children in useLayoutEffect\n     * then children can re-add themselves in useEffect. This should add them in the intended order\n     * for staggerChildren to work correctly.\n     */\n    useIsomorphicLayoutEffect(function () {\n        var _a;\n        isPresent(presenceContext) && ((_a = visualElement.variantChildrenOrder) === null || _a === void 0 ? void 0 : _a.clear());\n    });\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n        var _a;\n        isVariantNode && ((_a = variantContext.parent) === null || _a === void 0 ? void 0 : _a.addVariantChildOrder(visualElement));\n    });\n    return nextContext;\n}\nvar variantProps = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])([\"initial\"], variantPriorityOrder);\nvar numVariantProps = variantProps.length;\nfunction isVariantLabel$1(v) {\n    return typeof v === \"string\" || Array.isArray(v);\n}\nfunction isAnimationControls(v) {\n    return typeof v === \"object\" && typeof v.start === \"function\";\n}\nfunction checkIfControllingVariants(props) {\n    var _a;\n    return (typeof ((_a = props.animate) === null || _a === void 0 ? void 0 : _a.start) === \"function\" ||\n        isVariantLabel$1(props.animate) ||\n        isVariantLabel$1(props.whileHover) ||\n        isVariantLabel$1(props.whileDrag) ||\n        isVariantLabel$1(props.whileTap) ||\n        isVariantLabel$1(props.whileFocus) ||\n        isVariantLabel$1(props.exit));\n}\n\n/**\n * Create a `motion` component.\n *\n * This function accepts a Component argument, which can be either a string (ie \"div\"\n * for `motion.div`), or an actual React component.\n *\n * Alongside this is a config option which provides a way of rendering the provided\n * component \"offline\", or outside the React render cycle.\n *\n * @internal\n */\nfunction createMotionComponent(Component, _a) {\n    var defaultFeatures = _a.defaultFeatures, useVisualElement = _a.useVisualElement, useRender = _a.useRender;\n    function MotionComponent(props, externalRef) {\n        /**\n         * If a component is static, we only visually update it as a\n         * result of a React re-render, rather than any interactions or animations.\n         * If this component or any ancestor is static, we disable hardware acceleration\n         * and don't load any additional functionality.\n         */\n        var isStatic = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(MotionConfigContext).isStatic;\n        /**\n         * Create a VisualElement for this component. A VisualElement provides a common\n         * interface to renderer-specific APIs (ie DOM/Three.js etc) as well as\n         * providing a way of rendering to these APIs outside of the React render loop\n         * for more performant animations and interactions\n         */\n        var visualElement = useVisualElement(Component, props, isStatic, externalRef);\n        /**\n         * Scrape MotionValues from props and add/remove them to/from the VisualElement.\n         */\n        useMotionValues(visualElement, props);\n        /**\n         * Add the visualElement as a node in the variant tree.\n         */\n        var variantContext = useVariants(visualElement, props, isStatic);\n        /**\n         * Load features as renderless components unless the component isStatic\n         */\n        var features = useFeatures(defaultFeatures, isStatic, visualElement, props);\n        /**\n         * Only create a new context value when the sub-contexts change.\n         */\n        var context = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useMemo\"])(function () { return ({ visualElement: visualElement, variantContext: variantContext }); }, [\n            visualElement,\n            variantContext,\n        ]);\n        var component = useRender(Component, props, visualElement);\n        /**\n         * If this component is a child of AnimateSharedLayout, we need to snapshot the component\n         * before it's unmounted. This lives here rather than in features/layout/Measure because\n         * as a child component its unmount effect runs after this component has been unmounted.\n         */\n        useSnapshotOnUnmount(visualElement);\n        // The mount order and hierarchy is specific to ensure our element ref is hydrated by the time\n        // all plugins and features has to execute.\n        return (Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(react__WEBPACK_IMPORTED_MODULE_5__[\"Fragment\"], null,\n            Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(MotionContext.Provider, { value: context }, component),\n            features));\n    }\n    return Object(react__WEBPACK_IMPORTED_MODULE_5__[\"forwardRef\"])(MotionComponent);\n}\n\n/**\n * Apply constraints to a point. These constraints are both physical along an\n * axis, and an elastic factor that determines how much to constrain the point\n * by if it does lie outside the defined parameters.\n */\nfunction applyConstraints(point, _a, elastic) {\n    var min = _a.min, max = _a.max;\n    if (min !== undefined && point < min) {\n        // If we have a min point defined, and this is outside of that, constrain\n        point = elastic ? Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(min, point, elastic) : Math.max(point, min);\n    }\n    else if (max !== undefined && point > max) {\n        // If we have a max point defined, and this is outside of that, constrain\n        point = elastic ? Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(max, point, elastic) : Math.min(point, max);\n    }\n    return point;\n}\n/**\n * Calculates a min projection point based on a pointer, pointer progress\n * within the drag target, and constraints.\n *\n * For instance if an element was 100px width, we were dragging from 0.25\n * along this axis, the pointer is at 200px, and there were no constraints,\n * we would calculate a min projection point of 175px.\n */\nfunction calcConstrainedMinPoint(point, length, progress, constraints, elastic) {\n    // Calculate a min point for this axis and apply it to the current pointer\n    var min = point - length * progress;\n    return constraints ? applyConstraints(min, constraints, elastic) : min;\n}\n/**\n * Calculate constraints in terms of the viewport when defined relatively to the\n * measured axis. This is measured from the nearest edge, so a max constraint of 200\n * on an axis with a max value of 300 would return a constraint of 500 - axis length\n */\nfunction calcRelativeAxisConstraints(axis, min, max) {\n    return {\n        min: min !== undefined ? axis.min + min : undefined,\n        max: max !== undefined\n            ? axis.max + max - (axis.max - axis.min)\n            : undefined,\n    };\n}\n/**\n * Calculate constraints in terms of the viewport when\n * defined relatively to the measured bounding box.\n */\nfunction calcRelativeConstraints(layoutBox, _a) {\n    var top = _a.top, left = _a.left, bottom = _a.bottom, right = _a.right;\n    return {\n        x: calcRelativeAxisConstraints(layoutBox.x, left, right),\n        y: calcRelativeAxisConstraints(layoutBox.y, top, bottom),\n    };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative axis\n */\nfunction calcViewportAxisConstraints(layoutAxis, constraintsAxis) {\n    var _a;\n    var min = constraintsAxis.min - layoutAxis.min;\n    var max = constraintsAxis.max - layoutAxis.max;\n    // If the constraints axis is actually smaller than the layout axis then we can\n    // flip the constraints\n    if (constraintsAxis.max - constraintsAxis.min <\n        layoutAxis.max - layoutAxis.min) {\n        _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])([max, min], 2), min = _a[0], max = _a[1];\n    }\n    return {\n        min: layoutAxis.min + min,\n        max: layoutAxis.min + max,\n    };\n}\n/**\n * Calculate viewport constraints when defined as another viewport-relative box\n */\nfunction calcViewportConstraints(layoutBox, constraintsBox) {\n    return {\n        x: calcViewportAxisConstraints(layoutBox.x, constraintsBox.x),\n        y: calcViewportAxisConstraints(layoutBox.y, constraintsBox.y),\n    };\n}\n/**\n * Calculate the an axis position based on two axes and a progress value.\n */\nfunction calcPositionFromProgress(axis, constraints, progress) {\n    var axisLength = axis.max - axis.min;\n    var min = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(constraints.min, constraints.max - axisLength, progress);\n    return { min: min, max: min + axisLength };\n}\n/**\n * Rebase the calculated viewport constraints relative to the layout.min point.\n */\nfunction rebaseAxisConstraints(layout, constraints) {\n    var relativeConstraints = {};\n    if (constraints.min !== undefined) {\n        relativeConstraints.min = constraints.min - layout.min;\n    }\n    if (constraints.max !== undefined) {\n        relativeConstraints.max = constraints.max - layout.min;\n    }\n    return relativeConstraints;\n}\n\nvar elementDragControls = new WeakMap();\n/**\n *\n */\nvar lastPointerEvent;\nvar VisualElementDragControls = /** @class */ (function () {\n    function VisualElementDragControls(_a) {\n        var visualElement = _a.visualElement;\n        /**\n         * Track whether we're currently dragging.\n         *\n         * @internal\n         */\n        this.isDragging = false;\n        /**\n         * The current direction of drag, or `null` if both.\n         *\n         * @internal\n         */\n        this.currentDirection = null;\n        /**\n         * The permitted boundaries of travel, in pixels.\n         *\n         * @internal\n         */\n        this.constraints = false;\n        /**\n         * A reference to the host component's latest props.\n         *\n         * @internal\n         */\n        this.props = {};\n        /**\n         * @internal\n         */\n        this.hasMutatedConstraints = false;\n        /**\n         * Track the initial position of the cursor relative to the dragging element\n         * when dragging starts as a value of 0-1 on each axis. We then use this to calculate\n         * an ideal bounding box for the VisualElement renderer to project into every frame.\n         *\n         * @internal\n         */\n        this.cursorProgress = {\n            x: 0.5,\n            y: 0.5,\n        };\n        // When updating _dragX, or _dragY instead of the VisualElement,\n        // persist their values between drag gestures.\n        this.originPoint = {};\n        // This is a reference to the global drag gesture lock, ensuring only one component\n        // can \"capture\" the drag of one or both axes.\n        // TODO: Look into moving this into pansession?\n        this.openGlobalLock = null;\n        /**\n         * @internal\n         */\n        this.panSession = null;\n        this.visualElement = visualElement;\n        this.visualElement.enableLayoutProjection();\n        elementDragControls.set(visualElement, this);\n    }\n    /**\n     * Instantiate a PanSession for the drag gesture\n     *\n     * @public\n     */\n    VisualElementDragControls.prototype.start = function (originEvent, _a) {\n        var _this = this;\n        var _b = _a === void 0 ? {} : _a, _c = _b.snapToCursor, snapToCursor = _c === void 0 ? false : _c, cursorProgress = _b.cursorProgress;\n        /**\n         * If this drag session has been manually triggered by the user, it might be from an event\n         * outside the draggable element. If snapToCursor is set to true, we need to measure the position\n         * of the element and snap it to the cursor.\n         */\n        snapToCursor && this.snapToCursor(originEvent);\n        var onSessionStart = function () {\n            // Stop any animations on both axis values immediately. This allows the user to throw and catch\n            // the component.\n            _this.stopMotion();\n        };\n        var onStart = function (event, info) {\n            var _a, _b, _c;\n            // Attempt to grab the global drag gesture lock - maybe make this part of PanSession\n            var _d = _this.props, drag = _d.drag, dragPropagation = _d.dragPropagation;\n            if (drag && !dragPropagation) {\n                if (_this.openGlobalLock)\n                    _this.openGlobalLock();\n                _this.openGlobalLock = getGlobalLock(drag);\n                // If we don 't have the lock, don't start dragging\n                if (!_this.openGlobalLock)\n                    return;\n            }\n            /**\n             * Record the progress of the mouse within the draggable element on each axis.\n             * onPan, we're going to use this to calculate a new bounding box for the element to\n             * project into. This will ensure that even if the DOM element moves via a relayout, it'll\n             * stick to the correct place under the pointer.\n             */\n            _this.prepareBoundingBox();\n            _this.visualElement.lockTargetBox();\n            /**\n             * Resolve the drag constraints. These are either set as top/right/bottom/left constraints\n             * relative to the element's layout, or a ref to another element. Both need converting to\n             * viewport coordinates.\n             */\n            _this.resolveDragConstraints();\n            /**\n             * When dragging starts, we want to find where the cursor is relative to the bounding box\n             * of the element. Every frame, we calculate a new bounding box using this relative position\n             * and let the visualElement renderer figure out how to reproject the element into this bounding\n             * box.\n             *\n             * By doing it this way, rather than applying an x/y transform directly to the element,\n             * we can ensure the component always visually sticks to the cursor as we'd expect, even\n             * if the DOM element itself changes layout as a result of React updates the user might\n             * make based on the drag position.\n             */\n            var point = getViewportPointFromEvent(event).point;\n            eachAxis(function (axis) {\n                var _a = _this.visualElement.targetBox[axis], min = _a.min, max = _a.max;\n                _this.cursorProgress[axis] = cursorProgress\n                    ? cursorProgress[axis]\n                    : Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* progress */ \"w\"])(min, max, point[axis]);\n                /**\n                 * If we have external drag MotionValues, record their origin point. On pointermove\n                 * we'll apply the pan gesture offset directly to this value.\n                 */\n                var axisValue = _this.getAxisMotionValue(axis);\n                if (axisValue) {\n                    _this.originPoint[axis] = axisValue.get();\n                }\n            });\n            // Set current drag status\n            _this.isDragging = true;\n            _this.currentDirection = null;\n            // Fire onDragStart event\n            (_b = (_a = _this.props).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, event, info);\n            (_c = _this.visualElement.animationState) === null || _c === void 0 ? void 0 : _c.setActive(AnimationType.Drag, true);\n        };\n        var onMove = function (event, info) {\n            var _a, _b, _c, _d;\n            var _e = _this.props, dragPropagation = _e.dragPropagation, dragDirectionLock = _e.dragDirectionLock;\n            // If we didn't successfully receive the gesture lock, early return.\n            if (!dragPropagation && !_this.openGlobalLock)\n                return;\n            var offset = info.offset;\n            // Attempt to detect drag direction if directionLock is true\n            if (dragDirectionLock && _this.currentDirection === null) {\n                _this.currentDirection = getCurrentDirection(offset);\n                // If we've successfully set a direction, notify listener\n                if (_this.currentDirection !== null) {\n                    (_b = (_a = _this.props).onDirectionLock) === null || _b === void 0 ? void 0 : _b.call(_a, _this.currentDirection);\n                }\n                return;\n            }\n            // Update each point with the latest position\n            _this.updateAxis(\"x\", event, offset);\n            _this.updateAxis(\"y\", event, offset);\n            // Fire onDrag event\n            (_d = (_c = _this.props).onDrag) === null || _d === void 0 ? void 0 : _d.call(_c, event, info);\n            // Update the last pointer event\n            lastPointerEvent = event;\n        };\n        var onEnd = function (event, info) { return _this.stop(event, info); };\n        var transformPagePoint = this.props.transformPagePoint;\n        this.panSession = new PanSession(originEvent, {\n            onSessionStart: onSessionStart,\n            onStart: onStart,\n            onMove: onMove,\n            onEnd: onEnd,\n        }, { transformPagePoint: transformPagePoint });\n    };\n    /**\n     * Ensure the component's layout and target bounding boxes are up-to-date.\n     */\n    VisualElementDragControls.prototype.prepareBoundingBox = function () {\n        var visualElement = this.visualElement;\n        visualElement.withoutTransform(function () {\n            visualElement.measureLayout();\n        });\n        visualElement.rebaseTargetBox(true, visualElement.getBoundingBoxWithoutTransforms());\n    };\n    VisualElementDragControls.prototype.resolveDragConstraints = function () {\n        var _this = this;\n        var dragConstraints = this.props.dragConstraints;\n        if (dragConstraints) {\n            this.constraints = isRefObject(dragConstraints)\n                ? this.resolveRefConstraints(this.visualElement.box, dragConstraints)\n                : calcRelativeConstraints(this.visualElement.box, dragConstraints);\n        }\n        else {\n            this.constraints = false;\n        }\n        /**\n         * If we're outputting to external MotionValues, we want to rebase the measured constraints\n         * from viewport-relative to component-relative.\n         */\n        if (this.constraints && !this.hasMutatedConstraints) {\n            eachAxis(function (axis) {\n                if (_this.getAxisMotionValue(axis)) {\n                    _this.constraints[axis] = rebaseAxisConstraints(_this.visualElement.box[axis], _this.constraints[axis]);\n                }\n            });\n        }\n    };\n    VisualElementDragControls.prototype.resolveRefConstraints = function (layoutBox, constraints) {\n        var _a = this.props, onMeasureDragConstraints = _a.onMeasureDragConstraints, transformPagePoint = _a.transformPagePoint;\n        var constraintsElement = constraints.current;\n        Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* invariant */ \"a\"])(constraintsElement !== null, \"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.\");\n        this.constraintsBox = getBoundingBox(constraintsElement, transformPagePoint);\n        var measuredConstraints = calcViewportConstraints(layoutBox, this.constraintsBox);\n        /**\n         * If there's an onMeasureDragConstraints listener we call it and\n         * if different constraints are returned, set constraints to that\n         */\n        if (onMeasureDragConstraints) {\n            var userConstraints = onMeasureDragConstraints(convertAxisBoxToBoundingBox(measuredConstraints));\n            this.hasMutatedConstraints = !!userConstraints;\n            if (userConstraints) {\n                measuredConstraints = convertBoundingBoxToAxisBox(userConstraints);\n            }\n        }\n        return measuredConstraints;\n    };\n    VisualElementDragControls.prototype.cancelDrag = function () {\n        var _a;\n        this.isDragging = false;\n        this.panSession && this.panSession.end();\n        this.panSession = null;\n        if (!this.props.dragPropagation && this.openGlobalLock) {\n            this.openGlobalLock();\n            this.openGlobalLock = null;\n        }\n        (_a = this.visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Drag, false);\n    };\n    VisualElementDragControls.prototype.stop = function (event, info) {\n        var _a;\n        this.visualElement.unlockTargetBox();\n        (_a = this.panSession) === null || _a === void 0 ? void 0 : _a.end();\n        this.panSession = null;\n        var isDragging = this.isDragging;\n        this.cancelDrag();\n        if (!isDragging)\n            return;\n        var _b = this.props, dragMomentum = _b.dragMomentum, dragElastic = _b.dragElastic, onDragEnd = _b.onDragEnd;\n        if (dragMomentum || dragElastic) {\n            var velocity = info.velocity;\n            this.animateDragEnd(velocity);\n        }\n        onDragEnd === null || onDragEnd === void 0 ? void 0 : onDragEnd(event, info);\n    };\n    VisualElementDragControls.prototype.snapToCursor = function (event) {\n        var _this = this;\n        this.prepareBoundingBox();\n        eachAxis(function (axis) {\n            var axisValue = _this.getAxisMotionValue(axis);\n            if (axisValue) {\n                var point = getViewportPointFromEvent(event).point;\n                var box = _this.visualElement.box;\n                var length_1 = box[axis].max - box[axis].min;\n                var center = box[axis].min + length_1 / 2;\n                var offset = point[axis] - center;\n                _this.originPoint[axis] = point[axis];\n                axisValue.set(offset);\n            }\n            else {\n                _this.cursorProgress[axis] = 0.5;\n                _this.updateVisualElementAxis(axis, event);\n            }\n        });\n    };\n    /**\n     * Update the specified axis with the latest pointer information.\n     */\n    VisualElementDragControls.prototype.updateAxis = function (axis, event, offset) {\n        var drag = this.props.drag;\n        // If we're not dragging this axis, do an early return.\n        if (!shouldDrag(axis, drag, this.currentDirection))\n            return;\n        return this.getAxisMotionValue(axis)\n            ? this.updateAxisMotionValue(axis, offset)\n            : this.updateVisualElementAxis(axis, event);\n    };\n    VisualElementDragControls.prototype.updateAxisMotionValue = function (axis, offset) {\n        var axisValue = this.getAxisMotionValue(axis);\n        if (!offset || !axisValue)\n            return;\n        var dragElastic = this.props.dragElastic;\n        var nextValue = this.originPoint[axis] + offset[axis];\n        var update = this.constraints\n            ? applyConstraints(nextValue, this.constraints[axis], dragElastic)\n            : nextValue;\n        axisValue.set(update);\n    };\n    VisualElementDragControls.prototype.updateVisualElementAxis = function (axis, event) {\n        var _a;\n        var dragElastic = this.props.dragElastic;\n        // Get the actual layout bounding box of the element\n        var axisLayout = this.visualElement.box[axis];\n        // Calculate its current length. In the future we might want to lerp this to animate\n        // between lengths if the layout changes as we change the DOM\n        var axisLength = axisLayout.max - axisLayout.min;\n        // Get the initial progress that the pointer sat on this axis on gesture start.\n        var axisProgress = this.cursorProgress[axis];\n        var point = getViewportPointFromEvent(event).point;\n        // Calculate a new min point based on the latest pointer position, constraints and elastic\n        var min = calcConstrainedMinPoint(point[axis], axisLength, axisProgress, (_a = this.constraints) === null || _a === void 0 ? void 0 : _a[axis], dragElastic);\n        // Update the axis viewport target with this new min and the length\n        this.visualElement.setAxisTarget(axis, min, min + axisLength);\n    };\n    VisualElementDragControls.prototype.updateProps = function (_a) {\n        var _b = _a.drag, drag = _b === void 0 ? false : _b, _c = _a.dragDirectionLock, dragDirectionLock = _c === void 0 ? false : _c, _d = _a.dragPropagation, dragPropagation = _d === void 0 ? false : _d, _e = _a.dragConstraints, dragConstraints = _e === void 0 ? false : _e, _f = _a.dragElastic, dragElastic = _f === void 0 ? 0.35 : _f, _g = _a.dragMomentum, dragMomentum = _g === void 0 ? true : _g, remainingProps = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, [\"drag\", \"dragDirectionLock\", \"dragPropagation\", \"dragConstraints\", \"dragElastic\", \"dragMomentum\"]);\n        this.props = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({ drag: drag,\n            dragDirectionLock: dragDirectionLock,\n            dragPropagation: dragPropagation,\n            dragConstraints: dragConstraints,\n            dragElastic: dragElastic,\n            dragMomentum: dragMomentum }, remainingProps);\n    };\n    /**\n     * Drag works differently depending on which props are provided.\n     *\n     * - If _dragX and _dragY are provided, we output the gesture delta directly to those motion values.\n     * - If the component will perform layout animations, we output the gesture to the component's\n     *      visual bounding box\n     * - Otherwise, we apply the delta to the x/y motion values.\n     */\n    VisualElementDragControls.prototype.getAxisMotionValue = function (axis) {\n        var _a = this.props, layout = _a.layout, layoutId = _a.layoutId;\n        var dragKey = \"_drag\" + axis.toUpperCase();\n        if (this.props[dragKey]) {\n            return this.props[dragKey];\n        }\n        else if (!layout && layoutId === undefined) {\n            return this.visualElement.getValue(axis, 0);\n        }\n    };\n    VisualElementDragControls.prototype.animateDragEnd = function (velocity) {\n        var _this = this;\n        var _a = this.props, drag = _a.drag, dragMomentum = _a.dragMomentum, dragElastic = _a.dragElastic, dragTransition = _a.dragTransition;\n        var momentumAnimations = eachAxis(function (axis) {\n            if (!shouldDrag(axis, drag, _this.currentDirection)) {\n                return;\n            }\n            var transition = _this.constraints ? _this.constraints[axis] : {};\n            /**\n             * Overdamp the boundary spring if `dragElastic` is disabled. There's still a frame\n             * of spring animations so we should look into adding a disable spring option to `inertia`.\n             * We could do something here where we affect the `bounceStiffness` and `bounceDamping`\n             * using the value of `dragElastic`.\n             */\n            var bounceStiffness = dragElastic ? 200 : 1000000;\n            var bounceDamping = dragElastic ? 40 : 10000000;\n            var inertia = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({ type: \"inertia\", velocity: dragMomentum ? velocity[axis] : 0, bounceStiffness: bounceStiffness,\n                bounceDamping: bounceDamping, timeConstant: 750, restDelta: 1, restSpeed: 10 }, dragTransition), transition);\n            // If we're not animating on an externally-provided `MotionValue` we can use the\n            // component's animation controls which will handle interactions with whileHover (etc),\n            // otherwise we just have to animate the `MotionValue` itself.\n            return _this.getAxisMotionValue(axis)\n                ? _this.startAxisValueAnimation(axis, inertia)\n                : _this.visualElement.startLayoutAxisAnimation(axis, inertia);\n        });\n        // Run all animations and then resolve the new drag constraints.\n        return Promise.all(momentumAnimations).then(function () {\n            var _a, _b;\n            (_b = (_a = _this.props).onDragTransitionEnd) === null || _b === void 0 ? void 0 : _b.call(_a);\n        });\n    };\n    VisualElementDragControls.prototype.stopMotion = function () {\n        var _this = this;\n        eachAxis(function (axis) {\n            var axisValue = _this.getAxisMotionValue(axis);\n            axisValue\n                ? axisValue.stop()\n                : _this.visualElement.stopLayoutAnimation();\n        });\n    };\n    VisualElementDragControls.prototype.startAxisValueAnimation = function (axis, transition) {\n        var axisValue = this.getAxisMotionValue(axis);\n        if (!axisValue)\n            return;\n        var currentValue = axisValue.get();\n        axisValue.set(currentValue);\n        axisValue.set(currentValue); // Set twice to hard-reset velocity\n        return startAnimation(axis, axisValue, 0, transition);\n    };\n    VisualElementDragControls.prototype.scalePoint = function () {\n        var _this = this;\n        var _a = this.props, drag = _a.drag, dragConstraints = _a.dragConstraints;\n        if (!isRefObject(dragConstraints) || !this.constraintsBox)\n            return;\n        // Stop any current animations as there can be some visual glitching if we resize mid animation\n        this.stopMotion();\n        // Record the relative progress of the targetBox relative to the constraintsBox\n        var boxProgress = { x: 0, y: 0 };\n        eachAxis(function (axis) {\n            boxProgress[axis] = calcOrigin(_this.visualElement.targetBox[axis], _this.constraintsBox[axis]);\n        });\n        /**\n         * For each axis, calculate the current progress of the layout axis within the constraints.\n         * Then, using the latest layout and constraints measurements, reposition the new layout axis\n         * proportionally within the constraints.\n         */\n        this.prepareBoundingBox();\n        this.resolveDragConstraints();\n        eachAxis(function (axis) {\n            if (!shouldDrag(axis, drag, null))\n                return;\n            // Calculate the position of the targetBox relative to the constraintsBox using the\n            // previously calculated progress\n            var _a = calcPositionFromProgress(_this.visualElement.targetBox[axis], _this.constraintsBox[axis], boxProgress[axis]), min = _a.min, max = _a.max;\n            _this.visualElement.setAxisTarget(axis, min, max);\n        });\n    };\n    VisualElementDragControls.prototype.mount = function (visualElement) {\n        var _this = this;\n        var element = visualElement.getInstance();\n        /**\n         * Attach a pointerdown event listener on this DOM element to initiate drag tracking.\n         */\n        var stopPointerListener = addPointerEvent(element, \"pointerdown\", function (event) {\n            var _a = _this.props, drag = _a.drag, _b = _a.dragListener, dragListener = _b === void 0 ? true : _b;\n            drag && dragListener && _this.start(event);\n        });\n        /**\n         * Attach a window resize listener to scale the draggable target within its defined\n         * constraints as the window resizes.\n         */\n        var stopResizeListener = addDomEvent(window, \"resize\", function () {\n            _this.scalePoint();\n        });\n        /**\n         * Ensure drag constraints are resolved correctly relative to the dragging element\n         * whenever its layout changes.\n         */\n        var stopLayoutUpdateListener = visualElement.onLayoutUpdate(function () {\n            if (_this.isDragging)\n                _this.resolveDragConstraints();\n        });\n        /**\n         * If the previous component with this same layoutId was dragging at the time\n         * it was unmounted, we want to continue the same gesture on this component.\n         */\n        var prevSnapshot = visualElement.prevSnapshot;\n        (prevSnapshot === null || prevSnapshot === void 0 ? void 0 : prevSnapshot.isDragging) &&\n            this.start(lastPointerEvent, {\n                cursorProgress: prevSnapshot.cursorProgress,\n            });\n        /**\n         * Return a function that will teardown the drag gesture\n         */\n        return function () {\n            stopPointerListener === null || stopPointerListener === void 0 ? void 0 : stopPointerListener();\n            stopResizeListener === null || stopResizeListener === void 0 ? void 0 : stopResizeListener();\n            stopLayoutUpdateListener === null || stopLayoutUpdateListener === void 0 ? void 0 : stopLayoutUpdateListener();\n            _this.cancelDrag();\n        };\n    };\n    return VisualElementDragControls;\n}());\nfunction shouldDrag(direction, drag, currentDirection) {\n    return ((drag === true || drag === direction) &&\n        (currentDirection === null || currentDirection === direction));\n}\n/**\n * Based on an x/y offset determine the current drag direction. If both axis' offsets are lower\n * than the provided threshold, return `null`.\n *\n * @param offset - The x/y offset from origin.\n * @param lockThreshold - (Optional) - the minimum absolute offset before we can determine a drag direction.\n */\nfunction getCurrentDirection(offset, lockThreshold) {\n    if (lockThreshold === void 0) { lockThreshold = 10; }\n    var direction = null;\n    if (Math.abs(offset.y) > lockThreshold) {\n        direction = \"y\";\n    }\n    else if (Math.abs(offset.x) > lockThreshold) {\n        direction = \"x\";\n    }\n    return direction;\n}\n\n/**\n * A hook that allows an element to be dragged.\n *\n * @internal\n */\nfunction useDrag(props, visualElement) {\n    var groupDragControls = props.dragControls;\n    var transformPagePoint = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(MotionConfigContext).transformPagePoint;\n    var dragControls = useConstant(function () {\n        return new VisualElementDragControls({\n            visualElement: visualElement,\n        });\n    });\n    dragControls.updateProps(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, props), { transformPagePoint: transformPagePoint }));\n    // If we've been provided a DragControls for manual control over the drag gesture,\n    // subscribe this component to it on mount.\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () { return groupDragControls && groupDragControls.subscribe(dragControls); }, [dragControls]);\n    // Mount the drag controls with the visualElement\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () { return dragControls.mount(visualElement); }, []);\n}\n\nvar Component = makeRenderlessComponent(function (_a) {\n    var visualElement = _a.visualElement, props = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, [\"visualElement\"]);\n    return useDrag(props, visualElement);\n});\n/**\n * @public\n */\nvar Drag = {\n    key: \"drag\",\n    shouldRender: function (props) { return !!props.drag || !!props.dragControls; },\n    getComponent: function () { return Component; },\n};\n\n/**\n * TODO: This component is quite small and no longer directly imports animation code.\n * It could be a candidate for folding back into the main `motion` component.\n */\nvar ExitComponent = makeRenderlessComponent(function (props) {\n    var custom = props.custom, visualElement = props.visualElement;\n    var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(usePresence(), 2), isPresent = _a[0], onExitComplete = _a[1];\n    var presenceContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(PresenceContext);\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n        var _a, _b;\n        var animation = (_a = visualElement.animationState) === null || _a === void 0 ? void 0 : _a.setActive(AnimationType.Exit, !isPresent, { custom: (_b = presenceContext === null || presenceContext === void 0 ? void 0 : presenceContext.custom) !== null && _b !== void 0 ? _b : custom });\n        !isPresent && (animation === null || animation === void 0 ? void 0 : animation.then(onExitComplete));\n    }, [isPresent]);\n});\n/**\n * @public\n */\nvar Exit = {\n    key: \"exit\",\n    shouldRender: function (props) { return !!props.exit && !checkShouldInheritVariant(props); },\n    getComponent: function () { return ExitComponent; },\n};\n\n/**\n * `useAnimationGroupSubscription` allows a component to subscribe to an\n * externally-created `AnimationControls`, created by the `useAnimation` hook.\n *\n * @param animation\n * @param controls\n *\n * @internal\n */\nfunction useAnimationGroupSubscription(visualElement, animation) {\n    var unsubscribe = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useMemo\"])(function () { return animation.subscribe(visualElement); }, [\n        animation,\n    ]);\n    useUnmountEffect(function () { return unsubscribe === null || unsubscribe === void 0 ? void 0 : unsubscribe(); });\n}\n\nvar AnimationState = makeRenderlessComponent(function (props) {\n    var visualElement = props.visualElement, animate = props.animate;\n    /**\n     * We dynamically generate the AnimationState manager as it contains a reference\n     * to the underlying animation library. We only want to load that if we load this,\n     * so people can optionally code split it out using the `m` component.\n     */\n    if (!visualElement.animationState) {\n        visualElement.animationState = createAnimationState(visualElement);\n    }\n    var variantContext = useVariantContext();\n    /**\n     * Every render, we want to update the AnimationState with the latest props\n     * and context. We could add these to the dependency list but as many of these\n     * props can be objects or arrays it's not clear that we'd gain much performance.\n     */\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n        visualElement.animationState.setProps(props, visualElement.inheritsVariants ? variantContext : undefined);\n    });\n    /**\n     * Subscribe any provided AnimationControls to the component's VisualElement\n     */\n    if (animate instanceof AnimationControls) {\n        useAnimationGroupSubscription(visualElement, animate);\n    }\n});\n/**\n * @public\n */\nvar Animation = {\n    key: \"animation\",\n    shouldRender: function () { return true; },\n    getComponent: function (_a) {\n        var animate = _a.animate, whileHover = _a.whileHover, whileFocus = _a.whileFocus, whileTap = _a.whileTap, whileDrag = _a.whileDrag, exit = _a.exit, variants = _a.variants;\n        return animate ||\n            whileHover ||\n            whileFocus ||\n            whileTap ||\n            whileDrag ||\n            exit ||\n            variants\n            ? AnimationState\n            : undefined;\n    },\n};\n\nfunction tweenAxis(target, prev, next, p) {\n    target.min = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(prev.min, next.min, p);\n    target.max = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(prev.max, next.max, p);\n}\n\nvar progressTarget = 1000;\nvar Animate = /** @class */ (function (_super) {\n    Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __extends */ \"b\"])(Animate, _super);\n    function Animate() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.frameTarget = {\n            x: { min: 0, max: 0 },\n            y: { min: 0, max: 0 },\n        };\n        _this.stopAxisAnimation = {\n            x: undefined,\n            y: undefined,\n        };\n        _this.animate = function (target, origin, _a) {\n            if (_a === void 0) { _a = {}; }\n            var originBox = _a.originBox, targetBox = _a.targetBox, visibilityAction = _a.visibilityAction, shouldStackAnimate = _a.shouldStackAnimate, config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, [\"originBox\", \"targetBox\", \"visibilityAction\", \"shouldStackAnimate\"]);\n            var _b = _this.props, visualElement = _b.visualElement, layout = _b.layout;\n            /**\n             * Early return if we've been instructed not to animate this render.\n             */\n            if (shouldStackAnimate === false)\n                return _this.safeToRemove();\n            /**\n             * Allow the measured origin (prev bounding box) and target (actual layout) to be\n             * overridden by the provided config.\n             */\n            origin = originBox || origin;\n            target = targetBox || target;\n            var boxHasMoved = hasMoved(origin, target);\n            var animations = eachAxis(function (axis) {\n                /**\n                 * If layout is set to \"position\", we can resize the origin box based on the target\n                 * box and only animate its position.\n                 */\n                if (layout === \"position\") {\n                    var targetLength = target[axis].max - target[axis].min;\n                    origin[axis].max = origin[axis].min + targetLength;\n                }\n                if (visualElement.isTargetBoxLocked) {\n                    return;\n                }\n                else if (visibilityAction !== undefined) {\n                    // If we're meant to show/hide the visualElement, do so\n                    visibilityAction === VisibilityAction.Hide\n                        ? visualElement.hide()\n                        : visualElement.show();\n                }\n                else if (boxHasMoved) {\n                    // If the box has moved, animate between it's current visual state and its\n                    // final state\n                    return _this.animateAxis(axis, target[axis], origin[axis], config);\n                }\n                else {\n                    // If the box has remained in the same place, immediately set the axis target\n                    // to the final desired state\n                    return visualElement.setAxisTarget(axis, target[axis].min, target[axis].max);\n                }\n            });\n            // Force a render to ensure there's no flash of uncorrected bounding box.\n            visualElement.render();\n            /**\n             * If this visualElement isn't present (ie it's been removed from the tree by the user but\n             * kept in by the tree by AnimatePresence) then call safeToRemove when all axis animations\n             * have successfully finished.\n             */\n            return Promise.all(animations).then(function () {\n                var _a, _b;\n                (_b = (_a = _this.props).onLayoutAnimationComplete) === null || _b === void 0 ? void 0 : _b.call(_a);\n                if (visualElement.isPresent) {\n                    visualElement.presence = Presence.Present;\n                }\n                else {\n                    _this.safeToRemove();\n                }\n            });\n        };\n        return _this;\n    }\n    Animate.prototype.componentDidMount = function () {\n        var _this = this;\n        var visualElement = this.props.visualElement;\n        visualElement.animateMotionValue = startAnimation;\n        visualElement.enableLayoutProjection();\n        this.unsubLayoutReady = visualElement.onLayoutUpdate(this.animate);\n        visualElement.updateConfig(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, visualElement.config), { safeToRemove: function () { return _this.safeToRemove(); } }));\n    };\n    Animate.prototype.componentWillUnmount = function () {\n        var _this = this;\n        this.unsubLayoutReady();\n        eachAxis(function (axis) { var _a, _b; return (_b = (_a = _this.stopAxisAnimation)[axis]) === null || _b === void 0 ? void 0 : _b.call(_a); });\n    };\n    /**\n     * TODO: This manually performs animations on the visualElement's layout progress\n     * values. It'd be preferable to amend the HTMLVisualElement.startLayoutAxisAnimation\n     * API to accept more custom animations like this.\n     */\n    Animate.prototype.animateAxis = function (axis, target, origin, _a) {\n        var _b, _c;\n        var _d = _a === void 0 ? {} : _a, transition = _d.transition, crossfadeOpacity = _d.crossfadeOpacity;\n        (_c = (_b = this.stopAxisAnimation)[axis]) === null || _c === void 0 ? void 0 : _c.call(_b);\n        var visualElement = this.props.visualElement;\n        var frameTarget = this.frameTarget[axis];\n        var layoutProgress = visualElement.getAxisProgress()[axis];\n        /**\n         * Set layout progress back to 0. We set it twice to hard-reset any velocity that might\n         * be re-incoporated into a subsequent spring animation.\n         */\n        layoutProgress.clearListeners();\n        layoutProgress.set(0);\n        layoutProgress.set(0);\n        /**\n         * If this is a crossfade animation, create a function that updates both the opacity of this component\n         * and the one being crossfaded out.\n         */\n        var crossfade;\n        if (crossfadeOpacity) {\n            crossfade = this.createCrossfadeAnimation(crossfadeOpacity);\n            visualElement.show();\n        }\n        /**\n         * Create an animation function to run once per frame. This will tween the visual bounding box from\n         * origin to target using the latest progress value.\n         */\n        var frame = function () {\n            // Convert the latest layoutProgress, which is a value from 0-1000, into a 0-1 progress\n            var p = layoutProgress.get() / progressTarget;\n            // Tween the axis and update the visualElement with the latest values\n            tweenAxis(frameTarget, origin, target, p);\n            visualElement.setAxisTarget(axis, frameTarget.min, frameTarget.max);\n            // If this is a crossfade animation, update both elements.\n            crossfade === null || crossfade === void 0 ? void 0 : crossfade(p);\n        };\n        // Synchronously run a frame to ensure there's no flash of the uncorrected bounding box.\n        frame();\n        // Ensure that the layout delta is updated for this frame.\n        visualElement.updateLayoutDelta();\n        // Create a function to stop animation on this specific axis\n        var unsubscribeProgress = layoutProgress.onChange(frame);\n        // Start the animation on this axis\n        var animation = startAnimation(axis === \"x\" ? \"layoutX\" : \"layoutY\", layoutProgress, progressTarget, transition || this.props.transition || defaultTransition).then(unsubscribeProgress);\n        this.stopAxisAnimation[axis] = function () {\n            layoutProgress.stop();\n            unsubscribeProgress();\n        };\n        return animation;\n    };\n    Animate.prototype.createCrossfadeAnimation = function (crossfadeOpacity) {\n        var visualElement = this.props.visualElement;\n        var opacity = visualElement.getValue(\"opacity\", 0);\n        return function (p) {\n            opacity.set(easeCrossfadeIn(Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(0, 1, p)));\n            crossfadeOpacity.set(easeCrossfadeOut(Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* mix */ \"u\"])(1, 0, p)));\n        };\n    };\n    Animate.prototype.safeToRemove = function () {\n        var _a, _b;\n        (_b = (_a = this.props).safeToRemove) === null || _b === void 0 ? void 0 : _b.call(_a);\n    };\n    Animate.prototype.render = function () {\n        return null;\n    };\n    return Animate;\n}(react__WEBPACK_IMPORTED_MODULE_5__[\"Component\"]));\nfunction AnimateLayoutContextProvider(props) {\n    var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(usePresence(), 2), safeToRemove = _a[1];\n    return Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(Animate, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, props, { safeToRemove: safeToRemove }));\n}\nfunction hasMoved(a, b) {\n    return hasAxisMoved(a.x, b.x) || hasAxisMoved(a.y, b.y);\n}\nfunction hasAxisMoved(a, b) {\n    return a.min !== b.min || a.max !== b.max;\n}\nvar defaultTransition = {\n    duration: 0.45,\n    ease: [0.4, 0, 0.1, 1],\n};\nfunction compress(min, max, easing) {\n    return function (p) {\n        // Could replace ifs with clamp\n        if (p < min)\n            return 0;\n        if (p > max)\n            return 1;\n        return easing(Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* progress */ \"w\"])(min, max, p));\n    };\n}\nvar easeCrossfadeIn = compress(0, 0.5, popmotion__WEBPACK_IMPORTED_MODULE_2__[/* circOut */ \"k\"]);\nvar easeCrossfadeOut = compress(0.5, 0.95, popmotion__WEBPACK_IMPORTED_MODULE_2__[/* linear */ \"t\"]);\n/**\n * @public\n */\nvar AnimateLayout = {\n    key: \"animate-layout\",\n    shouldRender: function (props) { return !!props.layout || !!props.layoutId; },\n    getComponent: function () { return AnimateLayoutContextProvider; },\n};\n\n/**\n * This component is responsible for scheduling the measuring of the motion component\n */\nvar Measure = /** @class */ (function (_super) {\n    Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __extends */ \"b\"])(Measure, _super);\n    function Measure() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    /**\n     * If this is a child of a SyncContext, register the VisualElement with it on mount.\n     */\n    Measure.prototype.componentDidMount = function () {\n        var _a = this.props, syncLayout = _a.syncLayout, framerSyncLayout = _a.framerSyncLayout, visualElement = _a.visualElement;\n        isSharedLayout(syncLayout) && syncLayout.register(visualElement);\n        isSharedLayout(framerSyncLayout) &&\n            framerSyncLayout.register(visualElement);\n    };\n    /**\n     * If this is a child of a SyncContext, notify it that it needs to re-render. It will then\n     * handle the snapshotting.\n     *\n     * If it is stand-alone component, add it to the batcher.\n     */\n    Measure.prototype.getSnapshotBeforeUpdate = function () {\n        var _a = this.props, syncLayout = _a.syncLayout, visualElement = _a.visualElement;\n        if (isSharedLayout(syncLayout)) {\n            syncLayout.syncUpdate();\n        }\n        else {\n            visualElement.snapshotBoundingBox();\n            syncLayout.add(visualElement);\n        }\n        return null;\n    };\n    Measure.prototype.componentDidUpdate = function () {\n        var _a = this.props, syncLayout = _a.syncLayout, visualElement = _a.visualElement;\n        if (!isSharedLayout(syncLayout))\n            syncLayout.flush();\n        /**\n         * If this axis isn't animating as a result of this render we want to reset the targetBox\n         * to the measured box\n         */\n        visualElement.rebaseTargetBox();\n    };\n    Measure.prototype.render = function () {\n        return null;\n    };\n    return Measure;\n}(react__WEBPACK_IMPORTED_MODULE_5___default.a.Component));\nfunction MeasureContextProvider(props) {\n    var syncLayout = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(SharedLayoutContext);\n    var framerSyncLayout = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(FramerTreeLayoutContext);\n    return (react__WEBPACK_IMPORTED_MODULE_5___default.a.createElement(Measure, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, props, { syncLayout: syncLayout, framerSyncLayout: framerSyncLayout })));\n}\nvar MeasureLayout = {\n    key: \"measure-layout\",\n    shouldRender: function (props) {\n        return !!props.drag || !!props.layout || !!props.layoutId;\n    },\n    getComponent: function () { return MeasureContextProvider; },\n};\n\nvar allMotionFeatures = [\n    MeasureLayout,\n    Animation,\n    Drag,\n    Gestures,\n    Exit,\n    AnimateLayout,\n];\nvar domBaseConfig = {\n    useVisualElement: useDomVisualElement,\n    useRender: useRender,\n};\n/**\n * Convert any React component into a `motion` component. The provided component\n * **must** use `React.forwardRef` to the underlying DOM component you want to animate.\n *\n * ```jsx\n * const Component = React.forwardRef((props, ref) => {\n *   return <div ref={ref} />\n * })\n *\n * const MotionComponent = motion.custom(Component)\n * ```\n *\n * @public\n */\nfunction createMotionProxy(defaultFeatures) {\n    var config = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, domBaseConfig), { defaultFeatures: defaultFeatures });\n    function custom(Component) {\n        return createMotionComponent(Component, config);\n    }\n    var componentCache = new Map();\n    function get(target, key) {\n        if (key === \"custom\")\n            return target.custom;\n        if (!componentCache.has(key)) {\n            componentCache.set(key, createMotionComponent(key, config));\n        }\n        return componentCache.get(key);\n    }\n    return new Proxy({ custom: custom }, { get: get });\n}\n/**\n * HTML & SVG components, optimised for use with gestures and animation. These can be used as\n * drop-in replacements for any HTML & SVG component, all CSS & SVG properties are supported.\n *\n * @public\n */\nvar motion = /*@__PURE__*/ createMotionProxy(allMotionFeatures);\n/**\n * Create a DOM `motion` component with the provided string. This is primarily intended\n * as a full alternative to `motion` for consumers who have to support environments that don't\n * support `Proxy`.\n *\n * ```javascript\n * import { createDomMotionComponent } from \"framer-motion\"\n *\n * const motion = {\n *   div: createDomMotionComponent('div')\n * }\n * ```\n *\n * @public\n */\nfunction createDomMotionComponent(key) {\n    return createMotionComponent(key, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, domBaseConfig), { defaultFeatures: allMotionFeatures }));\n}\n\n/**\n * @public\n */\nvar m = /*@__PURE__*/ createMotionProxy([MeasureLayout]);\n\nfunction useForceUpdate() {\n    var unloadingRef = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(false);\n    var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(0), 2), forcedRenderCount = _a[0], setForcedRenderCount = _a[1];\n    useUnmountEffect(function () { return (unloadingRef.current = true); });\n    return Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useCallback\"])(function () {\n        !unloadingRef.current && setForcedRenderCount(forcedRenderCount + 1);\n    }, [forcedRenderCount]);\n}\n\nvar presenceId = 0;\nfunction getPresenceId() {\n    var id = presenceId;\n    presenceId++;\n    return id;\n}\nvar PresenceChild = function (_a) {\n    var children = _a.children, initial = _a.initial, isPresent = _a.isPresent, onExitComplete = _a.onExitComplete, custom = _a.custom, presenceAffectsLayout = _a.presenceAffectsLayout;\n    var presenceChildren = useConstant(newChildrenMap);\n    var id = useConstant(getPresenceId);\n    var context = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useMemo\"])(function () {\n        return {\n            id: id,\n            initial: initial,\n            isPresent: isPresent,\n            custom: custom,\n            onExitComplete: function (childId) {\n                presenceChildren.set(childId, true);\n                var allComplete = true;\n                presenceChildren.forEach(function (isComplete) {\n                    if (!isComplete)\n                        allComplete = false;\n                });\n                allComplete && (onExitComplete === null || onExitComplete === void 0 ? void 0 : onExitComplete());\n            },\n            register: function (childId) {\n                presenceChildren.set(childId, false);\n                return function () { return presenceChildren.delete(childId); };\n            },\n        };\n    }, \n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    presenceAffectsLayout ? undefined : [isPresent]);\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useMemo\"])(function () {\n        presenceChildren.forEach(function (_, key) { return presenceChildren.set(key, false); });\n    }, [isPresent]);\n    return (Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(PresenceContext.Provider, { value: context }, children));\n};\nfunction newChildrenMap() {\n    return new Map();\n}\n\nfunction getChildKey(child) {\n    return child.key || \"\";\n}\nfunction updateChildLookup(children, allChildren) {\n    var seenChildren =  false ? undefined : null;\n    children.forEach(function (child) {\n        var key = getChildKey(child);\n        if (false) {}\n        allChildren.set(key, child);\n    });\n}\nfunction onlyElements(children) {\n    var filtered = [];\n    // We use forEach here instead of map as map mutates the component key by preprending `.$`\n    react__WEBPACK_IMPORTED_MODULE_5__[\"Children\"].forEach(children, function (child) {\n        if (Object(react__WEBPACK_IMPORTED_MODULE_5__[\"isValidElement\"])(child))\n            filtered.push(child);\n    });\n    return filtered;\n}\n/**\n * `AnimatePresence` enables the animation of components that have been removed from the tree.\n *\n * When adding/removing more than a single child, every child **must** be given a unique `key` prop.\n *\n * @library\n *\n * Any `Frame` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { Frame, AnimatePresence } from 'framer'\n *\n * // As items are added and removed from `items`\n * export function Items({ items }) {\n *   return (\n *     <AnimatePresence>\n *       {items.map(item => (\n *         <Frame\n *           key={item.id}\n *           initial={{ opacity: 0 }}\n *           animate={{ opacity: 1 }}\n *           exit={{ opacity: 0 }}\n *         />\n *       ))}\n *     </AnimatePresence>\n *   )\n * }\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * @motion\n *\n * Any `motion` components that have an `exit` property defined will animate out when removed from\n * the tree.\n *\n * ```jsx\n * import { motion, AnimatePresence } from 'framer-motion'\n *\n * export const Items = ({ items }) => (\n *   <AnimatePresence>\n *     {items.map(item => (\n *       <motion.div\n *         key={item.id}\n *         initial={{ opacity: 0 }}\n *         animate={{ opacity: 1 }}\n *         exit={{ opacity: 0 }}\n *       />\n *     ))}\n *   </AnimatePresence>\n * )\n * ```\n *\n * You can sequence exit animations throughout a tree using variants.\n *\n * If a child contains multiple `motion` components with `exit` props, it will only unmount the child\n * once all `motion` components have finished animating out. Likewise, any components using\n * `usePresence` all need to call `safeToRemove`.\n *\n * @public\n */\nvar AnimatePresence = function (_a) {\n    var children = _a.children, custom = _a.custom, _b = _a.initial, initial = _b === void 0 ? true : _b, onExitComplete = _a.onExitComplete, exitBeforeEnter = _a.exitBeforeEnter, _c = _a.presenceAffectsLayout, presenceAffectsLayout = _c === void 0 ? true : _c;\n    // We want to force a re-render once all exiting animations have finished. We\n    // either use a local forceRender function, or one from a parent context if it exists.\n    var forceRender = useForceUpdate();\n    var layoutContext = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(SharedLayoutContext);\n    if (isSharedLayout(layoutContext)) {\n        forceRender = layoutContext.forceUpdate;\n    }\n    var isInitialRender = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(true);\n    // Filter out any children that aren't ReactElements. We can only track ReactElements with a props.key\n    var filteredChildren = onlyElements(children);\n    // Keep a living record of the children we're actually rendering so we\n    // can diff to figure out which are entering and exiting\n    var presentChildren = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(filteredChildren);\n    // A lookup table to quickly reference components by key\n    var allChildren = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(new Map())\n        .current;\n    // A living record of all currently exiting components.\n    var exiting = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(new Set()).current;\n    updateChildLookup(filteredChildren, allChildren);\n    // If this is the initial component render, just deal with logic surrounding whether\n    // we play onMount animations or not.\n    if (isInitialRender.current) {\n        isInitialRender.current = false;\n        return (Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(react__WEBPACK_IMPORTED_MODULE_5__[\"Fragment\"], null, filteredChildren.map(function (child) { return (Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(PresenceChild, { key: getChildKey(child), isPresent: true, initial: initial ? undefined : false, presenceAffectsLayout: presenceAffectsLayout }, child)); })));\n    }\n    // If this is a subsequent render, deal with entering and exiting children\n    var childrenToRender = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __spread */ \"e\"])(filteredChildren);\n    // Diff the keys of the currently-present and target children to update our\n    // exiting list.\n    var presentKeys = presentChildren.current.map(getChildKey);\n    var targetKeys = filteredChildren.map(getChildKey);\n    // Diff the present children with our target children and mark those that are exiting\n    var numPresent = presentKeys.length;\n    for (var i = 0; i < numPresent; i++) {\n        var key = presentKeys[i];\n        if (targetKeys.indexOf(key) === -1) {\n            exiting.add(key);\n        }\n        else {\n            // In case this key has re-entered, remove from the exiting list\n            exiting.delete(key);\n        }\n    }\n    // If we currently have exiting children, and we're deferring rendering incoming children\n    // until after all current children have exiting, empty the childrenToRender array\n    if (exitBeforeEnter && exiting.size) {\n        childrenToRender = [];\n    }\n    // Loop through all currently exiting components and clone them to overwrite `animate`\n    // with any `exit` prop they might have defined.\n    exiting.forEach(function (key) {\n        // If this component is actually entering again, early return\n        if (targetKeys.indexOf(key) !== -1)\n            return;\n        var child = allChildren.get(key);\n        if (!child)\n            return;\n        var insertionIndex = presentKeys.indexOf(key);\n        var onExit = function () {\n            allChildren.delete(key);\n            exiting.delete(key);\n            // Remove this child from the present children\n            var removeIndex = presentChildren.current.findIndex(function (presentChild) { return presentChild.key === key; });\n            presentChildren.current.splice(removeIndex, 1);\n            // Defer re-rendering until all exiting children have indeed left\n            if (!exiting.size) {\n                presentChildren.current = filteredChildren;\n                forceRender();\n                onExitComplete && onExitComplete();\n            }\n        };\n        childrenToRender.splice(insertionIndex, 0, Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(PresenceChild, { key: getChildKey(child), isPresent: false, onExitComplete: onExit, custom: custom, presenceAffectsLayout: presenceAffectsLayout }, child));\n    });\n    // Add `MotionContext` even to children that don't need it to ensure we're rendering\n    // the same tree between renders\n    childrenToRender = childrenToRender.map(function (child) {\n        var key = child.key;\n        return exiting.has(key) ? (child) : (Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(PresenceChild, { key: getChildKey(child), isPresent: true, presenceAffectsLayout: presenceAffectsLayout }, child));\n    });\n    presentChildren.current = childrenToRender;\n    if (false) {}\n    return (Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(react__WEBPACK_IMPORTED_MODULE_5__[\"Fragment\"], null, exiting.size\n        ? childrenToRender\n        : childrenToRender.map(function (child) { return Object(react__WEBPACK_IMPORTED_MODULE_5__[\"cloneElement\"])(child); })));\n};\n\nfunction createSwitchAnimation(child, stack) {\n    if (stack && child !== stack.lead) {\n        return { visibilityAction: VisibilityAction.Hide };\n    }\n    else if (stack &&\n        child.presence !== Presence.Entering &&\n        child === stack.lead &&\n        stack.lead !== stack.prevLead) {\n        return { visibilityAction: VisibilityAction.Show };\n    }\n    var originBox;\n    var targetBox;\n    if (child.presence === Presence.Entering) {\n        originBox = stack === null || stack === void 0 ? void 0 : stack.getFollowOrigin();\n    }\n    else if (child.presence === Presence.Exiting) {\n        targetBox = stack === null || stack === void 0 ? void 0 : stack.getFollowTarget();\n    }\n    return { originBox: originBox, targetBox: targetBox };\n}\nfunction createCrossfadeAnimation(child, stack) {\n    var _a, _b, _c;\n    var config = {};\n    var stackLead = stack && stack.lead;\n    var stackLeadPresence = stackLead === null || stackLead === void 0 ? void 0 : stackLead.presence;\n    if (stack && child === stackLead) {\n        if (child.presence === Presence.Entering) {\n            config.originBox = stack.getFollowOrigin();\n        }\n        else if (child.presence === Presence.Exiting) {\n            config.targetBox = stack.getFollowTarget();\n        }\n    }\n    else if (stack && child === stack.follow) {\n        config.transition = stack.getLeadTransition();\n        if (stackLeadPresence === Presence.Entering) {\n            config.targetBox = stack.getLeadTarget();\n        }\n        else if (stackLeadPresence === Presence.Exiting) {\n            config.originBox = stack.getLeadOrigin();\n        }\n    }\n    // If neither the lead or follow component is the root child of AnimatePresence,\n    // don't handle crossfade animations\n    if (!((_a = stack === null || stack === void 0 ? void 0 : stack.follow) === null || _a === void 0 ? void 0 : _a.isPresenceRoot) && !(stackLead === null || stackLead === void 0 ? void 0 : stackLead.isPresenceRoot)) {\n        return config;\n    }\n    if (!stack || child === stackLead) {\n        if (child.presence === Presence.Entering) {\n            config.crossfadeOpacity = (_b = stack === null || stack === void 0 ? void 0 : stack.follow) === null || _b === void 0 ? void 0 : _b.getValue(\"opacity\", 0);\n        }\n    }\n    else if (stack && child === stack.follow) {\n        if (!stackLead || stackLeadPresence === Presence.Entering) ;\n        else if (stackLeadPresence === Presence.Exiting) {\n            config.crossfadeOpacity = (_c = stack === null || stack === void 0 ? void 0 : stack.lead) === null || _c === void 0 ? void 0 : _c.getValue(\"opacity\", 1);\n        }\n    }\n    else {\n        config.visibilityAction = VisibilityAction.Hide;\n    }\n    return config;\n}\n\n/**\n * For each layout animation, we want to identify two components\n * within a stack that will serve as the \"lead\" and \"follow\" components.\n *\n * In the switch animation, the lead component performs the entire animation.\n * It uses the follow bounding box to animate out from and back to. The follow\n * component is hidden.\n *\n * In the crossfade animation, both the lead and follow components perform\n * the entire animation, animating from the follow origin bounding box to the lead\n * target bounding box.\n *\n * Generalising a stack as First In Last Out, *searching from the end* we can\n * generally consider the lead component to be:\n *  - If the last child is present, the last child\n *  - If the last child is exiting, the last *encountered* exiting component\n */\nfunction findLeadAndFollow(stack, _a) {\n    var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(_a, 2), prevLead = _b[0], prevFollow = _b[1];\n    var lead = undefined;\n    var leadIndex = 0;\n    var follow = undefined;\n    // Find the lead child first\n    var numInStack = stack.length;\n    var lastIsPresent = false;\n    for (var i = numInStack - 1; i >= 0; i--) {\n        var child = stack[i];\n        var isLastInStack = i === numInStack - 1;\n        if (isLastInStack)\n            lastIsPresent = child.isPresent;\n        if (lastIsPresent) {\n            lead = child;\n        }\n        else {\n            // If the child before this will be present, make this the\n            // lead.\n            var prev = stack[i - 1];\n            if (prev && prev.isPresent)\n                lead = child;\n        }\n        if (lead) {\n            leadIndex = i;\n            break;\n        }\n    }\n    if (!lead)\n        lead = stack[0];\n    // Find the follow child\n    follow = stack[leadIndex - 1];\n    // If the lead component is exiting, find the closest follow\n    // present component\n    if (lead) {\n        for (var i = leadIndex - 1; i >= 0; i--) {\n            var child = stack[i];\n            if (child.isPresent) {\n                follow = child;\n                break;\n            }\n        }\n    }\n    // If the lead has changed and the previous lead still exists in the\n    // stack, set it to the previous lead. This allows us to differentiate between\n    // a, b, c(exit) -> a, b(exit), c(exit)\n    // and\n    // a, b(exit), c -> a, b(exit), c(exit)\n    if (lead !== prevLead &&\n        !lastIsPresent &&\n        follow === prevFollow &&\n        stack.find(function (stackChild) { return stackChild === prevLead; })) {\n        lead = prevLead;\n    }\n    return [lead, follow];\n}\nvar LayoutStack = /** @class */ (function () {\n    function LayoutStack() {\n        this.order = [];\n        // Track whether we've ever had a child\n        this.hasChildren = false;\n    }\n    LayoutStack.prototype.add = function (child) {\n        var _a;\n        this.order.push(child);\n        // Load previous values from snapshot into this child\n        // TODO Neaten up\n        // TODO Double check when reimplementing move\n        // TODO Add isDragging status and\n        if (this.snapshot) {\n            child.prevSnapshot = this.snapshot;\n            // TODO Remove in favour of above\n            child.prevViewportBox = this.snapshot.boundingBox;\n            var latest = this.snapshot.latestMotionValues;\n            for (var key in latest) {\n                if (!child.hasValue(key)) {\n                    child.addValue(key, motionValue(latest[key]));\n                }\n                else {\n                    (_a = child.getValue(key)) === null || _a === void 0 ? void 0 : _a.set(latest[key]);\n                }\n            }\n        }\n        this.hasChildren = true;\n    };\n    LayoutStack.prototype.remove = function (child) {\n        var index = this.order.findIndex(function (stackChild) { return child === stackChild; });\n        if (index !== -1)\n            this.order.splice(index, 1);\n    };\n    LayoutStack.prototype.updateLeadAndFollow = function () {\n        this.prevLead = this.lead;\n        this.prevFollow = this.follow;\n        var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(findLeadAndFollow(this.order, [\n            this.lead,\n            this.follow,\n        ]), 2), lead = _a[0], follow = _a[1];\n        this.lead = lead;\n        this.follow = follow;\n    };\n    LayoutStack.prototype.updateSnapshot = function () {\n        if (!this.lead)\n            return;\n        var snapshot = {\n            boundingBox: this.lead.prevViewportBox,\n            latestMotionValues: {},\n        };\n        this.lead.forEachValue(function (value, key) {\n            var latest = value.get();\n            if (!isTransformProp(latest)) {\n                snapshot.latestMotionValues[key] = latest;\n            }\n        });\n        var dragControls = elementDragControls.get(this.lead);\n        if (dragControls && dragControls.isDragging) {\n            snapshot.isDragging = true;\n            snapshot.cursorProgress = dragControls.cursorProgress;\n        }\n        this.snapshot = snapshot;\n    };\n    LayoutStack.prototype.isLeadPresent = function () {\n        var _a;\n        return this.lead && ((_a = this.lead) === null || _a === void 0 ? void 0 : _a.presence) !== Presence.Exiting;\n    };\n    LayoutStack.prototype.getFollowOrigin = function () {\n        var _a;\n        return this.follow\n            ? this.follow.prevViewportBox\n            : (_a = this.snapshot) === null || _a === void 0 ? void 0 : _a.boundingBox;\n    };\n    LayoutStack.prototype.getFollowTarget = function () {\n        var _a;\n        return (_a = this.follow) === null || _a === void 0 ? void 0 : _a.box;\n    };\n    LayoutStack.prototype.getLeadOrigin = function () {\n        var _a;\n        return (_a = this.lead) === null || _a === void 0 ? void 0 : _a.prevViewportBox;\n    };\n    LayoutStack.prototype.getLeadTarget = function () {\n        var _a;\n        return (_a = this.lead) === null || _a === void 0 ? void 0 : _a.box;\n    };\n    LayoutStack.prototype.getLeadTransition = function () {\n        var _a;\n        return (_a = this.lead) === null || _a === void 0 ? void 0 : _a.config.transition;\n    };\n    return LayoutStack;\n}());\n\nfunction resetRotate(child) {\n    // If there's no detected rotation values, we can early return without a forced render.\n    var hasRotate = false;\n    // Keep a record of all the values we've reset\n    var resetValues = {};\n    // Check the rotate value of all axes and reset to 0\n    for (var i = 0; i < transformAxes.length; i++) {\n        var axis = transformAxes[i];\n        var key = \"rotate\" + axis;\n        // If this rotation doesn't exist as a motion value, then we don't\n        // need to reset it\n        if (!child.hasValue(key) || child.latest[key] === 0)\n            continue;\n        hasRotate = true;\n        // Record the rotation and then temporarily set it to 0\n        resetValues[key] = child.latest[key];\n        child.latest[key] = 0;\n    }\n    // If there's no rotation values, we don't need to do any more.\n    if (!hasRotate)\n        return;\n    // Force a render of this element to apply the transform with all rotations\n    // set to 0.\n    child.render();\n    // Put back all the values we reset\n    for (var key in resetValues) {\n        child.latest[key] = resetValues[key];\n    }\n    // Schedule a render for the next frame. This ensures we won't visually\n    // see the element with the reset rotate value applied.\n    child.scheduleRender();\n}\n\n/**\n * @public\n */\nvar AnimateSharedLayout = /** @class */ (function (_super) {\n    Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __extends */ \"b\"])(AnimateSharedLayout, _super);\n    function AnimateSharedLayout() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        /**\n         * A list of all the children in the shared layout\n         */\n        _this.children = new Set();\n        /**\n         * As animate components with a defined `layoutId` are added/removed to the tree,\n         * we store them in order. When one is added, it will animate out from the\n         * previous one, and when it's removed, it'll animate to the previous one.\n         */\n        _this.stacks = new Map();\n        /**\n         * Track whether the component has mounted. If it hasn't, the presence of added children\n         * are set to Present, whereas if it has they're considered Entering\n         */\n        _this.hasMounted = false;\n        /**\n         * Track whether we already have an update scheduled. If we don't, we'll run snapshots\n         * and schedule one.\n         */\n        _this.updateScheduled = false;\n        /**\n         * Tracks whether we already have a render scheduled. If we don't, we'll force one with this.forceRender\n         */\n        _this.renderScheduled = false;\n        /**\n         * The methods provided to all children in the shared layout tree.\n         */\n        _this.syncContext = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, createBatcher()), { syncUpdate: function (force) { return _this.scheduleUpdate(force); }, forceUpdate: function () {\n                // By copying syncContext to itself, when this component re-renders it'll also re-render\n                // all children subscribed to the SharedLayout context.\n                _this.syncContext = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, _this.syncContext);\n                _this.scheduleUpdate(true);\n            }, register: function (child) { return _this.addChild(child); }, remove: function (child) { return _this.removeChild(child); } });\n        return _this;\n    }\n    AnimateSharedLayout.prototype.componentDidMount = function () {\n        this.hasMounted = true;\n        this.updateStacks();\n    };\n    AnimateSharedLayout.prototype.componentDidUpdate = function () {\n        this.startLayoutAnimation();\n    };\n    AnimateSharedLayout.prototype.shouldComponentUpdate = function () {\n        this.renderScheduled = true;\n        return true;\n    };\n    AnimateSharedLayout.prototype.startLayoutAnimation = function () {\n        var _this = this;\n        /**\n         * Reset update and render scheduled status\n         */\n        this.renderScheduled = this.updateScheduled = false;\n        var type = this.props.type;\n        /**\n         * Update presence metadata based on the latest AnimatePresence status.\n         * This is a kind of goofy way of dealing with this, perhaps there's a better model to find.\n         */\n        this.children.forEach(function (child) {\n            if (!child.isPresent) {\n                child.presence = Presence.Exiting;\n            }\n            else if (child.presence !== Presence.Entering) {\n                child.presence =\n                    child.presence === Presence.Exiting\n                        ? Presence.Entering\n                        : Presence.Present;\n            }\n        });\n        /**\n         * In every layoutId stack, nominate a component to lead the animation and another\n         * to follow\n         */\n        this.updateStacks();\n        /**\n         * Decide which animation to use between shared layoutId components\n         */\n        var createAnimation = type === \"crossfade\"\n            ? createCrossfadeAnimation\n            : createSwitchAnimation;\n        /**\n         * Create a handler which we can use to flush the children animations\n         */\n        var handler = {\n            measureLayout: function (child) { return child.measureLayout(); },\n            layoutReady: function (child) {\n                var layoutId = child.layoutId;\n                child.layoutReady(createAnimation(child, _this.getStack(layoutId)));\n            },\n            parent: this.context.visualElement,\n        };\n        /**\n         * Shared layout animations can be used without the AnimateSharedLayout wrapping component.\n         * This requires some co-ordination across components to stop layout thrashing\n         * and ensure measurements are taken at the correct time.\n         *\n         * Here we use that same mechanism of schedule/flush.\n         */\n        this.children.forEach(function (child) { return _this.syncContext.add(child); });\n        this.syncContext.flush(handler);\n        /**\n         * Clear snapshots so subsequent rerenders don't retain memory of outgoing components\n         */\n        this.stacks.forEach(function (stack) { return (stack.snapshot = undefined); });\n    };\n    AnimateSharedLayout.prototype.updateStacks = function () {\n        this.stacks.forEach(function (stack) { return stack.updateLeadAndFollow(); });\n    };\n    AnimateSharedLayout.prototype.scheduleUpdate = function (force) {\n        if (force === void 0) { force = false; }\n        if (!(force || !this.updateScheduled))\n            return;\n        /**\n         * Flag we've scheduled an update\n         */\n        this.updateScheduled = true;\n        /**\n         * Write: Reset rotation transforms so bounding boxes can be accurately measured.\n         */\n        this.children.forEach(function (child) { return resetRotate(child); });\n        /**\n         * Read: Snapshot children\n         */\n        this.children.forEach(function (child) { return child.snapshotBoundingBox(); });\n        /**\n         * Every child keeps a local snapshot, but we also want to record\n         * snapshots of the visible children as, if they're are being removed\n         * in this render, we can still access them.\n         */\n        this.stacks.forEach(function (stack) { return stack.updateSnapshot(); });\n        /**\n         * Force a rerender by setting state if we aren't already going to render.\n         */\n        if (force || !this.renderScheduled) {\n            this.renderScheduled = true;\n            this.forceUpdate();\n        }\n    };\n    AnimateSharedLayout.prototype.addChild = function (child) {\n        this.children.add(child);\n        this.addToStack(child);\n        child.presence = this.hasMounted ? Presence.Entering : Presence.Present;\n    };\n    AnimateSharedLayout.prototype.removeChild = function (child) {\n        this.scheduleUpdate();\n        this.children.delete(child);\n        this.removeFromStack(child);\n    };\n    AnimateSharedLayout.prototype.addToStack = function (child) {\n        var stack = this.getStack(child.layoutId);\n        stack === null || stack === void 0 ? void 0 : stack.add(child);\n    };\n    AnimateSharedLayout.prototype.removeFromStack = function (child) {\n        var stack = this.getStack(child.layoutId);\n        stack === null || stack === void 0 ? void 0 : stack.remove(child);\n    };\n    /**\n     * Return a stack of animate children based on the provided layoutId.\n     * Will create a stack if none currently exists with that layoutId.\n     */\n    AnimateSharedLayout.prototype.getStack = function (id) {\n        if (id === undefined)\n            return;\n        // Create stack if it doesn't already exist\n        !this.stacks.has(id) && this.stacks.set(id, new LayoutStack());\n        return this.stacks.get(id);\n    };\n    AnimateSharedLayout.prototype.render = function () {\n        return (Object(react__WEBPACK_IMPORTED_MODULE_5__[\"createElement\"])(SharedLayoutContext.Provider, { value: this.syncContext }, this.props.children));\n    };\n    AnimateSharedLayout.contextType = MotionContext;\n    return AnimateSharedLayout;\n}(react__WEBPACK_IMPORTED_MODULE_5__[\"Component\"]));\n\n/**\n * Creates a `MotionValue` to track the state and velocity of a value.\n *\n * Usually, these are created automatically. For advanced use-cases, like use with `useTransform`, you can create `MotionValue`s externally and pass them into the animated component via the `style` prop.\n *\n * @library\n *\n * ```jsx\n * export function MyComponent() {\n *   const scale = useMotionValue(1)\n *\n *   return <Frame scale={scale} />\n * }\n * ```\n *\n * @motion\n *\n * ```jsx\n * export const MyComponent = () => {\n *   const scale = useMotionValue(1)\n *\n *   return <motion.div style={{ scale }} />\n * }\n * ```\n *\n * @param initial - The initial state.\n *\n * @public\n */\nfunction useMotionValue(initial) {\n    return useConstant(function () { return motionValue(initial); });\n}\n\nfunction useOnChange(value, callback) {\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n        return isMotionValue(value) ? value.onChange(callback) : undefined;\n    });\n}\nfunction useMultiOnChange(values, handler) {\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n        var subscriptions = values.map(function (value) { return value.onChange(handler); });\n        return function () { return subscriptions.forEach(function (unsubscribe) { return unsubscribe(); }); };\n    });\n}\n\nfunction useCombineMotionValues(values, combineValues) {\n    /**\n     * Initialise the returned motion value. This remains the same between renders.\n     */\n    var value = useMotionValue(combineValues());\n    /**\n     * Create a function that will update the template motion value with the latest values.\n     * This is pre-bound so whenever a motion value updates it can schedule its\n     * execution in Framesync. If it's already been scheduled it won't be fired twice\n     * in a single frame.\n     */\n    var updateValue = function () { return value.set(combineValues()); };\n    /**\n     * Synchronously update the motion value with the latest values during the render.\n     * This ensures that within a React render, the styles applied to the DOM are up-to-date.\n     */\n    updateValue();\n    /**\n     * Subscribe to all motion values found within the template. Whenever any of them change,\n     * schedule an update.\n     */\n    useMultiOnChange(values, function () { return framesync__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"b\"].update(updateValue, false, true); });\n    return value;\n}\n\n/**\n * Combine multiple motion values into a new one using a string template literal.\n *\n * ```jsx\n * import {\n *   motion,\n *   useSpring,\n *   useMotionValue,\n *   useMotionTemplate\n * } from \"framer-motion\"\n *\n * function Component() {\n *   const shadowX = useSpring(0)\n *   const shadowY = useMotionValue(0)\n *   const shadow = useMotionTemplate`drop-shadow(${shadowX}px ${shadowY}px 20px rgba(0,0,0,0.3))`\n *\n *   return <motion.div style={{ filter: shadow }} />\n * }\n * ```\n *\n * @public\n */\nfunction useMotionTemplate(fragments) {\n    var values = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        values[_i - 1] = arguments[_i];\n    }\n    /**\n     * Create a function that will build a string from the latest motion values.\n     */\n    var numFragments = fragments.length;\n    function buildValue() {\n        var output = \"\";\n        for (var i = 0; i < numFragments; i++) {\n            output += fragments[i];\n            var value = values[i];\n            if (value)\n                output += values[i].get();\n        }\n        return output;\n    }\n    return useCombineMotionValues(values, buildValue);\n}\n\n/**\n * If the provided value is a MotionValue, this returns the actual value, otherwise just the value itself\n *\n * TODO: Remove and move to library\n *\n * @internal\n */\nfunction resolveMotionValue(value) {\n    var unwrappedValue = value instanceof MotionValue ? value.get() : value;\n    return isCustomValue(unwrappedValue)\n        ? unwrappedValue.toValue()\n        : unwrappedValue;\n}\n\nvar isCustomValueType = function (v) {\n    return typeof v === \"object\" && v.mix;\n};\nvar getMixer = function (v) { return (isCustomValueType(v) ? v.mix : undefined); };\nfunction transform() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var useImmediate = !Array.isArray(args[0]);\n    var argOffset = useImmediate ? 0 : -1;\n    var inputValue = args[0 + argOffset];\n    var inputRange = args[1 + argOffset];\n    var outputRange = args[2 + argOffset];\n    var options = args[3 + argOffset];\n    var interpolator = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* interpolate */ \"s\"])(inputRange, outputRange, Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({ mixer: getMixer(outputRange[0]) }, options));\n    return useImmediate ? interpolator(inputValue) : interpolator;\n}\n\nfunction useTransform(input, inputRangeOrTransformer, outputRange, options) {\n    var transformer = typeof inputRangeOrTransformer === \"function\"\n        ? inputRangeOrTransformer\n        : transform(inputRangeOrTransformer, outputRange, options);\n    return Array.isArray(input)\n        ? useListTransform(input, transformer)\n        : useListTransform([input], function (_a) {\n            var _b = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(_a, 1), latest = _b[0];\n            return transformer(latest);\n        });\n}\nfunction useListTransform(values, transformer) {\n    var latest = useConstant(function () { return []; });\n    return useCombineMotionValues(values, function () {\n        latest.length = 0;\n        var numValues = values.length;\n        for (var i = 0; i < numValues; i++) {\n            latest[i] = values[i].get();\n        }\n        return transformer(latest);\n    });\n}\n\n/**\n * Creates a `MotionValue` that, when `set`, will use a spring animation to animate to its new state.\n *\n * It can either work as a stand-alone `MotionValue` by initialising it with a value, or as a subscriber\n * to another `MotionValue`.\n *\n * @remarks\n *\n * ```jsx\n * const x = useSpring(0, { stiffness: 300 })\n * const y = useSpring(x, { damping: 10 })\n * ```\n *\n * @param inputValue - `MotionValue` or number. If provided a `MotionValue`, when the input `MotionValue` changes, the created `MotionValue` will spring towards that value.\n * @param springConfig - Configuration options for the spring.\n * @returns `MotionValue`\n *\n * @public\n */\nfunction useSpring(source, config) {\n    if (config === void 0) { config = {}; }\n    var isStatic = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useContext\"])(MotionConfigContext).isStatic;\n    var activeSpringAnimation = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(null);\n    var value = useMotionValue(isMotionValue(source) ? source.get() : source);\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useMemo\"])(function () {\n        return value.attach(function (v, set) {\n            /**\n             * A more hollistic approach to this might be to use isStatic to fix VisualElement animations\n             * at that level, but this will work for now\n             */\n            if (isStatic)\n                return set(v);\n            if (activeSpringAnimation.current) {\n                activeSpringAnimation.current.stop();\n            }\n            activeSpringAnimation.current = Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* animate */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({ from: value.get(), to: v, velocity: value.getVelocity() }, config), { onUpdate: set }));\n            return value.get();\n        });\n    }, Object.values(config));\n    useOnChange(source, function (v) { return value.set(parseFloat(v)); });\n    return value;\n}\n\nfunction createScrollMotionValues() {\n    return {\n        scrollX: motionValue(0),\n        scrollY: motionValue(0),\n        scrollXProgress: motionValue(0),\n        scrollYProgress: motionValue(0),\n    };\n}\nfunction setProgress(offset, maxOffset, value) {\n    value.set(!offset || !maxOffset ? 0 : offset / maxOffset);\n}\nfunction createScrollUpdater(values, getOffsets) {\n    var update = function () {\n        var _a = getOffsets(), xOffset = _a.xOffset, yOffset = _a.yOffset, xMaxOffset = _a.xMaxOffset, yMaxOffset = _a.yMaxOffset;\n        // Set absolute positions\n        values.scrollX.set(xOffset);\n        values.scrollY.set(yOffset);\n        // Set 0-1 progress\n        setProgress(xOffset, xMaxOffset, values.scrollXProgress);\n        setProgress(yOffset, yMaxOffset, values.scrollYProgress);\n    };\n    update();\n    return update;\n}\n\nvar getElementScrollOffsets = function (element) { return function () {\n    return {\n        xOffset: element.scrollLeft,\n        yOffset: element.scrollTop,\n        xMaxOffset: element.scrollWidth - element.offsetWidth,\n        yMaxOffset: element.scrollHeight - element.offsetHeight,\n    };\n}; };\n/**\n * Returns MotionValues that update when the provided element scrolls:\n *\n * - `scrollX`  Horizontal scroll distance in pixels.\n * - `scrollY`  Vertical scroll distance in pixels.\n * - `scrollXProgress`  Horizontal scroll progress between `0` and `1`.\n * - `scrollYProgress`  Vertical scroll progress between `0` and `1`.\n *\n * This element must be set to `overflow: scroll` on either or both axes to report scroll offset.\n *\n * @library\n *\n * ```jsx\n * import * as React from \"react\"\n * import {\n *   Frame,\n *   useElementScroll,\n *   useTransform\n * } from \"framer\"\n *\n * export function MyComponent() {\n *   const ref = React.useRef()\n *   const { scrollYProgress } = useElementScroll(ref)\n *\n *   return (\n *     <Frame ref={ref}>\n *       <Frame scaleX={scrollYProgress} />\n *     </Frame>\n *   )\n * }\n * ```\n *\n * @motion\n *\n * ```jsx\n * export const MyComponent = () => {\n *   const ref = useRef()\n *   const { scrollYProgress } = useElementScroll(ref)\n *\n *   return (\n *     <div ref={ref}>\n *       <motion.div style={{ scaleX: scrollYProgress }} />\n *     </div>\n *   )\n * }\n * ```\n *\n * @public\n */\nfunction useElementScroll(ref) {\n    var values = useConstant(createScrollMotionValues);\n    useIsomorphicLayoutEffect(function () {\n        var element = ref.current;\n        Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* invariant */ \"a\"])(!!element, \"ref provided to useScroll must be passed into a HTML element.\");\n        if (!element)\n            return;\n        var updateScrollValues = createScrollUpdater(values, getElementScrollOffsets(element));\n        var scrollListener = addDomEvent(element, \"scroll\", updateScrollValues, { passive: true });\n        var resizeListener = addDomEvent(element, \"resize\", updateScrollValues);\n        return function () {\n            scrollListener && scrollListener();\n            resizeListener && resizeListener();\n        };\n    }, []);\n    return values;\n}\n\nvar viewportScrollValues;\nfunction getViewportScrollOffsets() {\n    return {\n        xOffset: window.pageXOffset,\n        yOffset: window.pageYOffset,\n        xMaxOffset: document.body.clientWidth - window.innerWidth,\n        yMaxOffset: document.body.clientHeight - window.innerHeight,\n    };\n}\nvar hasListeners = false;\nfunction addEventListeners() {\n    hasListeners = true;\n    if (typeof window === \"undefined\")\n        return;\n    var updateScrollValues = createScrollUpdater(viewportScrollValues, getViewportScrollOffsets);\n    addDomEvent(window, \"scroll\", updateScrollValues, { passive: true });\n    addDomEvent(window, \"resize\", updateScrollValues);\n}\n/**\n * Returns MotionValues that update when the viewport scrolls:\n *\n * - `scrollX`  Horizontal scroll distance in pixels.\n * - `scrollY`  Vertical scroll distance in pixels.\n * - `scrollXProgress`  Horizontal scroll progress between `0` and `1`.\n * - `scrollYProgress`  Vertical scroll progress between `0` and `1`.\n *\n * @library\n *\n * ```jsx\n * import * as React from \"react\"\n * import {\n *   Frame,\n *   useViewportScroll,\n *   useTransform\n * } from \"framer\"\n *\n * export function MyComponent() {\n *   const { scrollYProgress } = useViewportScroll()\n *   return <Frame scaleX={scrollYProgress} />\n * }\n * ```\n *\n * @motion\n *\n * ```jsx\n * export const MyComponent = () => {\n *   const { scrollYProgress } = useViewportScroll()\n *   return <motion.div style={{ scaleX: scrollYProgress }} />\n * }\n * ```\n *\n * @public\n */\nfunction useViewportScroll() {\n    /**\n     * Lazy-initialise the viewport scroll values\n     */\n    if (!viewportScrollValues) {\n        viewportScrollValues = createScrollMotionValues();\n    }\n    useIsomorphicLayoutEffect(function () {\n        !hasListeners && addEventListeners();\n    }, []);\n    return viewportScrollValues;\n}\n\n// Does this device prefer reduced motion? Returns `null` server-side.\nvar prefersReducedMotion;\nfunction initPrefersReducedMotion() {\n    prefersReducedMotion = motionValue(null);\n    if (typeof window === \"undefined\")\n        return;\n    if (window.matchMedia) {\n        var motionMediaQuery_1 = window.matchMedia(\"(prefers-reduced-motion)\");\n        var setReducedMotionPreferences = function () {\n            return prefersReducedMotion.set(motionMediaQuery_1.matches);\n        };\n        motionMediaQuery_1.addListener(setReducedMotionPreferences);\n        setReducedMotionPreferences();\n    }\n    else {\n        prefersReducedMotion.set(false);\n    }\n}\n/**\n * A hook that returns `true` if we should be using reduced motion based on the current device's Reduced Motion setting.\n *\n * This can be used to implement changes to your UI based on Reduced Motion. For instance, replacing motion-sickness inducing\n * `x`/`y` animations with `opacity`, disabling the autoplay of background videos, or turning off parallax motion.\n *\n * It will actively respond to changes and re-render your components with the latest setting.\n *\n * ```jsx\n * export function Sidebar({ isOpen }) {\n *   const shouldReduceMotion = useReducedMotion()\n *   const closedX = shouldReduceMotion ? 0 : \"-100%\"\n *\n *   return (\n *     <motion.div animate={{\n *       opacity: isOpen ? 1 : 0,\n *       x: isOpen ? 0 : closedX\n *     }} />\n *   )\n * }\n * ```\n *\n * @return boolean\n *\n * @public\n */\nfunction useReducedMotion() {\n    /**\n     * Lazy initialisation of prefersReducedMotion\n     */\n    !prefersReducedMotion && initPrefersReducedMotion();\n    var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(prefersReducedMotion.get()), 2), shouldReduceMotion = _a[0], setShouldReduceMotion = _a[1];\n    useOnChange(prefersReducedMotion, setShouldReduceMotion);\n    return shouldReduceMotion;\n}\n\n/**\n * Creates `AnimationControls`, which can be used to manually start, stop\n * and sequence animations on one or more components.\n *\n * The returned `AnimationControls` should be passed to the `animate` property\n * of the components you want to animate.\n *\n * These components can then be animated with the `start` method.\n *\n * @library\n *\n * ```jsx\n * import * as React from 'react'\n * import { Frame, useAnimation } from 'framer'\n *\n * export function MyComponent(props) {\n *    const controls = useAnimation()\n *\n *    controls.start({\n *        x: 100,\n *        transition: { duration: 0.5 },\n *    })\n *\n *    return <Frame animate={controls} />\n * }\n * ```\n *\n * @motion\n *\n * ```jsx\n * import * as React from 'react'\n * import { motion, useAnimation } from 'framer-motion'\n *\n * export function MyComponent(props) {\n *    const controls = useAnimation()\n *\n *    controls.start({\n *        x: 100,\n *        transition: { duration: 0.5 },\n *    })\n *\n *    return <motion.div animate={controls} />\n * }\n * ```\n *\n * @returns Animation controller with `start` and `stop` methods\n *\n * @public\n */\nfunction useAnimation() {\n    var animationControls = useConstant(function () { return new AnimationControls(); });\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n        animationControls.mount();\n        return function () { return animationControls.unmount(); };\n    }, []);\n    return animationControls;\n}\n\n/**\n * Animate a single value or a `MotionValue`.\n *\n * The first argument is either a `MotionValue` to animate, or an initial animation value.\n *\n * The second is either a value to animate to, or an array of keyframes to animate through.\n *\n * The third argument can be either tween or spring options, and optional lifecycle methods: `onUpdate`, `onPlay`, `onComplete`, `onRepeat` and `onStop`.\n *\n * Returns `PlaybackControls`, currently just a `stop` method.\n *\n * ```javascript\n * const x = useMotionValue(0)\n *\n * useEffect(() => {\n *   const controls = animate(x, 100, {\n *     type: \"spring\",\n *     stiffness: 2000,\n *     onComplete: v => {}\n *   })\n *\n *   return controls.stop\n * })\n * ```\n *\n * @public\n */\nfunction animate(from, to, transition) {\n    if (transition === void 0) { transition = {}; }\n    var value = isMotionValue(from) ? from : motionValue(from);\n    startAnimation(\"\", value, to, transition);\n    return {\n        stop: function () { return value.stop(); },\n    };\n}\n\n/**\n * Cycles through a series of visual properties. Can be used to toggle between or cycle through animations. It works similar to `useState` in React. It is provided an initial array of possible states, and returns an array of two arguments.\n *\n * @library\n *\n * ```jsx\n * import * as React from \"react\"\n * import { Frame, useCycle } from \"framer\"\n *\n * export function MyComponent() {\n *   const [x, cycleX] = useCycle(0, 50, 100)\n *\n *   return (\n *     <Frame\n *       animate={{ x: x }}\n *       onTap={() => cycleX()}\n *      />\n *    )\n * }\n * ```\n *\n * @motion\n *\n * An index value can be passed to the returned `cycle` function to cycle to a specific index.\n *\n * ```jsx\n * import * as React from \"react\"\n * import { motion, useCycle } from \"framer-motion\"\n *\n * export const MyComponent = () => {\n *   const [x, cycleX] = useCycle(0, 50, 100)\n *\n *   return (\n *     <motion.div\n *       animate={{ x: x }}\n *       onTap={() => cycleX()}\n *      />\n *    )\n * }\n * ```\n *\n * @param items - items to cycle through\n * @returns [currentState, cycleState]\n *\n * @public\n */\nfunction useCycle() {\n    var items = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        items[_i] = arguments[_i];\n    }\n    var index = Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(0);\n    var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(items[index.current]), 2), item = _a[0], setItem = _a[1];\n    return [\n        item,\n        function (next) {\n            index.current =\n                typeof next !== \"number\"\n                    ? Object(popmotion__WEBPACK_IMPORTED_MODULE_2__[/* wrap */ \"y\"])(0, items.length, index.current + 1)\n                    : next;\n            setItem(items[index.current]);\n        },\n    ];\n}\n\n/**\n * Can manually trigger a drag gesture on one or more `drag`-enabled `motion` components.\n *\n * @library\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <Frame onTapStart={startDrag} />\n *     <Frame drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @motion\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <div onPointerDown={startDrag} />\n *     <motion.div drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @public\n */\nvar DragControls = /** @class */ (function () {\n    function DragControls() {\n        this.componentControls = new Set();\n    }\n    /**\n     * Subscribe a component's internal `VisualElementDragControls` to the user-facing API.\n     *\n     * @internal\n     */\n    DragControls.prototype.subscribe = function (controls) {\n        var _this = this;\n        this.componentControls.add(controls);\n        return function () { return _this.componentControls.delete(controls); };\n    };\n    /**\n     * Start a drag gesture on every `motion` component that has this set of drag controls\n     * passed into it via the `dragControls` prop.\n     *\n     * ```jsx\n     * dragControls.start(e, {\n     *   snapToCursor: true\n     * })\n     * ```\n     *\n     * @param event - PointerEvent\n     * @param options - Options\n     *\n     * @public\n     */\n    DragControls.prototype.start = function (event, options) {\n        this.componentControls.forEach(function (controls) {\n            controls.start(event.nativeEvent || event, options);\n        });\n    };\n    DragControls.prototype.updateConstraints = function () {\n        this.componentControls.forEach(function (controls) {\n            controls.prepareBoundingBox();\n            controls.resolveDragConstraints();\n        });\n    };\n    return DragControls;\n}());\nvar createDragControls = function () { return new DragControls(); };\n/**\n * Usually, dragging is initiated by pressing down on a `motion` component with a `drag` prop\n * and moving it. For some use-cases, for instance clicking at an arbitrary point on a video scrubber, we\n * might want to initiate that dragging from a different component than the draggable one.\n *\n * By creating a `dragControls` using the `useDragControls` hook, we can pass this into\n * the draggable component's `dragControls` prop. It exposes a `start` method\n * that can start dragging from pointer events on other components.\n *\n * @library\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <Frame onTapStart={startDrag} />\n *     <Frame drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @motion\n *\n * ```jsx\n * const dragControls = useDragControls()\n *\n * function startDrag(event) {\n *   dragControls.start(event, { snapToCursor: true })\n * }\n *\n * return (\n *   <>\n *     <div onPointerDown={startDrag} />\n *     <motion.div drag=\"x\" dragControls={dragControls} />\n *   </>\n * )\n * ```\n *\n * @public\n */\nfunction useDragControls() {\n    return useConstant(createDragControls);\n}\n\n/**\n * Uses the ref that is passed in, or creates a new one\n * @param external - External ref\n * @internal\n */\nfunction useExternalRef(externalRef) {\n    // We're conditionally calling `useRef` here which is sort of naughty as hooks\n    // shouldn't be called conditionally. However, Framer Motion will break if this\n    // condition changes anyway. It might be possible to use an invariant here to\n    // make it explicit, but I expect changing `ref` is not normal behaviour.\n    var ref = !externalRef || typeof externalRef === \"function\"\n        ? Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useRef\"])(null)\n        : externalRef;\n    // Handle `ref` functions. Again, calling the hook conditionally is kind of naughty\n    // but `ref` types changing between renders would break Motion anyway. If we receive\n    // bug reports about this, we should track the provided ref and throw an invariant\n    // rather than move the conditional to inside the useEffect as this will be fired\n    // for every Frame component within Framer.\n    if (externalRef && typeof externalRef === \"function\") {\n        Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n            externalRef(ref.current);\n            return function () { return externalRef(null); };\n        }, []);\n    }\n    return ref;\n}\n\n/**\n * This is just a very basic VisualElement, more of a hack to keep supporting useAnimatedState with\n * the latest APIs.\n */\nvar StateVisualElement = /** @class */ (function (_super) {\n    Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __extends */ \"b\"])(StateVisualElement, _super);\n    function StateVisualElement() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.initialState = {};\n        return _this;\n    }\n    StateVisualElement.prototype.updateLayoutDelta = function () { };\n    StateVisualElement.prototype.build = function () { };\n    StateVisualElement.prototype.clean = function () { };\n    StateVisualElement.prototype.makeTargetAnimatable = function (_a) {\n        var transition = _a.transition, transitionEnd = _a.transitionEnd, target = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __rest */ \"d\"])(_a, [\"transition\", \"transitionEnd\"]);\n        var origin = getOrigin(target, transition || {}, this);\n        checkTargetForNewValues(this, target, origin);\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({ transition: transition, transitionEnd: transitionEnd }, target);\n    };\n    StateVisualElement.prototype.getBoundingBox = function () {\n        return { x: { min: 0, max: 0 }, y: { min: 0, max: 0 } };\n    };\n    StateVisualElement.prototype.readNativeValue = function (key) {\n        return this.initialState[key] || 0;\n    };\n    StateVisualElement.prototype.render = function () {\n        this.build();\n    };\n    return StateVisualElement;\n}(VisualElement));\n/**\n * This is not an officially supported API and may be removed\n * on any version.\n * @internal\n */\nfunction useAnimatedState(initialState) {\n    var _a = Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __read */ \"c\"])(Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useState\"])(initialState), 2), animationState = _a[0], setAnimationState = _a[1];\n    var visualElement = useConstant(function () { return new StateVisualElement(); });\n    visualElement.updateConfig({\n        onUpdate: function (v) { return setAnimationState(Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __assign */ \"a\"])({}, v)); },\n    });\n    visualElement.initialState = initialState;\n    Object(react__WEBPACK_IMPORTED_MODULE_5__[\"useEffect\"])(function () {\n        visualElement.mount({});\n        return function () { return visualElement.unmount(); };\n    }, []);\n    var startAnimation = useConstant(function () { return function (animationDefinition) {\n        return animateVisualElement(visualElement, animationDefinition);\n    }; });\n    return [animationState, startAnimation];\n}\n\n// Keep things reasonable and avoid scale: Infinity. In practise we might need\n// to add another value, opacity, that could interpolate scaleX/Y [0,0.01] => [0,1]\n// to simply hide content at unreasonable scales.\nvar maxScale = 100000;\nvar invertScale = function (scale) {\n    return scale > 0.001 ? 1 / scale : maxScale;\n};\nvar hasWarned = false;\n/**\n * Returns a `MotionValue` each for `scaleX` and `scaleY` that update with the inverse\n * of their respective parent scales.\n *\n * This is useful for undoing the distortion of content when scaling a parent component.\n *\n * By default, `useInvertedScale` will automatically fetch `scaleX` and `scaleY` from the nearest parent.\n * By passing other `MotionValue`s in as `useInvertedScale({ scaleX, scaleY })`, it will invert the output\n * of those instead.\n *\n * @motion\n *\n * ```jsx\n * const MyComponent = () => {\n *   const { scaleX, scaleY } = useInvertedScale()\n *   return <motion.div style={{ scaleX, scaleY }} />\n * }\n * ```\n *\n * @library\n *\n * ```jsx\n * function MyComponent() {\n *   const { scaleX, scaleY } = useInvertedScale()\n *   return <Frame scaleX={scaleX} scaleY={scaleY} />\n * }\n * ```\n *\n * @deprecated\n */\nfunction useInvertedScale(scale) {\n    var parentScaleX = useMotionValue(1);\n    var parentScaleY = useMotionValue(1);\n    var visualElement = useVisualElementContext();\n    Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* invariant */ \"a\"])(!!(scale || visualElement), \"If no scale values are provided, useInvertedScale must be used within a child of another motion component.\");\n    Object(hey_listen__WEBPACK_IMPORTED_MODULE_3__[/* warning */ \"b\"])(hasWarned, \"useInvertedScale is deprecated and will be removed in 3.0. Use the layout prop instead.\");\n    hasWarned = true;\n    if (scale) {\n        parentScaleX = scale.scaleX || parentScaleX;\n        parentScaleY = scale.scaleY || parentScaleY;\n    }\n    else if (visualElement) {\n        parentScaleX = visualElement.getValue(\"scaleX\", 1);\n        parentScaleY = visualElement.getValue(\"scaleY\", 1);\n    }\n    var scaleX = useTransform(parentScaleX, invertScale);\n    var scaleY = useTransform(parentScaleY, invertScale);\n    return { scaleX: scaleX, scaleY: scaleY };\n}\n\n\n\n\n/***/ })\n\n}]);"}